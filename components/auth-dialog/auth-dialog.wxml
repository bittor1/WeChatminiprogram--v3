<!--components/auth-dialog/auth-dialog.wxml-->
<view class="dialog-mask" wx:if="{{show}}" bindtap="hideDialog">
  <view class="dialog-container" catchtap="preventBubble">
    <!-- 简洁三行布局 -->
    <view class="auth-content">
      <!-- 第一行：头像 -->
      <view class="avatar-wrapper">
        <button class="avatar-section" open-type="chooseAvatar" bind:chooseavatar="onChooseAvatar" disabled="{{isSaving}}">
          <image class="avatar-image" src="{{avatarUrl || '/images/placeholder-user.jpg'}}"></image>
          <view class="avatar-tip">点击选择头像</view>
        </button>
      </view>
      
      <!-- 重试提示 -->
      <view class="retry-tip" wx:if="{{showRetryTip}}">
        <text class="retry-text">头像选择异常？</text>
        <text class="retry-btn" bindtap="resetAvatar">重新选择</text>
      </view>
      
      <!-- 第二行：昵称 -->
      <view class="nickname-section">
        <input 
          class="nickname-input" 
          type="nickname" 
          placeholder="昵称"
          placeholder-class="nickname-placeholder"
          bindinput="onNicknameInput"
          value="{{nickname}}"
          disabled="{{isSaving}}"
        />
      </view>
      
      <!-- 第三行：确认按钮 -->
      <view class="confirm-section">
        <button 
          class="confirm-btn" 
          bindtap="handleConfirm" 
          loading="{{isSaving}}" 
          disabled="{{!avatarUrl || !nickname || isSaving}}">
          确认登录
        </button>
      </view>
    </view>
  </view>
</view>