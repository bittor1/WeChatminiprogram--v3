<!--components/auth-dialog/auth-dialog.wxml-->
<view class="dialog-mask" wx:if="{{show}}" bindtap="hideDialog">
  <view class="dialog-container" catchtap="preventBubble">
    <view class="dialog-header">
      <view class="dialog-title">授权登录</view>
      <text class="dialog-subtitle">为了提供更好的服务，我们需要您的授权</text>
    </view>
    <view class="dialog-content">
      <button class="avatar-wrapper" open-type="chooseAvatar" bind:chooseavatar="onChooseAvatar" disabled="{{isSaving}}">
        <image class="avatar-image" src="{{avatarUrl}}"></image>
        <view class="avatar-edit-icon">+</view>
      </button>
      <input 
        class="nickname-input" 
        type="nickname" 
        placeholder="请输入昵称" 
        bindinput="onNicknameInput"
        value="{{nickname}}"
        disabled="{{isSaving}}"
      />
    </view>
    <view class="dialog-footer">
      <button class="dialog-btn btn-primary" bindtap="handleSaveAndLogin" loading="{{isSaving}}" disabled="{{!tempAvatarPath || !nickname.trim()}}">
        保存并登录
      </button>
      <button class="dialog-btn btn-secondary" bindtap="hideDialog" disabled="{{isSaving}}">
        暂不登录
      </button>
    </view>
  </view>
</view> 