<view class="container">
  <!-- ç‹¬ç«‹çš„ç”¨æˆ·å¤´åƒæŒ‰é’® - å›ºå®šåœ¨å³ä¸Šè§’ -->
  <view class="top-right-avatar-fixed" catchtap="openUserCenter" data-test="user-center-avatar">
    <image wx:if="{{userInfo && userInfo.avatar}}" class="avatar-image" src="{{userInfo.avatar}}" mode="aspectFill"></image>
    <view wx:else class="avatar-placeholder">ğŸ‘¤</view>
  </view>

  <!-- å¤´éƒ¨åŒºåŸŸ -->
  <view class="header-section px-20 py-16">
    <!-- æ ‡é¢˜å’Œç”¨æˆ·å¤´åƒåŒº -->
    <view class="title-header">
      <text class="main-title h1">ä¼¦æ•¦å¿…åƒæ¦œ</text>
    </view>
    
    <view class="title-container text-center mb-16">
      <text class="season-text text-small">ç¬¬ä¸€èµ›å­£</text>
      <text class="sub-title text-small">London DECHI Leaderboard</text>
      <text class="description text-small">ä½ ä»Šå¤©ä¸Šæ¦œäº†å—</text>
    </view>

    <!-- æ•°æ®ç»Ÿè®¡å¡ç‰‡ -->
    <view class="stats-card card flex p-16">
      <view class="stat-item flex-1 flex flex-col items-center">
        <text class="stat-number text-number">{{rankings.length}}</text>
        <text class="stat-label text-small">ä¸Šæ¦œäººæ•°</text>
      </view>
      <view class="stat-item flex-1 flex flex-col items-center">
        <text class="stat-number text-number">{{totalVotes}}</text>
        <text class="stat-label text-small">æ€»æŠ•ç¥¨</text>
      </view>
      <view class="stat-item flex-1 flex flex-col items-center">
        <view class="stat-icon">ğŸ”¥</view>
        <text class="stat-label text-small">ç«çƒ­æ¦œ</text>
      </view>
    </view>
  </view>

  <!-- æ’è¡Œæ¦œåˆ—è¡¨ -->
  <view class="ranking-list px-20">
    <view 
      class="ranking-item card flex items-center p-16 mb-16" 
      wx:for="{{rankings}}" 
      wx:key="id"
      bindtap="goToDetail"
      data-id="{{item.id}}"
    >
      <!-- æ’åæ ‡è¯† -->
      <view class="rank-indicator flex justify-center items-center">
        <view wx:if="{{item.rank === 1}}" class="rank-icon">ğŸ‘‘</view>
        <view wx:elif="{{item.rank === 2}}" class="rank-icon">ğŸ†</view>
        <view wx:elif="{{item.rank === 3}}" class="rank-icon">â­</view>
        <text wx:else class="rank-number">{{item.rank}}</text>
      </view>
      
      <!-- å¤´åƒ -->
      <image class="avatar" src="{{item.avatar}}" mode="aspectFill"></image>
      
      <!-- ç”¨æˆ·ä¿¡æ¯ -->
      <view class="user-info flex-1 px-16">
        <view class="flex items-center gap-8">
          <text class="user-name h2">{{item.name}}</text>
          <view wx:if="{{item.hotLevel >= 4}}" class="badge badge-red">
            <text class="badge-icon">ğŸ”¥</text>
            <text class="badge-text">ç«çƒ­</text>
          </view>
          <view wx:elif="{{item.hotLevel >= 3}}" class="badge badge-green">
            <text class="badge-icon">ğŸ“ˆ</text>
            <text class="badge-text">ä¸Šå‡</text>
          </view>
        </view>
        <view class="flex items-center">
          <text class="rank-position text-small">#{{item.rank}}</text>
          <view class="trend-indicator flex items-center">
            <view class="trend-dot {{item.trend === 'up' ? 'trend-up' : item.trend === 'down' ? 'trend-down' : 'trend-stable'}}"></view>
            <text class="trend-text text-small {{item.trend === 'up' ? 'text-green' : item.trend === 'down' ? 'text-red' : 'text-gray'}}">
              {{item.trend === 'up' ? 'åŠ¿å¤´æ­£çŒ›' : item.trend === 'down' ? 'æœ‰æ‰€ä¸‹æ»‘' : 'ç¨³å®šå‘æŒ¥'}}
            </text>
          </view>
        </view>
      </view>
      
      <!-- äººæƒ³åƒ -->
      <view class="vote-count flex flex-col items-center">
        <text class="vote-number text-number">{{item.votes}}</text>
        <text class="vote-label text-small">äººæƒ³åƒ</text>
      </view>
    </view>
  </view>
  
  <!-- æ‚¬æµ®å…³äºæŒ‰é’® (å·¦ä¸‹è§’) -->
  <view class="floating-btn about-btn" bindtap="goToAbout">
    <text class="btn-icon">â„¹ï¸</text>
    <text class="btn-text">å…³äºä½œè€…</text>
  </view>
  
  <!-- æ‚¬æµ®æ·»åŠ æŒ‰é’® (å³ä¸‹è§’) -->
  <view class="floating-btn add-btn" bindtap="goToCreate">
    <text class="btn-icon">+</text>
    <text class="btn-text">æåæœ‹å‹</text>
  </view>
  
  <!-- ç”¨æˆ·ä¸­å¿ƒæŠ½å±‰ç»„ä»¶ -->
  <user-center-drawer
    show="{{showUserCenter}}"
    userInfo="{{userInfo}}"
    bind:close="closeUserCenter"
    bind:logout="handleUserLogout"
  />
</view>
