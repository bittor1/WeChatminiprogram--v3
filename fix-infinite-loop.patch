From 60a43bee50028f5e667689f28f3a12945c622bd2 Mon Sep 17 00:00:00 2001
From: Marusmurong <marusmurong@gmail.com>
Date: Fri, 22 Aug 2025 03:13:01 +0800
Subject: [PATCH] =?UTF-8?q?fix:=20=E4=BF=AE=E5=A4=8D=E9=A1=B5=E9=9D=A2?=
 =?UTF-8?q?=E5=8A=A0=E8=BD=BD=E6=AD=BB=E5=BE=AA=E7=8E=AF=E9=97=AE=E9=A2=98?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

- åœ¨ pages/index/index.js æ·»åŠ  isRefreshing å’Œ hasInitialized çŠ¶æ€æ§åˆ¶
- ä¿®æ”¹ onShow é€»è¾‘ï¼Œåªåœ¨åˆå§‹åŒ–åæ‰§è¡Œ loadData
- ä¿®æ”¹ loadData æ–¹æ³•ï¼Œç§»é™¤è‡ªåŠ¨åˆ·æ–°é€»è¾‘
- åœ¨ refreshData æ·»åŠ é‡å¤åˆ·æ–°ä¿æŠ¤
- ä¿®æ”¹ app.js çš„ refreshRankingDataï¼Œå¢åŠ æŸ¥è¯¢é™åˆ¶åˆ°50æ¡
---
 .DS_Store                                     |  Bin 0 -> 6148 bytes
 CHANGELOG.md                                  |   96 +-
 CLAUDE.md                                     |  133 +
 GUARDIAN_REPORT.md                            |  138 +-
 QUICK_START.md                                |   93 +
 app.js                                        |   13 +-
 cloudfunctions/commentManage/index.js         |  457 +++
 cloudfunctions/commentManage/package.json     |   26 +-
 cloudfunctions/contentReview/index.js         |  560 ++--
 cloudfunctions/contentReview/package.json     |   26 +-
 cloudfunctions/grantShareReward/index.js      |  166 +-
 .../grantShareReward/package-lock.json        | 2576 ++++++++---------
 cloudfunctions/grantShareReward/package.json  |   26 +-
 cloudfunctions/login/package.json             |   16 +
 cloudfunctions/messageManage/package.json     |   26 +-
 cloudfunctions/search/index.js                |  367 +++
 cloudfunctions/shareAnalytics/package.json    |   26 +-
 cloudfunctions/statistics/index.js            |  706 ++---
 cloudfunctions/statistics/package.json        |   26 +-
 code-review-report.md                         |  708 ++---
 components/.DS_Store                          |  Bin 0 -> 6148 bytes
 components/auth-dialog/auth-dialog.js         |  112 +
 components/auth-dialog/auth-dialog.wxml       |   31 +
 components/auth-dialog/auth-dialog.wxss       |  111 +
 components/login-dialog/login-dialog.json     |    6 +-
 database-schema/content_review_logs.md        |  236 +-
 database-schema/messages.md                   |  202 +-
 database-schema/search_logs.md                |  138 +
 database-schema/share_records.md              |  288 +-
 open-project.sh                               |   26 +
 pages/.DS_Store                               |  Bin 0 -> 6148 bytes
 pages/deeds-wall/deeds-wall.js                |  376 +--
 pages/deeds-wall/deeds-wall.json              |   12 +-
 pages/deeds-wall/deeds-wall.wxml              |   64 +-
 pages/deeds-wall/deeds-wall.wxss              |  280 +-
 pages/detail/detail.wxml                      |    3 +-
 pages/index/index.js                          |   41 +-
 pages/orders/orders.wxml                      |    2 +-
 pages/report-deed/report-deed.js              |  328 +--
 pages/report-deed/report-deed.json            |   10 +-
 pages/report-deed/report-deed.wxml            |  144 +-
 pages/report-deed/report-deed.wxss            |  318 +-
 preview.html                                  |  329 +++
 quick-start-uniapp.md                         |  278 ++
 44 files changed, 5814 insertions(+), 3706 deletions(-)
 create mode 100644 .DS_Store
 create mode 100644 CLAUDE.md
 create mode 100644 QUICK_START.md
 create mode 100644 cloudfunctions/search/index.js
 create mode 100644 components/.DS_Store
 create mode 100644 components/auth-dialog/auth-dialog.js
 create mode 100644 components/auth-dialog/auth-dialog.wxml
 create mode 100644 components/auth-dialog/auth-dialog.wxss
 create mode 100644 database-schema/search_logs.md
 create mode 100644 open-project.sh
 create mode 100644 pages/.DS_Store
 create mode 100644 preview.html
 create mode 100644 quick-start-uniapp.md

diff --git a/.DS_Store b/.DS_Store
new file mode 100644
index 0000000000000000000000000000000000000000..ae0a46be0a6f13bfd8856cc360f7f9a43f04fc4e
GIT binary patch
literal 6148
zcmeHK%TB{E5S*ngs(?d}9Q_OYK~$A5-~)g*2qA?UDfFICXU6MRjmQ;*(5__9W?zm+
zik$^u>qC17tN<)IgeGM|WS(?g)ZhitN{x&?UN}C{PZau#CcXO=cF1_g2j|oKxBaf$
z=G<{(xWpUX&v@nL`g6w&9bMa_NgKRjiHw$!kIa#FV9;5ff)-qBqMTeI!9Xw&3<Lwg
zzz;K^tBta}c8oa~2nK?I69YOQ5{Iy<I5?K0gHve%h;y2YP**RZoK&%?I5^TnF;69W
zs?`?5Je~Gb<C=<tqo>1a^I>)6WAkEVb=FTM9M(9-91H{lV+LmaxYGT9&rfEu$sec0
zQ!o$={4)k@zIoWJxv6@$e%qez+Qjk1AyM2Qg+hJw6Tk<ZBe%ur{v@4oO~t`cRb(&e
P#P|^?gv1mK`~m}CB$X_)

literal 0
HcmV?d00001

diff --git a/CHANGELOG.md b/CHANGELOG.md
index 6d866a6..d107029 100644
--- a/CHANGELOG.md
+++ b/CHANGELOG.md
@@ -1,49 +1,49 @@
-# å˜æ›´æ—¥å¿—
-
-## 2025-08-16 - ç”¨æˆ·ä½“éªŒä¼˜åŒ–
-
-### ç”¨æˆ·ç™»å½•é€»è¾‘ä¿®å¤
-- [ç™»å½•é€»è¾‘] pages/index/index.js: ä¿®æ”¹loadDataå‡½æ•°ï¼Œç§»é™¤è‡ªåŠ¨ä»æœ¬åœ°å­˜å‚¨åŠ è½½ç”¨æˆ·ä¿¡æ¯çš„é€»è¾‘
-- [ç™»å½•é€»è¾‘] pages/index/index.js: ä¿®æ”¹openUserCenterå‡½æ•°ï¼Œç¡®ä¿ç‚¹å‡»æ—¶æ˜¾ç¤ºæŠ½å±‰è€Œä¸æ˜¯ç›´æ¥è°ƒç”¨ç™»å½•API
-- [ç™»å½•ç•Œé¢] components/user-center-drawer/user-center-drawer.wxml: æ·»åŠ ç™»å½•æŒ‰é’®ï¼ŒåŒºåˆ†å·²ç™»å½•å’Œæœªç™»å½•çŠ¶æ€
-- [ç™»å½•åŠŸèƒ½] components/user-center-drawer/user-center-drawer.js: æ·»åŠ loginå‡½æ•°ï¼Œå®ç°ç¬¦åˆå¾®ä¿¡å®˜æ–¹è§„èŒƒçš„ç™»å½•æµç¨‹
-- [äº‹ä»¶å¤„ç†] pages/index/index.js: æ·»åŠ handleUserLoginå’ŒhandleUserInfoUpdateå‡½æ•°ï¼Œå¤„ç†ç™»å½•å’Œç”¨æˆ·ä¿¡æ¯æ›´æ–°äº‹ä»¶
-
-## 2025-08-16 - æ•°æ®åŠ è½½ä¼˜åŒ–
-
-### è‡´å‘½é”™è¯¯ä¿®å¤
-- [æ•°æ®åˆå§‹åŒ–] app.js: ä¿®æ”¹å…¨å±€æ•°æ®åˆå§‹åŒ–é€»è¾‘ï¼Œç§»é™¤é»˜è®¤çš„å¼ ä¸‰æ•°æ®ï¼Œåˆå§‹åŒ–rankingsä¸ºç©ºæ•°ç»„
-- [æ•°æ®åŠ è½½] pages/index/index.js: ä¿®æ”¹onLoadå‡½æ•°ï¼Œé¦–æ¬¡åŠ è½½æ—¶å¼ºåˆ¶åˆ·æ–°æ•°æ®è€Œéä½¿ç”¨ç¼“å­˜
-- [æ•°æ®åŠ è½½] pages/index/index.js: ä¿®æ”¹onShowå’ŒloadDataå‡½æ•°ï¼Œæ£€æµ‹ç©ºæ•°æ®æ—¶è‡ªåŠ¨åˆ·æ–°
-
-## 2025-08-15 - é¡¹ç›®å…¨é¢ä¼˜åŒ–
-
-### è‡´å‘½é”™è¯¯ä¿®å¤
-- [APIä¿®å¤] app.js: ç§»é™¤å·²åºŸå¼ƒçš„ wx.getSystemInfoSync() APIçš„monkey patch
-- [æ•°æ®ä¸€è‡´æ€§] app.js: ä¿®æ”¹æ’è¡Œæ¦œæ•°æ®åˆ·æ–°é€»è¾‘ï¼Œç§»é™¤votes > 0çš„è¿‡æ»¤æ¡ä»¶ï¼Œç¡®ä¿æ–°æåèƒ½æ˜¾ç¤º
-- [æ•°æ®ä¸€è‡´æ€§] pages/detail/detail.js: ä¿®æ”¹é»˜è®¤çš„achievementså’Œcommentsä¸ºç©ºæ•°ç»„ï¼Œé¿å…æ–°æåæ˜¾ç¤ºå¼ ä¸‰æ•°æ®
-- [å¼‚å¸¸å¤„ç†] pages/detail/detail.js: ä¿®æ”¹generateDanmakuItemså‡½æ•°ï¼Œä¸ºæ–°ç”¨æˆ·ä¸ç”Ÿæˆéšæœºå¼¹å¹•
-- [APIä¿®å¤] pages/detail/detail.js: ä¿®å¤onShareAppMessageå‡½æ•°ï¼Œä½¿ç”¨promiseå±æ€§å¤„ç†å¼‚æ­¥é€»è¾‘ï¼Œç¬¦åˆå®˜æ–¹è§„èŒƒ
-- [å¼‚å¸¸å¤„ç†] pages/detail/detail.js: ä¸ºéŸ³é¢‘APIè°ƒç”¨æ·»åŠ å®Œæ•´çš„å¼‚å¸¸å¤„ç†é€»è¾‘
-- [æˆæƒé€»è¾‘] pages/detail/detail.js: ä¿®å¤å½•éŸ³æˆæƒé€»è¾‘ï¼Œç¡®ä¿ç¬¦åˆå¾®ä¿¡å®˜æ–¹è§„èŒƒ
-
-### åŠŸèƒ½ç¼ºé™·ä¿®å¤
-- [è¡¨å•éªŒè¯] pages/create/create.js: æ·»åŠ checkFormValidityå‡½æ•°ï¼Œå®Œå–„æåè¡¨å•éªŒè¯é€»è¾‘
-- [è¡¨å•éªŒè¯] pages/create/create.wxml: ä¿®æ”¹æåä¸Šæ¦œæŒ‰é’®çš„ç¦ç”¨æ¡ä»¶ï¼Œä½¿ç”¨isFormValidçŠ¶æ€
-- [å¼‚å¸¸å¤„ç†] pages/create/create.js: ä¿®å¤è§†é¢‘è½¬GIFåŠŸèƒ½çš„å¼‚å¸¸å¤„ç†
-- [å¼‚å¸¸å¤„ç†] pages/create/create.js: ä¿®å¤æåè¡¨å•æäº¤çš„å¼‚å¸¸å¤„ç†ï¼Œä½¿ç”¨æ ‡å‡†çš„äº‘å‡½æ•°è°ƒç”¨
-- [åˆ†äº«API] pages/index/index.js: ä¿®å¤åˆ†äº«APIå®ç°ï¼Œç¡®ä¿ç¬¦åˆå®˜æ–¹è§„èŒƒ
-
-### æ€§èƒ½ä¼˜åŒ–
-- [å›¾ç‰‡ä¼˜åŒ–] pages/index/index.wxml: ä¸ºæ’è¡Œæ¦œå¤´åƒæ·»åŠ lazy-loadå±æ€§
-- [å›¾ç‰‡ä¼˜åŒ–] pages/detail/detail.wxml: ä¸ºç”¨æˆ·å¤´åƒæ·»åŠ lazy-loadå±æ€§
-
-### ä½“éªŒæ”¹è¿›
-- [åŠ è½½æç¤º] pages/index/index.js: ä¸ºloadDataå’ŒrefreshDataå‡½æ•°æ·»åŠ åŠ è½½çŠ¶æ€æç¤º
-- [é”™è¯¯æç¤º] pages/index/index.js: ä¿®å¤ç»Ÿè®¡æ•°æ®åŠ è½½çš„å¼‚å¸¸å¤„ç†ï¼Œæ·»åŠ å‹å¥½é”™è¯¯æç¤º
-- [é”™è¯¯æç¤º] app.js: ä¸ºrefreshRankingDataæ·»åŠ å‹å¥½çš„é”™è¯¯æç¤º
-
-### ä»£ç è§„èŒƒ
-- [æ³¨é‡Šä¼˜åŒ–] ä¸ºå…³é”®å‡½æ•°æ·»åŠ æ›´è¯¦ç»†çš„æ³¨é‡Š
-- [é”™è¯¯å¤„ç†] ç»Ÿä¸€ä½¿ç”¨try-catchå’ŒPromise.catchå¤„ç†å¼‚å¸¸
+# å˜æ›´æ—¥å¿—
+
+## 2025-08-16 - ç”¨æˆ·ä½“éªŒä¼˜åŒ–
+
+### ç”¨æˆ·ç™»å½•é€»è¾‘ä¿®å¤
+- [ç™»å½•é€»è¾‘] pages/index/index.js: ä¿®æ”¹loadDataå‡½æ•°ï¼Œç§»é™¤è‡ªåŠ¨ä»æœ¬åœ°å­˜å‚¨åŠ è½½ç”¨æˆ·ä¿¡æ¯çš„é€»è¾‘
+- [ç™»å½•é€»è¾‘] pages/index/index.js: ä¿®æ”¹openUserCenterå‡½æ•°ï¼Œç¡®ä¿ç‚¹å‡»æ—¶æ˜¾ç¤ºæŠ½å±‰è€Œä¸æ˜¯ç›´æ¥è°ƒç”¨ç™»å½•API
+- [ç™»å½•ç•Œé¢] components/user-center-drawer/user-center-drawer.wxml: æ·»åŠ ç™»å½•æŒ‰é’®ï¼ŒåŒºåˆ†å·²ç™»å½•å’Œæœªç™»å½•çŠ¶æ€
+- [ç™»å½•åŠŸèƒ½] components/user-center-drawer/user-center-drawer.js: æ·»åŠ loginå‡½æ•°ï¼Œå®ç°ç¬¦åˆå¾®ä¿¡å®˜æ–¹è§„èŒƒçš„ç™»å½•æµç¨‹
+- [äº‹ä»¶å¤„ç†] pages/index/index.js: æ·»åŠ handleUserLoginå’ŒhandleUserInfoUpdateå‡½æ•°ï¼Œå¤„ç†ç™»å½•å’Œç”¨æˆ·ä¿¡æ¯æ›´æ–°äº‹ä»¶
+
+## 2025-08-16 - æ•°æ®åŠ è½½ä¼˜åŒ–
+
+### è‡´å‘½é”™è¯¯ä¿®å¤
+- [æ•°æ®åˆå§‹åŒ–] app.js: ä¿®æ”¹å…¨å±€æ•°æ®åˆå§‹åŒ–é€»è¾‘ï¼Œç§»é™¤é»˜è®¤çš„å¼ ä¸‰æ•°æ®ï¼Œåˆå§‹åŒ–rankingsä¸ºç©ºæ•°ç»„
+- [æ•°æ®åŠ è½½] pages/index/index.js: ä¿®æ”¹onLoadå‡½æ•°ï¼Œé¦–æ¬¡åŠ è½½æ—¶å¼ºåˆ¶åˆ·æ–°æ•°æ®è€Œéä½¿ç”¨ç¼“å­˜
+- [æ•°æ®åŠ è½½] pages/index/index.js: ä¿®æ”¹onShowå’ŒloadDataå‡½æ•°ï¼Œæ£€æµ‹ç©ºæ•°æ®æ—¶è‡ªåŠ¨åˆ·æ–°
+
+## 2025-08-15 - é¡¹ç›®å…¨é¢ä¼˜åŒ–
+
+### è‡´å‘½é”™è¯¯ä¿®å¤
+- [APIä¿®å¤] app.js: ç§»é™¤å·²åºŸå¼ƒçš„ wx.getSystemInfoSync() APIçš„monkey patch
+- [æ•°æ®ä¸€è‡´æ€§] app.js: ä¿®æ”¹æ’è¡Œæ¦œæ•°æ®åˆ·æ–°é€»è¾‘ï¼Œç§»é™¤votes > 0çš„è¿‡æ»¤æ¡ä»¶ï¼Œç¡®ä¿æ–°æåèƒ½æ˜¾ç¤º
+- [æ•°æ®ä¸€è‡´æ€§] pages/detail/detail.js: ä¿®æ”¹é»˜è®¤çš„achievementså’Œcommentsä¸ºç©ºæ•°ç»„ï¼Œé¿å…æ–°æåæ˜¾ç¤ºå¼ ä¸‰æ•°æ®
+- [å¼‚å¸¸å¤„ç†] pages/detail/detail.js: ä¿®æ”¹generateDanmakuItemså‡½æ•°ï¼Œä¸ºæ–°ç”¨æˆ·ä¸ç”Ÿæˆéšæœºå¼¹å¹•
+- [APIä¿®å¤] pages/detail/detail.js: ä¿®å¤onShareAppMessageå‡½æ•°ï¼Œä½¿ç”¨promiseå±æ€§å¤„ç†å¼‚æ­¥é€»è¾‘ï¼Œç¬¦åˆå®˜æ–¹è§„èŒƒ
+- [å¼‚å¸¸å¤„ç†] pages/detail/detail.js: ä¸ºéŸ³é¢‘APIè°ƒç”¨æ·»åŠ å®Œæ•´çš„å¼‚å¸¸å¤„ç†é€»è¾‘
+- [æˆæƒé€»è¾‘] pages/detail/detail.js: ä¿®å¤å½•éŸ³æˆæƒé€»è¾‘ï¼Œç¡®ä¿ç¬¦åˆå¾®ä¿¡å®˜æ–¹è§„èŒƒ
+
+### åŠŸèƒ½ç¼ºé™·ä¿®å¤
+- [è¡¨å•éªŒè¯] pages/create/create.js: æ·»åŠ checkFormValidityå‡½æ•°ï¼Œå®Œå–„æåè¡¨å•éªŒè¯é€»è¾‘
+- [è¡¨å•éªŒè¯] pages/create/create.wxml: ä¿®æ”¹æåä¸Šæ¦œæŒ‰é’®çš„ç¦ç”¨æ¡ä»¶ï¼Œä½¿ç”¨isFormValidçŠ¶æ€
+- [å¼‚å¸¸å¤„ç†] pages/create/create.js: ä¿®å¤è§†é¢‘è½¬GIFåŠŸèƒ½çš„å¼‚å¸¸å¤„ç†
+- [å¼‚å¸¸å¤„ç†] pages/create/create.js: ä¿®å¤æåè¡¨å•æäº¤çš„å¼‚å¸¸å¤„ç†ï¼Œä½¿ç”¨æ ‡å‡†çš„äº‘å‡½æ•°è°ƒç”¨
+- [åˆ†äº«API] pages/index/index.js: ä¿®å¤åˆ†äº«APIå®ç°ï¼Œç¡®ä¿ç¬¦åˆå®˜æ–¹è§„èŒƒ
+
+### æ€§èƒ½ä¼˜åŒ–
+- [å›¾ç‰‡ä¼˜åŒ–] pages/index/index.wxml: ä¸ºæ’è¡Œæ¦œå¤´åƒæ·»åŠ lazy-loadå±æ€§
+- [å›¾ç‰‡ä¼˜åŒ–] pages/detail/detail.wxml: ä¸ºç”¨æˆ·å¤´åƒæ·»åŠ lazy-loadå±æ€§
+
+### ä½“éªŒæ”¹è¿›
+- [åŠ è½½æç¤º] pages/index/index.js: ä¸ºloadDataå’ŒrefreshDataå‡½æ•°æ·»åŠ åŠ è½½çŠ¶æ€æç¤º
+- [é”™è¯¯æç¤º] pages/index/index.js: ä¿®å¤ç»Ÿè®¡æ•°æ®åŠ è½½çš„å¼‚å¸¸å¤„ç†ï¼Œæ·»åŠ å‹å¥½é”™è¯¯æç¤º
+- [é”™è¯¯æç¤º] app.js: ä¸ºrefreshRankingDataæ·»åŠ å‹å¥½çš„é”™è¯¯æç¤º
+
+### ä»£ç è§„èŒƒ
+- [æ³¨é‡Šä¼˜åŒ–] ä¸ºå…³é”®å‡½æ•°æ·»åŠ æ›´è¯¦ç»†çš„æ³¨é‡Š
+- [é”™è¯¯å¤„ç†] ç»Ÿä¸€ä½¿ç”¨try-catchå’ŒPromise.catchå¤„ç†å¼‚å¸¸
 - [å‘½åè§„èŒƒ] ä½¿ç”¨æ›´è¯­ä¹‰åŒ–çš„å˜é‡åå’Œå‡½æ•°å 
\ No newline at end of file
diff --git a/CLAUDE.md b/CLAUDE.md
new file mode 100644
index 0000000..fbdfac8
--- /dev/null
+++ b/CLAUDE.md
@@ -0,0 +1,133 @@
+# CLAUDE.md
+
+This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.
+
+## é¡¹ç›®æ¦‚è¿°
+
+è¿™æ˜¯ä¸€ä¸ªåä¸º"ä¼¦æ•¦å¿…åƒæ¦œ"çš„å¾®ä¿¡å°ç¨‹åºé¡¹ç›®ï¼Œé‡‡ç”¨æ··åˆæ¶æ„ï¼š
+- å‰ç«¯ï¼šå¾®ä¿¡å°ç¨‹åºåŸç”Ÿå¼€å‘ï¼ˆä½¿ç”¨åŸç”ŸJSï¼Œéæ¡†æ¶ï¼‰
+- åç«¯ï¼šåŸºäºå¾®ä¿¡äº‘å¼€å‘ï¼ˆCloud Functionsï¼‰
+- éƒ¨åˆ†é¡µé¢ä½¿ç”¨äº† Next.jsï¼ˆä½†ä¸»è¦æ˜¯å°ç¨‹åºé¡¹ç›®ï¼‰
+
+## å¸¸ç”¨å¼€å‘å‘½ä»¤
+
+### å°ç¨‹åºå¼€å‘
+```bash
+# ä½¿ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·æ‰“å¼€é¡¹ç›®
+# é¡¹ç›®AppID: wx29cb754190a5c042
+
+# äº‘å‡½æ•°æœ¬åœ°è°ƒè¯•
+# åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­å³é”®äº‘å‡½æ•°æ–‡ä»¶å¤¹ -> æœ¬åœ°è°ƒè¯•
+
+# ä¸Šä¼ äº‘å‡½æ•°
+# åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­å³é”®äº‘å‡½æ•°æ–‡ä»¶å¤¹ -> ä¸Šä¼ å¹¶éƒ¨ç½²
+```
+
+### Next.js éƒ¨åˆ†ï¼ˆå¦‚æœéœ€è¦ï¼‰
+```bash
+npm run dev      # å¼€å‘æ¨¡å¼
+npm run build    # æ„å»ºé¡¹ç›®
+npm run lint     # ä»£ç æ£€æŸ¥
+npm run start    # ç”Ÿäº§ç¯å¢ƒè¿è¡Œ
+```
+
+## é¡¹ç›®æ¶æ„
+
+### å°ç¨‹åºç«¯ç»“æ„
+- `/pages/` - å°ç¨‹åºé¡µé¢
+  - `index` - é¦–é¡µï¼ˆæ’è¡Œæ¦œï¼‰
+  - `detail` - é¤å…è¯¦æƒ…é¡µ
+  - `create` - åˆ›å»ºæåé¡µ
+  - `my-nominations` - æˆ‘çš„æå
+  - `my-votes` - æˆ‘çš„æŠ•ç¥¨
+  - `orders` - è®¢å•é¡µé¢
+  - `deeds-wall` - å–„è¡Œå¢™
+  - `report-deed` - æ±‡æŠ¥å–„è¡Œ
+- `/components/` - è‡ªå®šä¹‰ç»„ä»¶
+  - `auth-dialog` - æˆæƒå¯¹è¯æ¡†ç»„ä»¶
+- `/utils/` - å·¥å…·å‡½æ•°
+- `/service/` - æœåŠ¡å±‚ä»£ç 
+
+### äº‘å‡½æ•°ç»“æ„
+- `/cloudfunctions/` - æ‰€æœ‰äº‘å‡½æ•°
+  - `userManage` - ç”¨æˆ·ç®¡ç†ï¼ˆç™»å½•ã€è·å–ç”¨æˆ·ä¿¡æ¯ï¼‰
+  - `nominationManage` - æåç®¡ç†
+  - `voteManage` - æŠ•ç¥¨ç®¡ç†
+  - `commentManage` - è¯„è®ºç®¡ç†
+  - `contentReview` - å†…å®¹å®¡æ ¸
+  - `statistics` - ç»Ÿè®¡åŠŸèƒ½
+  - `search` - æœç´¢åŠŸèƒ½
+  - `dbInit` - æ•°æ®åº“åˆå§‹åŒ–
+
+### æ•°æ®åº“é›†åˆ
+- `users` - ç”¨æˆ·ä¿¡æ¯
+- `entries` - é¤å…æåæ¡ç›®
+- `votes` - æŠ•ç¥¨è®°å½•
+- `comments` - è¯„è®ºè®°å½•
+- `orders` - è®¢å•è®°å½•
+
+## å…³é”®æŠ€æœ¯ç‚¹
+
+### äº‘å¼€å‘ç¯å¢ƒ
+- ç¯å¢ƒID: `cloud1-2g2sby6z920b76cb`
+- æ‰€æœ‰äº‘å‡½æ•°éƒ½éœ€è¦ä½¿ç”¨æ­¤ç¯å¢ƒIDåˆå§‹åŒ–
+
+### ç”¨æˆ·è®¤è¯æµç¨‹
+1. ç”¨æˆ·ç‚¹å‡»ç™»å½• -> è°ƒç”¨ `wx.getUserProfile` è·å–ç”¨æˆ·ä¿¡æ¯
+2. ä¸Šä¼ å¤´åƒåˆ°äº‘å­˜å‚¨è·å– fileID
+3. è°ƒç”¨ `userManage` äº‘å‡½æ•°çš„ `login` action
+4. å­˜å‚¨ç”¨æˆ·ä¿¡æ¯åˆ°æœ¬åœ°å­˜å‚¨
+
+### æ–‡ä»¶ä¸Šä¼ å¤„ç†
+- æ‰€æœ‰ç”¨æˆ·å¤´åƒå’Œé¤å…å›¾ç‰‡éƒ½ä¸Šä¼ åˆ°äº‘å­˜å‚¨
+- ä½¿ç”¨ `wx.cloud.uploadFile` ä¸Šä¼ æ–‡ä»¶
+- æ•°æ®åº“ä¸­å­˜å‚¨çš„æ˜¯äº‘å­˜å‚¨çš„ fileID
+
+### API è°ƒç”¨è§„èŒƒ
+- æ‰€æœ‰ API è°ƒç”¨ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œä¸ä½¿ç”¨ç»å¯¹åœ°å€
+- äº‘å‡½æ•°è°ƒç”¨ä½¿ç”¨ `wx.cloud.callFunction`
+- å¼‚æ­¥æ“ä½œéƒ½éœ€è¦æ­£ç¡®çš„é”™è¯¯å¤„ç†
+
+## æ³¨æ„äº‹é¡¹
+
+1. **ä¸è¦ä½¿ç”¨å·²åºŸå¼ƒçš„API**
+   - é¿å…ä½¿ç”¨ `wx.getUserInfo`ï¼ˆå·²åºŸå¼ƒï¼‰
+   - ä½¿ç”¨ `wx.getUserProfile` æ›¿ä»£
+
+2. **åˆ†äº«åŠŸèƒ½å®ç°**
+   - ä½¿ç”¨ `onShareAppMessage` çš„ promise å±æ€§å¤„ç†å¼‚æ­¥é€»è¾‘
+   - æœ‹å‹åœˆåˆ†äº«ä½¿ç”¨ `onShareTimeline`
+
+3. **éŸ³é¢‘åŠŸèƒ½**
+   - éœ€è¦ç”¨æˆ·æˆæƒå½•éŸ³æƒé™
+   - ä½¿ç”¨ `wx.getRecorderManager()` ç®¡ç†å½•éŸ³
+
+4. **å›¾ç‰‡ä¼˜åŒ–**
+   - æ‰€æœ‰å›¾ç‰‡ä½¿ç”¨ `lazy-load` å±æ€§
+   - å¤§å›¾ç‰‡ä¸Šä¼ å‰éœ€è¦å‹ç¼©
+
+5. **é”™è¯¯å¤„ç†**
+   - æ‰€æœ‰å¼‚æ­¥æ“ä½œéƒ½éœ€è¦ try-catch æˆ– .catch
+   - ä¸ºç”¨æˆ·æä¾›å‹å¥½çš„é”™è¯¯æç¤º
+
+6. **æ•°æ®ä¸€è‡´æ€§**
+   - æ–°å»ºçš„æ¡ç›®åˆå§‹æŠ•ç¥¨æ•°ä¸º0ä¹Ÿè¦æ˜¾ç¤º
+   - é¿å…æ˜¾ç¤ºé»˜è®¤æµ‹è¯•æ•°æ®ï¼ˆå¦‚"å¼ ä¸‰"ï¼‰
+
+## å¼€å‘è§„èŒƒ
+
+1. **ä»£ç é£æ ¼**
+   - ä½¿ç”¨2ç©ºæ ¼ç¼©è¿›
+   - å¼‚æ­¥å‡½æ•°ä½¿ç”¨ async/await
+   - é€‚å½“æ·»åŠ æ³¨é‡Šè¯´æ˜å¤æ‚é€»è¾‘
+
+2. **æµ‹è¯•è¦ç‚¹**
+   - æµ‹è¯•æ–°ç”¨æˆ·æ³¨å†Œæµç¨‹
+   - æµ‹è¯•æŠ•ç¥¨åŠŸèƒ½é™åˆ¶
+   - æµ‹è¯•å†…å®¹å®¡æ ¸åŠŸèƒ½
+   - æµ‹è¯•åˆ†äº«å¥–åŠ±æœºåˆ¶
+
+3. **æ€§èƒ½ä¼˜åŒ–**
+   - ä½¿ç”¨åˆ†é¡µåŠ è½½å¤§é‡æ•°æ®
+   - å›¾ç‰‡ä½¿ç”¨æ‡’åŠ è½½
+   - å‡å°‘ä¸å¿…è¦çš„äº‘å‡½æ•°è°ƒç”¨
\ No newline at end of file
diff --git a/GUARDIAN_REPORT.md b/GUARDIAN_REPORT.md
index a9a503c..540fb85 100644
--- a/GUARDIAN_REPORT.md
+++ b/GUARDIAN_REPORT.md
@@ -1,70 +1,70 @@
-# å¾®ä¿¡å°ç¨‹åºé¡¹ç›®è¯Šæ–­æŠ¥å‘Š
-
-**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025-08-15
-**æœ€åæ›´æ–°æ—¶é—´**: 2025-08-16
-
-## ä¿®å¤æ€»ç»“
-
-æ‰€æœ‰å·²è¯†åˆ«çš„é—®é¢˜å·²ç»æŒ‰ç…§ä¼˜å…ˆçº§è¿›è¡Œäº†ä¿®å¤ã€‚ä¸»è¦ä¿®å¤å†…å®¹åŒ…æ‹¬ï¼š
-
-1. **è‡´å‘½é”™è¯¯**ï¼š
-   - å·²åºŸå¼ƒAPIçš„æ›¿æ¢
-   - å¼‚æ­¥APIç¼ºå°‘å¼‚å¸¸å¤„ç†çš„è¡¥å……
-   - æ•°æ®ä¸€è‡´æ€§é—®é¢˜çš„ä¿®å¤
-   - **é¦–æ¬¡åŠ è½½é—®é¢˜ä¿®å¤**ï¼šè§£å†³äº†é¦–æ¬¡è¿›å…¥å°ç¨‹åºåªæ˜¾ç¤ºå¼ ä¸‰é»˜è®¤æ•°æ®çš„é—®é¢˜
-   - **ç”¨æˆ·ä¸­å¿ƒç™»å½•é—®é¢˜ä¿®å¤**ï¼šç¡®ä¿ç”¨æˆ·ä¸­å¿ƒé»˜è®¤æ˜¾ç¤ºæœªç™»å½•çŠ¶æ€ï¼Œç‚¹å‡»åè°ƒç”¨å¾®ä¿¡ç™»å½•API
-
-2. **åŠŸèƒ½ç¼ºé™·**ï¼š
-   - æˆæƒé€»è¾‘è§„èŒƒåŒ–
-   - åˆ†äº«APIå®ç°ä¼˜åŒ–
-   - è¡¨å•éªŒè¯é€»è¾‘å®Œå–„
-
-3. **æ€§èƒ½ä¼˜åŒ–**ï¼š
-   - å›¾ç‰‡èµ„æºæ·»åŠ lazy-loadå±æ€§
-   - ä¼˜åŒ–æ•°æ®åŠ è½½é€»è¾‘
-
-4. **ä½“éªŒé—®é¢˜**ï¼š
-   - æ·»åŠ åŠ è½½çŠ¶æ€æç¤º
-   - å®Œå–„é”™è¯¯å¤„ç†å’Œæç¤º
-
-5. **ä»£ç è§„èŒƒ**ï¼š
-   - æ³¨é‡Šä¼˜åŒ–
-   - å‘½åè§„èŒƒåŒ–
-
-è¯¦ç»†ä¿®å¤å†…å®¹è¯·å‚è€ƒé¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ CHANGELOG.md æ–‡ä»¶ã€‚
-
-## æ¦‚è¿°
-
-æœ¬æŠ¥å‘Šæ˜¯å¯¹"ä¼¦æ•¦å¿…åƒæ¦œ"å¾®ä¿¡å°ç¨‹åºé¡¹ç›®çš„å…¨é¢è¯Šæ–­ç»“æœã€‚é€šè¿‡é™æ€ä»£ç åˆ†æå’Œé€»è¾‘å®¡æŸ¥ï¼Œè¯†åˆ«å‡ºé¡¹ç›®ä¸­å­˜åœ¨çš„å„ç±»é—®é¢˜ï¼Œå¹¶æŒ‰ä¸¥é‡ç¨‹åº¦åˆ†ç±»ã€‚
-
-## é—®é¢˜åˆ†ç±»ä¸ç»Ÿè®¡
-
-| é—®é¢˜ç­‰çº§ | é—®é¢˜æ•°é‡ |
-|---------|---------|
-| è‡´å‘½é”™è¯¯ | 5 |
-| åŠŸèƒ½ç¼ºé™· | 7 |
-| æ€§èƒ½éšæ‚£ | 5 |
-| ä½“éªŒé—®é¢˜ | 8 |
-| ä»£ç è§„èŒƒ | 12 |
-
-## è‡´å‘½é”™è¯¯
-
-1. **å·²åºŸå¼ƒAPIä½¿ç”¨**:
-   - `app.js`: ä½¿ç”¨äº†è¢«å¼ƒç”¨çš„ `wx.getSystemInfoSync()` APIï¼Œè™½ç„¶æœ‰ monkey patch ä½†å®ç°ä¸å®Œæ•´
-   - `pages/detail/detail.js`: ä½¿ç”¨äº†å¯èƒ½è¢«å¼ƒç”¨çš„éŸ³é¢‘APIè°ƒç”¨æ–¹å¼
-
-2. **å¼‚æ­¥APIç¼ºå°‘å¼‚å¸¸å¤„ç†**:
-   - `pages/create/create.js`: å¤šå¤„äº‘å‡½æ•°è°ƒç”¨ç¼ºå°‘ `.catch()` å¼‚å¸¸å¤„ç†
-   - `pages/detail/detail.js`: éŸ³é¢‘ç›¸å…³APIè°ƒç”¨ç¼ºå°‘å®Œæ•´çš„å¼‚å¸¸å¤„ç†é€»è¾‘
-
-3. **æœªå®šä¹‰å˜é‡/å‡½æ•°è°ƒç”¨**:
-   - `app.js`: å¯èƒ½å­˜åœ¨å¯¹ `cloudUtils.getSystemInfo()` çš„è°ƒç”¨ï¼Œä½†æœªç¡®è®¤è¯¥å‡½æ•°æ˜¯å¦å­˜åœ¨
-   - `pages/index/index.js`: å¯¹ `app.checkUserLogin()` çš„è°ƒç”¨å¯èƒ½å­˜åœ¨é—®é¢˜
-
-4. **æ•°æ®åˆå§‹åŒ–é—®é¢˜**:
-   - `app.js`: å…¨å±€æ•°æ®ä¸­é»˜è®¤åŒ…å«å¼ ä¸‰çš„ç¤ºä¾‹æ•°æ®ï¼Œå¯¼è‡´é¦–æ¬¡åŠ è½½æ—¶åªæ˜¾ç¤ºå¼ ä¸‰
-   - `pages/index/index.js`: é¦–æ¬¡åŠ è½½ä½¿ç”¨å…¨å±€æ•°æ®è€Œéå¼ºåˆ¶åˆ·æ–°ï¼Œå¯¼è‡´ç”¨æˆ·çœ‹åˆ°ä¸å®Œæ•´çš„æ•°æ®
-
-5. **ç”¨æˆ·ç™»å½•é€»è¾‘é—®é¢˜**:
-   - `pages/index/index.js`: ç”¨æˆ·ä¸­å¿ƒé»˜è®¤è‡ªåŠ¨ä»æœ¬åœ°å­˜å‚¨åŠ è½½ç”¨æˆ·ä¿¡æ¯ï¼Œè€Œä¸æ˜¯æ˜¾ç¤ºæœªç™»å½•çŠ¶æ€
+# å¾®ä¿¡å°ç¨‹åºé¡¹ç›®è¯Šæ–­æŠ¥å‘Š
+
+**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025-08-15
+**æœ€åæ›´æ–°æ—¶é—´**: 2025-08-16
+
+## ä¿®å¤æ€»ç»“
+
+æ‰€æœ‰å·²è¯†åˆ«çš„é—®é¢˜å·²ç»æŒ‰ç…§ä¼˜å…ˆçº§è¿›è¡Œäº†ä¿®å¤ã€‚ä¸»è¦ä¿®å¤å†…å®¹åŒ…æ‹¬ï¼š
+
+1. **è‡´å‘½é”™è¯¯**ï¼š
+   - å·²åºŸå¼ƒAPIçš„æ›¿æ¢
+   - å¼‚æ­¥APIç¼ºå°‘å¼‚å¸¸å¤„ç†çš„è¡¥å……
+   - æ•°æ®ä¸€è‡´æ€§é—®é¢˜çš„ä¿®å¤
+   - **é¦–æ¬¡åŠ è½½é—®é¢˜ä¿®å¤**ï¼šè§£å†³äº†é¦–æ¬¡è¿›å…¥å°ç¨‹åºåªæ˜¾ç¤ºå¼ ä¸‰é»˜è®¤æ•°æ®çš„é—®é¢˜
+   - **ç”¨æˆ·ä¸­å¿ƒç™»å½•é—®é¢˜ä¿®å¤**ï¼šç¡®ä¿ç”¨æˆ·ä¸­å¿ƒé»˜è®¤æ˜¾ç¤ºæœªç™»å½•çŠ¶æ€ï¼Œç‚¹å‡»åè°ƒç”¨å¾®ä¿¡ç™»å½•API
+
+2. **åŠŸèƒ½ç¼ºé™·**ï¼š
+   - æˆæƒé€»è¾‘è§„èŒƒåŒ–
+   - åˆ†äº«APIå®ç°ä¼˜åŒ–
+   - è¡¨å•éªŒè¯é€»è¾‘å®Œå–„
+
+3. **æ€§èƒ½ä¼˜åŒ–**ï¼š
+   - å›¾ç‰‡èµ„æºæ·»åŠ lazy-loadå±æ€§
+   - ä¼˜åŒ–æ•°æ®åŠ è½½é€»è¾‘
+
+4. **ä½“éªŒé—®é¢˜**ï¼š
+   - æ·»åŠ åŠ è½½çŠ¶æ€æç¤º
+   - å®Œå–„é”™è¯¯å¤„ç†å’Œæç¤º
+
+5. **ä»£ç è§„èŒƒ**ï¼š
+   - æ³¨é‡Šä¼˜åŒ–
+   - å‘½åè§„èŒƒåŒ–
+
+è¯¦ç»†ä¿®å¤å†…å®¹è¯·å‚è€ƒé¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ CHANGELOG.md æ–‡ä»¶ã€‚
+
+## æ¦‚è¿°
+
+æœ¬æŠ¥å‘Šæ˜¯å¯¹"ä¼¦æ•¦å¿…åƒæ¦œ"å¾®ä¿¡å°ç¨‹åºé¡¹ç›®çš„å…¨é¢è¯Šæ–­ç»“æœã€‚é€šè¿‡é™æ€ä»£ç åˆ†æå’Œé€»è¾‘å®¡æŸ¥ï¼Œè¯†åˆ«å‡ºé¡¹ç›®ä¸­å­˜åœ¨çš„å„ç±»é—®é¢˜ï¼Œå¹¶æŒ‰ä¸¥é‡ç¨‹åº¦åˆ†ç±»ã€‚
+
+## é—®é¢˜åˆ†ç±»ä¸ç»Ÿè®¡
+
+| é—®é¢˜ç­‰çº§ | é—®é¢˜æ•°é‡ |
+|---------|---------|
+| è‡´å‘½é”™è¯¯ | 5 |
+| åŠŸèƒ½ç¼ºé™· | 7 |
+| æ€§èƒ½éšæ‚£ | 5 |
+| ä½“éªŒé—®é¢˜ | 8 |
+| ä»£ç è§„èŒƒ | 12 |
+
+## è‡´å‘½é”™è¯¯
+
+1. **å·²åºŸå¼ƒAPIä½¿ç”¨**:
+   - `app.js`: ä½¿ç”¨äº†è¢«å¼ƒç”¨çš„ `wx.getSystemInfoSync()` APIï¼Œè™½ç„¶æœ‰ monkey patch ä½†å®ç°ä¸å®Œæ•´
+   - `pages/detail/detail.js`: ä½¿ç”¨äº†å¯èƒ½è¢«å¼ƒç”¨çš„éŸ³é¢‘APIè°ƒç”¨æ–¹å¼
+
+2. **å¼‚æ­¥APIç¼ºå°‘å¼‚å¸¸å¤„ç†**:
+   - `pages/create/create.js`: å¤šå¤„äº‘å‡½æ•°è°ƒç”¨ç¼ºå°‘ `.catch()` å¼‚å¸¸å¤„ç†
+   - `pages/detail/detail.js`: éŸ³é¢‘ç›¸å…³APIè°ƒç”¨ç¼ºå°‘å®Œæ•´çš„å¼‚å¸¸å¤„ç†é€»è¾‘
+
+3. **æœªå®šä¹‰å˜é‡/å‡½æ•°è°ƒç”¨**:
+   - `app.js`: å¯èƒ½å­˜åœ¨å¯¹ `cloudUtils.getSystemInfo()` çš„è°ƒç”¨ï¼Œä½†æœªç¡®è®¤è¯¥å‡½æ•°æ˜¯å¦å­˜åœ¨
+   - `pages/index/index.js`: å¯¹ `app.checkUserLogin()` çš„è°ƒç”¨å¯èƒ½å­˜åœ¨é—®é¢˜
+
+4. **æ•°æ®åˆå§‹åŒ–é—®é¢˜**:
+   - `app.js`: å…¨å±€æ•°æ®ä¸­é»˜è®¤åŒ…å«å¼ ä¸‰çš„ç¤ºä¾‹æ•°æ®ï¼Œå¯¼è‡´é¦–æ¬¡åŠ è½½æ—¶åªæ˜¾ç¤ºå¼ ä¸‰
+   - `pages/index/index.js`: é¦–æ¬¡åŠ è½½ä½¿ç”¨å…¨å±€æ•°æ®è€Œéå¼ºåˆ¶åˆ·æ–°ï¼Œå¯¼è‡´ç”¨æˆ·çœ‹åˆ°ä¸å®Œæ•´çš„æ•°æ®
+
+5. **ç”¨æˆ·ç™»å½•é€»è¾‘é—®é¢˜**:
+   - `pages/index/index.js`: ç”¨æˆ·ä¸­å¿ƒé»˜è®¤è‡ªåŠ¨ä»æœ¬åœ°å­˜å‚¨åŠ è½½ç”¨æˆ·ä¿¡æ¯ï¼Œè€Œä¸æ˜¯æ˜¾ç¤ºæœªç™»å½•çŠ¶æ€
    - `components/user-center-drawer/user-center-drawer.wxml`: æœªæä¾›æ˜ç¡®çš„ç™»å½•æŒ‰é’®ï¼Œä¸ç¬¦åˆå¾®ä¿¡å®˜æ–¹ç™»å½•æœ€ä½³å®è·µ 
\ No newline at end of file
diff --git a/QUICK_START.md b/QUICK_START.md
new file mode 100644
index 0000000..074a6f0
--- /dev/null
+++ b/QUICK_START.md
@@ -0,0 +1,93 @@
+# ä¼¦æ•¦å¿…åƒæ¦œ - å¿«é€Ÿå¯åŠ¨æŒ‡å—
+
+## ğŸš€ 5åˆ†é’Ÿå¿«é€Ÿå¯åŠ¨
+
+### 1. å‡†å¤‡å·¥ä½œ
+- å®‰è£…[å¾®ä¿¡å¼€å‘è€…å·¥å…·](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)
+- ç¡®ä¿æœ‰å¾®ä¿¡å¼€å‘è€…è´¦å·
+
+### 2. å¯¼å…¥é¡¹ç›®
+1. æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·
+2. é€‰æ‹©"å¯¼å…¥é¡¹ç›®"
+3. é¡¹ç›®ç›®å½•ï¼šé€‰æ‹© `/Users/jimmu/vdogo.com/ä¼¦æ•¦å¿…åƒæ¦œ`
+4. AppIDï¼š`wx29cb754190a5c042`
+5. é¡¹ç›®åç§°ï¼šä¼¦æ•¦å¿…åƒæ¦œ
+
+### 3. é…ç½®äº‘å¼€å‘ç¯å¢ƒ
+1. ç‚¹å‡»å·¥å…·æ çš„"äº‘å¼€å‘"æŒ‰é’®
+2. å¦‚æœæ²¡æœ‰ç¯å¢ƒï¼Œåˆ›å»ºä¸€ä¸ªæ–°ç¯å¢ƒ
+3. ç¯å¢ƒIDè®¾ç½®ä¸ºï¼š`cloud1-2g2sby6z920b76cb`
+4. æˆ–åœ¨ `app.js` ä¸­ä¿®æ”¹ç¯å¢ƒIDä¸ºæ‚¨çš„ç¯å¢ƒ
+
+### 4. åˆå§‹åŒ–æ•°æ®åº“
+1. åœ¨äº‘å¼€å‘æ§åˆ¶å°åˆ›å»ºä»¥ä¸‹é›†åˆï¼š
+   - `users` - ç”¨æˆ·ä¿¡æ¯
+   - `entries` - é¤å…æ¡ç›®
+   - `votes` - æŠ•ç¥¨è®°å½•
+   - `comments` - è¯„è®ºè®°å½•
+   - `orders` - è®¢å•è®°å½•
+
+2. ä¸Šä¼ äº‘å‡½æ•°ï¼ˆå³é”®ç‚¹å‡»æ¯ä¸ªäº‘å‡½æ•°æ–‡ä»¶å¤¹ -> ä¸Šä¼ å¹¶éƒ¨ç½²ï¼‰ï¼š
+   - `userManage` - ç”¨æˆ·ç®¡ç†
+   - `nominationManage` - æåç®¡ç†
+   - `voteManage` - æŠ•ç¥¨ç®¡ç†
+   - `commentManage` - è¯„è®ºç®¡ç†
+   - `contentReview` - å†…å®¹å®¡æ ¸
+   - `statistics` - ç»Ÿè®¡åŠŸèƒ½
+   - `dbInit` - æ•°æ®åº“åˆå§‹åŒ–
+
+### 5. å¿«é€Ÿæµ‹è¯•
+1. ç‚¹å‡»"ç¼–è¯‘"æŒ‰é’®
+2. åœ¨æ¨¡æ‹Ÿå™¨ä¸­æŸ¥çœ‹æ•ˆæœ
+3. æ‰«ç åœ¨æ‰‹æœºä¸Šé¢„è§ˆ
+
+## ğŸ”§ å·²ä¿®å¤çš„ä¸»è¦é—®é¢˜
+
+### âœ… ç™»å½•é€»è¾‘ä¼˜åŒ–
+- ä¿®å¤äº†è‡ªåŠ¨ç™»å½•é—®é¢˜
+- ä¼˜åŒ–äº†ç”¨æˆ·ä¿¡æ¯å­˜å‚¨
+- æ”¹è¿›äº†æˆæƒæµç¨‹
+
+### âœ… æ•°æ®åŠ è½½æ”¹è¿›
+- ä¿®å¤äº†ç©ºæ•°æ®æ˜¾ç¤ºé—®é¢˜
+- ä¼˜åŒ–äº†æ•°æ®åˆ·æ–°é€»è¾‘
+- æ”¹è¿›äº†é”™è¯¯å¤„ç†
+
+### âœ… æ€§èƒ½ä¼˜åŒ–
+- å¢åŠ äº†å›¾ç‰‡æ‡’åŠ è½½
+- ä¼˜åŒ–äº†æ•°æ®æŸ¥è¯¢é™åˆ¶
+- æ”¹è¿›äº†åŠ è½½æç¤º
+
+## ğŸ“± æ ¸å¿ƒåŠŸèƒ½
+
+1. **æ’è¡Œæ¦œå±•ç¤º** - æŸ¥çœ‹é¤å…æŠ•ç¥¨æ’å
+2. **æŠ•ç¥¨åŠŸèƒ½** - ä¸ºå–œæ¬¢çš„é¤å…æŠ•ç¥¨
+3. **æåé¤å…** - æ·»åŠ æ–°çš„é¤å…
+4. **è¯„è®ºåŠŸèƒ½** - å¯¹é¤å…è¿›è¡Œè¯„è®º
+5. **åˆ†äº«åŠŸèƒ½** - åˆ†äº«ç»™å¥½å‹å’Œæœ‹å‹åœˆ
+
+## ğŸ›  å¼€å‘è°ƒè¯•
+
+### æŸ¥çœ‹æ—¥å¿—
+- åœ¨å¼€å‘è€…å·¥å…·çš„"è°ƒè¯•å™¨"ä¸­æŸ¥çœ‹ Console è¾“å‡º
+- äº‘å‡½æ•°æ—¥å¿—åœ¨"äº‘å¼€å‘æ§åˆ¶å°" -> "äº‘å‡½æ•°" -> "æ—¥å¿—"
+
+### å¸¸è§é—®é¢˜
+
+**Q: æç¤º"äº‘å¼€å‘æœªåˆå§‹åŒ–"**
+A: æ£€æŸ¥ç¯å¢ƒIDæ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿å·²å¼€é€šäº‘å¼€å‘
+
+**Q: æ•°æ®åŠ è½½å¤±è´¥**
+A: æ£€æŸ¥äº‘å‡½æ•°æ˜¯å¦å·²éƒ¨ç½²ï¼Œæ•°æ®åº“é›†åˆæ˜¯å¦å·²åˆ›å»º
+
+**Q: ç™»å½•å¤±è´¥**
+A: ç¡®ä¿ `userManage` äº‘å‡½æ•°å·²æ­£ç¡®éƒ¨ç½²
+
+## ğŸ“ æŠ€æœ¯æ”¯æŒ
+
+å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
+1. æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
+2. äº‘å‡½æ•°æ—¥å¿—
+3. ç½‘ç»œè¯·æ±‚çŠ¶æ€
+
+é¡¹ç›®å·²ç»è¿‡ä¼˜åŒ–ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œï¼
\ No newline at end of file
diff --git a/app.js b/app.js
index db0ae46..e58c90f 100644
--- a/app.js
+++ b/app.js
@@ -170,7 +170,7 @@ App({
         const db = wx.cloud.database();
         db.collection('entries')
           .orderBy('votes', 'desc')
-          .limit(20) // å¢åŠ é™åˆ¶æ•°é‡ï¼Œç¡®ä¿èƒ½çœ‹åˆ°æ›´å¤šæå
+          .limit(50) // å¢åŠ é™åˆ¶æ•°é‡ï¼Œç¡®ä¿èƒ½çœ‹åˆ°æ›´å¤šæå
           .get()
           .then(res => {
             console.log('è·å–æ’è¡Œæ¦œæ•°æ®æˆåŠŸ:', res);
@@ -192,6 +192,9 @@ App({
               
               // æ›´æ–°å…¨å±€æ•°æ®
               this.globalData.rankings = rankings;
+            } else {
+              // å¦‚æœæ²¡æœ‰æ•°æ®ï¼Œä¿æŒç©ºæ•°ç»„
+              this.globalData.rankings = [];
             }
             
             resolve(this.globalData.rankings);
@@ -203,7 +206,9 @@ App({
               title: 'è·å–æ•°æ®å¤±è´¥ï¼Œè¯·é‡è¯•',
               icon: 'none'
             });
-            reject(err);
+            // è¿”å›ç©ºæ•°ç»„è€Œä¸æ˜¯æ‹’ç»
+            this.globalData.rankings = [];
+            resolve(this.globalData.rankings);
           });
       } else {
         console.error('äº‘å¼€å‘æœªåˆå§‹åŒ–');
@@ -211,7 +216,9 @@ App({
           title: 'ç³»ç»Ÿåˆå§‹åŒ–å¤±è´¥',
           icon: 'none'
         });
-        reject(new Error('äº‘å¼€å‘æœªåˆå§‹åŒ–'));
+        // è¿”å›ç©ºæ•°ç»„è€Œä¸æ˜¯æ‹’ç»
+        this.globalData.rankings = [];
+        resolve(this.globalData.rankings);
       }
     });
   },
diff --git a/cloudfunctions/commentManage/index.js b/cloudfunctions/commentManage/index.js
index 2ec7eda..c7d1b49 100644
--- a/cloudfunctions/commentManage/index.js
+++ b/cloudfunctions/commentManage/index.js
@@ -1,3 +1,4 @@
+<<<<<<< Updated upstream
 const cloud = require('wx-server-sdk');
 cloud.init({ env: cloud.DYNAMIC_CURRENT_ENV });
 const db = cloud.database();
@@ -452,4 +453,460 @@ async function createReplyNotification(nominationId, replyerId, receiverId, comm
     console.error('åˆ›å»ºå›å¤é€šçŸ¥å¤±è´¥:', error);
     // é€šçŸ¥å¤±è´¥ä¸å½±å“ä¸»æµç¨‹ï¼Œç»§ç»­æ‰§è¡Œ
   }
+=======
+const cloud = require('wx-server-sdk');
+cloud.init({ env: cloud.DYNAMIC_CURRENT_ENV });
+const db = cloud.database();
+const _ = db.command;
+
+// ä¸»å‡½æ•°å…¥å£
+exports.main = async (event, context) => {
+  const { action, data } = event;
+  const wxContext = cloud.getWXContext();
+  const userId = wxContext.OPENID;
+
+  try {
+    switch (action) {
+      case 'add': 
+        return await addComment(data, userId);
+      case 'reply':
+        return await replyComment(data, userId);
+      case 'list':
+        return await listComments(data);
+      case 'listReplies':
+        return await listReplies(data);
+      case 'delete':
+        return await deleteComment(data, userId);
+      case 'like':
+        return await likeComment(data, userId);
+      default:
+        return { success: false, message: 'æœªçŸ¥æ“ä½œ' };
+    }
+  } catch (error) {
+    console.error(`è¯„è®ºç®¡ç†äº‘å‡½æ•°é”™è¯¯: ${error.message}`, error);
+    return { success: false, message: 'æ“ä½œå¤±è´¥', error: error.message };
+  }
+};
+
+// æ·»åŠ è¯„è®º
+async function addComment(data, userId) {
+  // å‚æ•°éªŒè¯
+  if (!data.nominationId || !data.content) {
+    return { success: false, message: 'å‚æ•°ä¸å®Œæ•´' };
+  }
+  
+  // è·å–ç”¨æˆ·ä¿¡æ¯
+  let userInfo;
+  try {
+    const userResult = await db.collection('users').where({
+      _openid: userId
+    }).get();
+    
+    if (userResult.data.length > 0) {
+      userInfo = userResult.data[0];
+    } else {
+      // å¦‚æœç”¨æˆ·ä¸å­˜åœ¨ï¼Œä½¿ç”¨é»˜è®¤å€¼
+      userInfo = {
+        name: 'ç”¨æˆ·',
+        avatar: '/public/placeholder-user.jpg'
+      };
+    }
+  } catch (error) {
+    console.error('è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:', error);
+    // ä½¿ç”¨é»˜è®¤å€¼ç»§ç»­
+    userInfo = {
+      name: 'ç”¨æˆ·',
+      avatar: '/public/placeholder-user.jpg'
+    };
+  }
+  
+  // åˆ›å»ºè¯„è®º
+  const commentData = {
+    nominationId: data.nominationId,
+    content: data.content,
+    creatorId: userId,
+    creatorName: userInfo.name || 'ç”¨æˆ·',
+    creatorAvatar: userInfo.avatar || '/public/placeholder-user.jpg',
+    parentId: null,
+    rootId: null,
+    replyTo: { userId: null, userName: null },
+    createTime: db.serverDate(),
+    updateTime: db.serverDate(),
+    likes: 0,
+    status: 0  // 0-æ­£å¸¸ï¼Œ1-åˆ é™¤
+  };
+  
+  try {
+    // æ·»åŠ è¯„è®º
+    const result = await db.collection('comments').add({
+      data: commentData
+    });
+    
+    // æ›´æ–°æåè¯„è®ºæ•°
+    await db.collection('nominations').doc(data.nominationId).update({
+      data: {
+        commentCount: _.inc(1),
+        updateTime: db.serverDate()
+      }
+    });
+    
+    // åˆ›å»ºæ¶ˆæ¯é€šçŸ¥
+    await createCommentNotification(data.nominationId, userId);
+    
+    return { success: true, commentId: result._id };
+  } catch (error) {
+    console.error('æ·»åŠ è¯„è®ºå¤±è´¥:', error);
+    return { success: false, message: 'æ·»åŠ è¯„è®ºå¤±è´¥', error: error.message };
+  }
+}
+
+// å›å¤è¯„è®º
+async function replyComment(data, userId) {
+  // å‚æ•°éªŒè¯
+  if (!data.nominationId || !data.content || !data.parentId) {
+    return { success: false, message: 'å‚æ•°ä¸å®Œæ•´' };
+  }
+  
+  try {
+    // è·å–ç”¨æˆ·ä¿¡æ¯å’Œçˆ¶è¯„è®ºä¿¡æ¯
+    const [userResult, parentComment] = await Promise.all([
+      db.collection('users').where({ _openid: userId }).get(),
+      db.collection('comments').doc(data.parentId).get()
+    ]);
+    
+    const userInfo = userResult.data.length > 0 ? userResult.data[0] : {
+      name: 'ç”¨æˆ·',
+      avatar: '/public/placeholder-user.jpg'
+    };
+    
+    // ç¡®å®šæ ¹è¯„è®ºID
+    const rootId = parentComment.data.rootId || parentComment.data._id;
+    
+    // åˆ›å»ºå›å¤è¯„è®º
+    const commentData = {
+      nominationId: data.nominationId,
+      content: data.content,
+      creatorId: userId,
+      creatorName: userInfo.name || 'ç”¨æˆ·',
+      creatorAvatar: userInfo.avatar || '/public/placeholder-user.jpg',
+      parentId: data.parentId,
+      rootId: rootId,
+      replyTo: {
+        userId: parentComment.data.creatorId,
+        userName: parentComment.data.creatorName
+      },
+      createTime: db.serverDate(),
+      updateTime: db.serverDate(),
+      likes: 0,
+      status: 0
+    };
+    
+    // æ·»åŠ è¯„è®º
+    const result = await db.collection('comments').add({
+      data: commentData
+    });
+    
+    // æ›´æ–°æåè¯„è®ºæ•°
+    await db.collection('nominations').doc(data.nominationId).update({
+      data: {
+        commentCount: _.inc(1),
+        updateTime: db.serverDate()
+      }
+    });
+    
+    // åˆ›å»ºå›å¤é€šçŸ¥
+    await createReplyNotification(
+      data.nominationId,
+      userId,
+      parentComment.data.creatorId,
+      data.parentId
+    );
+    
+    return { success: true, commentId: result._id };
+  } catch (error) {
+    console.error('å›å¤è¯„è®ºå¤±è´¥:', error);
+    return { success: false, message: 'å›å¤è¯„è®ºå¤±è´¥', error: error.message };
+  }
+}
+
+// è·å–è¯„è®ºåˆ—è¡¨
+async function listComments(data) {
+  // å‚æ•°éªŒè¯
+  if (!data.nominationId) {
+    return { success: false, message: 'å‚æ•°ä¸å®Œæ•´' };
+  }
+  
+  const { nominationId, page = 1, pageSize = 10 } = data;
+  const skip = (page - 1) * pageSize;
+  
+  try {
+    // è·å–æ€»æ•°
+    const countResult = await db.collection('comments')
+      .where({
+        nominationId,
+        parentId: null,  // åªè·å–é¡¶çº§è¯„è®º
+        status: 0  // æ­£å¸¸çŠ¶æ€
+      })
+      .count();
+    
+    // è·å–é¡¶çº§è¯„è®º
+    const commentsResult = await db.collection('comments')
+      .where({
+        nominationId,
+        parentId: null,
+        status: 0
+      })
+      .orderBy('createTime', 'desc')
+      .skip(skip)
+      .limit(pageSize)
+      .get();
+    
+    // è·å–æ¯ä¸ªé¡¶çº§è¯„è®ºçš„éƒ¨åˆ†å›å¤
+    const topComments = commentsResult.data;
+    for (const comment of topComments) {
+      // è·å–æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å‰3æ¡å›å¤
+      const repliesResult = await db.collection('comments')
+        .where({
+          rootId: comment._id,
+          status: 0
+        })
+        .orderBy('createTime', 'asc')
+        .limit(3)
+        .get();
+      
+      comment.replies = repliesResult.data;
+      
+      // è·å–å›å¤æ€»æ•°
+      const replyCountResult = await db.collection('comments')
+        .where({
+          rootId: comment._id,
+          status: 0
+        })
+        .count();
+      
+      comment.replyCount = replyCountResult.total;
+    }
+    
+    return {
+      success: true,
+      comments: topComments,
+      total: countResult.total,
+      page,
+      pageSize
+    };
+  } catch (error) {
+    console.error('è·å–è¯„è®ºåˆ—è¡¨å¤±è´¥:', error);
+    return { success: false, message: 'è·å–è¯„è®ºåˆ—è¡¨å¤±è´¥', error: error.message };
+  }
+}
+
+// è·å–å›å¤åˆ—è¡¨
+async function listReplies(data) {
+  // å‚æ•°éªŒè¯
+  if (!data.rootId) {
+    return { success: false, message: 'å‚æ•°ä¸å®Œæ•´' };
+  }
+  
+  const { rootId, page = 1, pageSize = 10 } = data;
+  const skip = (page - 1) * pageSize;
+  
+  try {
+    // è·å–æ€»æ•°
+    const countResult = await db.collection('comments')
+      .where({
+        rootId,
+        status: 0
+      })
+      .count();
+    
+    // è·å–å›å¤
+    const repliesResult = await db.collection('comments')
+      .where({
+        rootId,
+        status: 0
+      })
+      .orderBy('createTime', 'asc')
+      .skip(skip)
+      .limit(pageSize)
+      .get();
+    
+    return {
+      success: true,
+      replies: repliesResult.data,
+      total: countResult.total,
+      page,
+      pageSize
+    };
+  } catch (error) {
+    console.error('è·å–å›å¤åˆ—è¡¨å¤±è´¥:', error);
+    return { success: false, message: 'è·å–å›å¤åˆ—è¡¨å¤±è´¥', error: error.message };
+  }
+}
+
+// åˆ é™¤è¯„è®º
+async function deleteComment(data, userId) {
+  // å‚æ•°éªŒè¯
+  if (!data.commentId) {
+    return { success: false, message: 'å‚æ•°ä¸å®Œæ•´' };
+  }
+  
+  try {
+    // è·å–è¯„è®ºä¿¡æ¯
+    const commentResult = await db.collection('comments').doc(data.commentId).get();
+    const comment = commentResult.data;
+    
+    // æ£€æŸ¥æƒé™ï¼ˆåªæœ‰è¯„è®ºåˆ›å»ºè€…å¯ä»¥åˆ é™¤ï¼‰
+    if (comment.creatorId !== userId) {
+      return { success: false, message: 'æ²¡æœ‰æƒé™åˆ é™¤æ­¤è¯„è®º' };
+    }
+    
+    // è½¯åˆ é™¤è¯„è®º
+    await db.collection('comments').doc(data.commentId).update({
+      data: {
+        status: 1,  // 1-åˆ é™¤
+        updateTime: db.serverDate()
+      }
+    });
+    
+    // å¦‚æœæ˜¯é¡¶çº§è¯„è®ºï¼Œæ›´æ–°æåè¯„è®ºæ•°
+    if (!comment.parentId) {
+      await db.collection('nominations').doc(comment.nominationId).update({
+        data: {
+          commentCount: _.inc(-1),
+          updateTime: db.serverDate()
+        }
+      });
+    }
+    
+    return { success: true };
+  } catch (error) {
+    console.error('åˆ é™¤è¯„è®ºå¤±è´¥:', error);
+    return { success: false, message: 'åˆ é™¤è¯„è®ºå¤±è´¥', error: error.message };
+  }
+}
+
+// ç‚¹èµè¯„è®º
+async function likeComment(data, userId) {
+  // å‚æ•°éªŒè¯
+  if (!data.commentId) {
+    return { success: false, message: 'å‚æ•°ä¸å®Œæ•´' };
+  }
+  
+  try {
+    // æ£€æŸ¥æ˜¯å¦å·²ç‚¹èµ
+    const likeRecord = await db.collection('comment_likes')
+      .where({
+        commentId: data.commentId,
+        userId
+      })
+      .get();
+    
+    if (likeRecord.data.length > 0) {
+      return { success: false, message: 'å·²ç»ç‚¹è¿‡èµäº†' };
+    }
+    
+    // æ·»åŠ ç‚¹èµè®°å½•
+    await db.collection('comment_likes').add({
+      data: {
+        commentId: data.commentId,
+        userId,
+        createTime: db.serverDate()
+      }
+    });
+    
+    // æ›´æ–°è¯„è®ºç‚¹èµæ•°
+    await db.collection('comments').doc(data.commentId).update({
+      data: {
+        likes: _.inc(1),
+        updateTime: db.serverDate()
+      }
+    });
+    
+    return { success: true };
+  } catch (error) {
+    console.error('ç‚¹èµè¯„è®ºå¤±è´¥:', error);
+    return { success: false, message: 'ç‚¹èµè¯„è®ºå¤±è´¥', error: error.message };
+  }
+}
+
+// åˆ›å»ºè¯„è®ºé€šçŸ¥
+async function createCommentNotification(nominationId, commenterId) {
+  try {
+    // è·å–æåä¿¡æ¯å’Œè¯„è®ºè€…ä¿¡æ¯
+    const [nominationResult, commenterResult] = await Promise.all([
+      db.collection('nominations').doc(nominationId).get(),
+      db.collection('users').where({ _openid: commenterId }).get()
+    ]);
+    
+    const nomination = nominationResult.data;
+    const commenter = commenterResult.data.length > 0 ? commenterResult.data[0] : {
+      name: 'ç”¨æˆ·',
+      avatar: '/public/placeholder-user.jpg'
+    };
+    
+    // å¦‚æœè¯„è®ºè€…ä¸æ˜¯æåè€…ï¼Œåˆ™å‘é€é€šçŸ¥
+    if (nomination.creatorId !== commenterId) {
+      await cloud.callFunction({
+        name: 'messageManage',
+        data: {
+          action: 'create',
+          data: {
+            receiverId: nomination.creatorId,
+            senderId: commenterId,
+            senderName: commenter.name || 'ç”¨æˆ·',
+            senderAvatar: commenter.avatar || '/public/placeholder-user.jpg',
+            type: 'comment',
+            content: `${commenter.name || 'ç”¨æˆ·'} è¯„è®ºäº†ä½ çš„æå`,
+            nominationId: nominationId,
+            nominationTitle: nomination.title || 'æå'
+          }
+        }
+      });
+    }
+  } catch (error) {
+    console.error('åˆ›å»ºè¯„è®ºé€šçŸ¥å¤±è´¥:', error);
+    // é€šçŸ¥å¤±è´¥ä¸å½±å“ä¸»æµç¨‹ï¼Œç»§ç»­æ‰§è¡Œ
+  }
+}
+
+// åˆ›å»ºå›å¤é€šçŸ¥
+async function createReplyNotification(nominationId, replyerId, receiverId, commentId) {
+  try {
+    // è·å–æåä¿¡æ¯å’Œå›å¤è€…ä¿¡æ¯
+    const [nominationResult, replierResult] = await Promise.all([
+      db.collection('nominations').doc(nominationId).get(),
+      db.collection('users').where({ _openid: replyerId }).get()
+    ]);
+    
+    const nomination = nominationResult.data;
+    const replier = replierResult.data.length > 0 ? replierResult.data[0] : {
+      name: 'ç”¨æˆ·',
+      avatar: '/public/placeholder-user.jpg'
+    };
+    
+    // å¦‚æœå›å¤è€…ä¸æ˜¯è¢«å›å¤è€…ï¼Œåˆ™å‘é€é€šçŸ¥
+    if (receiverId !== replyerId) {
+      await cloud.callFunction({
+        name: 'messageManage',
+        data: {
+          action: 'create',
+          data: {
+            receiverId: receiverId,
+            senderId: replyerId,
+            senderName: replier.name || 'ç”¨æˆ·',
+            senderAvatar: replier.avatar || '/public/placeholder-user.jpg',
+            type: 'reply',
+            content: `${replier.name || 'ç”¨æˆ·'} å›å¤äº†ä½ çš„è¯„è®º`,
+            relatedId: commentId,
+            nominationId: nominationId,
+            nominationTitle: nomination.title || 'æå'
+          }
+        }
+      });
+    }
+  } catch (error) {
+    console.error('åˆ›å»ºå›å¤é€šçŸ¥å¤±è´¥:', error);
+    // é€šçŸ¥å¤±è´¥ä¸å½±å“ä¸»æµç¨‹ï¼Œç»§ç»­æ‰§è¡Œ
+  }
+>>>>>>> Stashed changes
 } 
\ No newline at end of file
diff --git a/cloudfunctions/commentManage/package.json b/cloudfunctions/commentManage/package.json
index f297b81..8909901 100644
--- a/cloudfunctions/commentManage/package.json
+++ b/cloudfunctions/commentManage/package.json
@@ -1,14 +1,14 @@
-{
-  "name": "commentManage",
-  "version": "1.0.0",
-  "description": "è¯„è®ºç®¡ç†äº‘å‡½æ•°",
-  "main": "index.js",
-  "scripts": {
-    "test": "echo \"Error: no test specified\" && exit 1"
-  },
-  "author": "",
-  "license": "ISC",
-  "dependencies": {
-    "wx-server-sdk": "~2.6.3"
-  }
+{
+  "name": "commentManage",
+  "version": "1.0.0",
+  "description": "è¯„è®ºç®¡ç†äº‘å‡½æ•°",
+  "main": "index.js",
+  "scripts": {
+    "test": "echo \"Error: no test specified\" && exit 1"
+  },
+  "author": "",
+  "license": "ISC",
+  "dependencies": {
+    "wx-server-sdk": "~2.6.3"
+  }
 } 
\ No newline at end of file
diff --git a/cloudfunctions/contentReview/index.js b/cloudfunctions/contentReview/index.js
index 31934c2..2692393 100644
--- a/cloudfunctions/contentReview/index.js
+++ b/cloudfunctions/contentReview/index.js
@@ -1,281 +1,281 @@
-// äº‘å‡½æ•°å…¥å£æ–‡ä»¶
-const cloud = require('wx-server-sdk')
-
-cloud.init({
-  env: cloud.DYNAMIC_CURRENT_ENV
-})
-
-const db = cloud.database()
-const _ = db.command
-
-// äº‘å‡½æ•°å…¥å£å‡½æ•°
-exports.main = async (event, context) => {
-  const wxContext = cloud.getWXContext()
-  const { OPENID } = wxContext
-  const { action, content, imageUrl, type } = event
-  
-  // æ ¹æ®ä¸åŒçš„æ“ä½œæ‰§è¡Œä¸åŒçš„åŠŸèƒ½
-  switch (action) {
-    case 'reviewText':
-      return await reviewText(content, type)
-    case 'reviewImage':
-      return await reviewImage(imageUrl, type)
-    default:
-      return {
-        success: false,
-        message: 'æœªçŸ¥æ“ä½œç±»å‹'
-      }
-  }
-}
-
-/**
- * å®¡æ ¸æ–‡æœ¬å†…å®¹
- * @param {string} content è¦å®¡æ ¸çš„æ–‡æœ¬
- * @param {string} type å†…å®¹ç±»å‹ï¼ˆcomment, nomination, etc.ï¼‰
- */
-async function reviewText(content, type) {
-  if (!content) {
-    return {
-      success: false,
-      message: 'ç¼ºå°‘å®¡æ ¸å†…å®¹'
-    }
-  }
-  
-  try {
-    // è°ƒç”¨å¾®ä¿¡å†…å®¹å®‰å…¨API
-    const result = await cloud.openapi.security.msgSecCheck({
-      content: content
-    })
-    
-    // è®°å½•å®¡æ ¸æ—¥å¿—
-    await logReviewResult({
-      type: 'text',
-      contentType: type || 'unknown',
-      content: content.substring(0, 100), // ä»…è®°å½•å‰100ä¸ªå­—ç¬¦
-      result: result,
-      pass: true
-    })
-    
-    return {
-      success: true,
-      message: 'å†…å®¹å®¡æ ¸é€šè¿‡',
-      data: result
-    }
-  } catch (err) {
-    console.error('æ–‡æœ¬å†…å®¹å®¡æ ¸å¤±è´¥:', err)
-    
-    // è®°å½•å®¡æ ¸æ—¥å¿—
-    await logReviewResult({
-      type: 'text',
-      contentType: type || 'unknown',
-      content: content.substring(0, 100), // ä»…è®°å½•å‰100ä¸ªå­—ç¬¦
-      result: err,
-      pass: false
-    })
-    
-    // å†…å®¹è¿è§„
-    if (err.errCode === 87014) {
-      return {
-        success: false,
-        message: 'å†…å®¹åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼Œè¯·ä¿®æ”¹åé‡è¯•',
-        errCode: err.errCode
-      }
-    }
-    
-    return {
-      success: false,
-      message: 'å†…å®¹å®¡æ ¸å¤±è´¥',
-      error: err.message
-    }
-  }
-}
-
-/**
- * å®¡æ ¸å›¾ç‰‡å†…å®¹
- * @param {string} imageUrl è¦å®¡æ ¸çš„å›¾ç‰‡URL
- * @param {string} type å†…å®¹ç±»å‹ï¼ˆavatar, nomination, etc.ï¼‰
- */
-async function reviewImage(imageUrl, type) {
-  if (!imageUrl) {
-    return {
-      success: false,
-      message: 'ç¼ºå°‘å›¾ç‰‡URL'
-    }
-  }
-  
-  try {
-    // å¦‚æœæ˜¯äº‘å­˜å‚¨é“¾æ¥ï¼Œéœ€è¦ä¸‹è½½ä¸´æ—¶æ–‡ä»¶è¿›è¡Œå®¡æ ¸
-    let fileID = imageUrl;
-    
-    // å¦‚æœä¸æ˜¯äº‘æ–‡ä»¶IDæ ¼å¼ï¼Œå…ˆä¸Šä¼ åˆ°äº‘å­˜å‚¨
-    if (!imageUrl.startsWith('cloud://')) {
-      // ä»ç½‘ç»œä¸‹è½½å›¾ç‰‡
-      const res = await cloud.downloadFile({
-        url: imageUrl,
-        options: {
-          timeout: 10000 // 10ç§’è¶…æ—¶
-        }
-      })
-      
-      // ä¸Šä¼ åˆ°äº‘å­˜å‚¨
-      const uploadResult = await cloud.uploadFile({
-        cloudPath: `temp/review_${Date.now()}.jpg`,
-        fileContent: res.fileContent
-      })
-      
-      fileID = uploadResult.fileID
-    }
-    
-    // è°ƒç”¨å¾®ä¿¡å†…å®¹å®‰å…¨API
-    const result = await cloud.openapi.security.imgSecCheck({
-      media: {
-        contentType: 'image/png',
-        value: Buffer.from(fileID)
-      }
-    })
-    
-    // è®°å½•å®¡æ ¸æ—¥å¿—
-    await logReviewResult({
-      type: 'image',
-      contentType: type || 'unknown',
-      content: imageUrl,
-      result: result,
-      pass: true
-    })
-    
-    // å¦‚æœæ˜¯ä¸´æ—¶ä¸Šä¼ çš„å›¾ç‰‡ï¼Œå®¡æ ¸å®Œååˆ é™¤
-    if (fileID !== imageUrl) {
-      await cloud.deleteFile({
-        fileList: [fileID]
-      })
-    }
-    
-    return {
-      success: true,
-      message: 'å›¾ç‰‡å®¡æ ¸é€šè¿‡',
-      data: result
-    }
-  } catch (err) {
-    console.error('å›¾ç‰‡å®¡æ ¸å¤±è´¥:', err)
-    
-    // è®°å½•å®¡æ ¸æ—¥å¿—
-    await logReviewResult({
-      type: 'image',
-      contentType: type || 'unknown',
-      content: imageUrl,
-      result: err,
-      pass: false
-    })
-    
-    // å†…å®¹è¿è§„
-    if (err.errCode === 87014) {
-      return {
-        success: false,
-        message: 'å›¾ç‰‡åŒ…å«æ•æ„Ÿå†…å®¹ï¼Œè¯·æ›´æ¢åé‡è¯•',
-        errCode: err.errCode
-      }
-    }
-    
-    return {
-      success: false,
-      message: 'å›¾ç‰‡å®¡æ ¸å¤±è´¥',
-      error: err.message
-    }
-  }
-}
-
-/**
- * è®°å½•å®¡æ ¸æ—¥å¿—
- * @param {object} logData æ—¥å¿—æ•°æ®
- */
-async function logReviewResult(logData) {
-  try {
-    await db.collection('content_review_logs').add({
-      data: {
-        ...logData,
-        createTime: db.serverDate()
-      }
-    })
-  } catch (error) {
-    console.error('è®°å½•å®¡æ ¸æ—¥å¿—å¤±è´¥:', error)
-    // æ—¥å¿—è®°å½•å¤±è´¥ä¸å½±å“ä¸»æµç¨‹
-  }
-}
-
-/**
- * è‡ªåŠ¨è¿è§„å†…å®¹æ£€æµ‹ï¼ˆå®šæ—¶è§¦å‘å™¨è°ƒç”¨ï¼‰
- */
-async function autoReviewContent() {
-  const collections = ['nominations', 'comments'];
-  let flag = false;
-  
-  try {
-    for (const collection of collections) {
-      // è·å–æœ€è¿‘æ·»åŠ çš„å†…å®¹è¿›è¡Œå®¡æ ¸
-      const data = await db.collection(collection)
-        .where({
-          reviewed: _.neq(true) // æœªå®¡æ ¸è¿‡çš„å†…å®¹
-        })
-        .limit(100)
-        .get();
-      
-      for (const item of data.data) {
-        if (item.content) {
-          // å®¡æ ¸æ–‡æœ¬å†…å®¹
-          try {
-            const result = await reviewText(item.content, collection);
-            
-            // æ›´æ–°å®¡æ ¸çŠ¶æ€
-            await db.collection(collection).doc(item._id).update({
-              data: {
-                reviewed: true,
-                reviewResult: result.success,
-                reviewTime: db.serverDate()
-              }
-            });
-            
-            // å¦‚æœå†…å®¹è¿è§„ï¼Œé€šçŸ¥ç”¨æˆ·å¹¶éšè—å†…å®¹
-            if (!result.success && result.errCode === 87014) {
-              flag = true;
-              
-              // æ ‡è®°å†…å®¹ä¸ºè¿è§„
-              await db.collection(collection).doc(item._id).update({
-                data: {
-                  isViolation: true,
-                  hidden: true
-                }
-              });
-              
-              // å‘é€è¿è§„é€šçŸ¥
-              await cloud.callFunction({
-                name: 'messageManage',
-                data: {
-                  action: 'create',
-                  data: {
-                    receiverId: item.userId || item.createdBy,
-                    type: 'system',
-                    content: `æ‚¨çš„${collection === 'nominations' ? 'æå' : 'è¯„è®º'}å†…å®¹åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼Œå·²è¢«ç³»ç»Ÿè‡ªåŠ¨éšè—ã€‚è¯·ä¿®æ”¹åé‡æ–°æäº¤ã€‚`,
-                    nominationId: item.nominationId || item._id
-                  }
-                }
-              });
-            }
-          } catch (err) {
-            console.error(`å®¡æ ¸${collection}å†…å®¹å¤±è´¥:`, err);
-          }
-        }
-      }
-    }
-    
-    return {
-      success: true,
-      flag: flag
-    };
-  } catch (err) {
-    console.error('è‡ªåŠ¨å®¡æ ¸å†…å®¹å¤±è´¥:', err);
-    return {
-      success: false,
-      error: err.message
-    };
-  }
+// äº‘å‡½æ•°å…¥å£æ–‡ä»¶
+const cloud = require('wx-server-sdk')
+
+cloud.init({
+  env: cloud.DYNAMIC_CURRENT_ENV
+})
+
+const db = cloud.database()
+const _ = db.command
+
+// äº‘å‡½æ•°å…¥å£å‡½æ•°
+exports.main = async (event, context) => {
+  const wxContext = cloud.getWXContext()
+  const { OPENID } = wxContext
+  const { action, content, imageUrl, type } = event
+  
+  // æ ¹æ®ä¸åŒçš„æ“ä½œæ‰§è¡Œä¸åŒçš„åŠŸèƒ½
+  switch (action) {
+    case 'reviewText':
+      return await reviewText(content, type)
+    case 'reviewImage':
+      return await reviewImage(imageUrl, type)
+    default:
+      return {
+        success: false,
+        message: 'æœªçŸ¥æ“ä½œç±»å‹'
+      }
+  }
+}
+
+/**
+ * å®¡æ ¸æ–‡æœ¬å†…å®¹
+ * @param {string} content è¦å®¡æ ¸çš„æ–‡æœ¬
+ * @param {string} type å†…å®¹ç±»å‹ï¼ˆcomment, nomination, etc.ï¼‰
+ */
+async function reviewText(content, type) {
+  if (!content) {
+    return {
+      success: false,
+      message: 'ç¼ºå°‘å®¡æ ¸å†…å®¹'
+    }
+  }
+  
+  try {
+    // è°ƒç”¨å¾®ä¿¡å†…å®¹å®‰å…¨API
+    const result = await cloud.openapi.security.msgSecCheck({
+      content: content
+    })
+    
+    // è®°å½•å®¡æ ¸æ—¥å¿—
+    await logReviewResult({
+      type: 'text',
+      contentType: type || 'unknown',
+      content: content.substring(0, 100), // ä»…è®°å½•å‰100ä¸ªå­—ç¬¦
+      result: result,
+      pass: true
+    })
+    
+    return {
+      success: true,
+      message: 'å†…å®¹å®¡æ ¸é€šè¿‡',
+      data: result
+    }
+  } catch (err) {
+    console.error('æ–‡æœ¬å†…å®¹å®¡æ ¸å¤±è´¥:', err)
+    
+    // è®°å½•å®¡æ ¸æ—¥å¿—
+    await logReviewResult({
+      type: 'text',
+      contentType: type || 'unknown',
+      content: content.substring(0, 100), // ä»…è®°å½•å‰100ä¸ªå­—ç¬¦
+      result: err,
+      pass: false
+    })
+    
+    // å†…å®¹è¿è§„
+    if (err.errCode === 87014) {
+      return {
+        success: false,
+        message: 'å†…å®¹åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼Œè¯·ä¿®æ”¹åé‡è¯•',
+        errCode: err.errCode
+      }
+    }
+    
+    return {
+      success: false,
+      message: 'å†…å®¹å®¡æ ¸å¤±è´¥',
+      error: err.message
+    }
+  }
+}
+
+/**
+ * å®¡æ ¸å›¾ç‰‡å†…å®¹
+ * @param {string} imageUrl è¦å®¡æ ¸çš„å›¾ç‰‡URL
+ * @param {string} type å†…å®¹ç±»å‹ï¼ˆavatar, nomination, etc.ï¼‰
+ */
+async function reviewImage(imageUrl, type) {
+  if (!imageUrl) {
+    return {
+      success: false,
+      message: 'ç¼ºå°‘å›¾ç‰‡URL'
+    }
+  }
+  
+  try {
+    // å¦‚æœæ˜¯äº‘å­˜å‚¨é“¾æ¥ï¼Œéœ€è¦ä¸‹è½½ä¸´æ—¶æ–‡ä»¶è¿›è¡Œå®¡æ ¸
+    let fileID = imageUrl;
+    
+    // å¦‚æœä¸æ˜¯äº‘æ–‡ä»¶IDæ ¼å¼ï¼Œå…ˆä¸Šä¼ åˆ°äº‘å­˜å‚¨
+    if (!imageUrl.startsWith('cloud://')) {
+      // ä»ç½‘ç»œä¸‹è½½å›¾ç‰‡
+      const res = await cloud.downloadFile({
+        url: imageUrl,
+        options: {
+          timeout: 10000 // 10ç§’è¶…æ—¶
+        }
+      })
+      
+      // ä¸Šä¼ åˆ°äº‘å­˜å‚¨
+      const uploadResult = await cloud.uploadFile({
+        cloudPath: `temp/review_${Date.now()}.jpg`,
+        fileContent: res.fileContent
+      })
+      
+      fileID = uploadResult.fileID
+    }
+    
+    // è°ƒç”¨å¾®ä¿¡å†…å®¹å®‰å…¨API
+    const result = await cloud.openapi.security.imgSecCheck({
+      media: {
+        contentType: 'image/png',
+        value: Buffer.from(fileID)
+      }
+    })
+    
+    // è®°å½•å®¡æ ¸æ—¥å¿—
+    await logReviewResult({
+      type: 'image',
+      contentType: type || 'unknown',
+      content: imageUrl,
+      result: result,
+      pass: true
+    })
+    
+    // å¦‚æœæ˜¯ä¸´æ—¶ä¸Šä¼ çš„å›¾ç‰‡ï¼Œå®¡æ ¸å®Œååˆ é™¤
+    if (fileID !== imageUrl) {
+      await cloud.deleteFile({
+        fileList: [fileID]
+      })
+    }
+    
+    return {
+      success: true,
+      message: 'å›¾ç‰‡å®¡æ ¸é€šè¿‡',
+      data: result
+    }
+  } catch (err) {
+    console.error('å›¾ç‰‡å®¡æ ¸å¤±è´¥:', err)
+    
+    // è®°å½•å®¡æ ¸æ—¥å¿—
+    await logReviewResult({
+      type: 'image',
+      contentType: type || 'unknown',
+      content: imageUrl,
+      result: err,
+      pass: false
+    })
+    
+    // å†…å®¹è¿è§„
+    if (err.errCode === 87014) {
+      return {
+        success: false,
+        message: 'å›¾ç‰‡åŒ…å«æ•æ„Ÿå†…å®¹ï¼Œè¯·æ›´æ¢åé‡è¯•',
+        errCode: err.errCode
+      }
+    }
+    
+    return {
+      success: false,
+      message: 'å›¾ç‰‡å®¡æ ¸å¤±è´¥',
+      error: err.message
+    }
+  }
+}
+
+/**
+ * è®°å½•å®¡æ ¸æ—¥å¿—
+ * @param {object} logData æ—¥å¿—æ•°æ®
+ */
+async function logReviewResult(logData) {
+  try {
+    await db.collection('content_review_logs').add({
+      data: {
+        ...logData,
+        createTime: db.serverDate()
+      }
+    })
+  } catch (error) {
+    console.error('è®°å½•å®¡æ ¸æ—¥å¿—å¤±è´¥:', error)
+    // æ—¥å¿—è®°å½•å¤±è´¥ä¸å½±å“ä¸»æµç¨‹
+  }
+}
+
+/**
+ * è‡ªåŠ¨è¿è§„å†…å®¹æ£€æµ‹ï¼ˆå®šæ—¶è§¦å‘å™¨è°ƒç”¨ï¼‰
+ */
+async function autoReviewContent() {
+  const collections = ['nominations', 'comments'];
+  let flag = false;
+  
+  try {
+    for (const collection of collections) {
+      // è·å–æœ€è¿‘æ·»åŠ çš„å†…å®¹è¿›è¡Œå®¡æ ¸
+      const data = await db.collection(collection)
+        .where({
+          reviewed: _.neq(true) // æœªå®¡æ ¸è¿‡çš„å†…å®¹
+        })
+        .limit(100)
+        .get();
+      
+      for (const item of data.data) {
+        if (item.content) {
+          // å®¡æ ¸æ–‡æœ¬å†…å®¹
+          try {
+            const result = await reviewText(item.content, collection);
+            
+            // æ›´æ–°å®¡æ ¸çŠ¶æ€
+            await db.collection(collection).doc(item._id).update({
+              data: {
+                reviewed: true,
+                reviewResult: result.success,
+                reviewTime: db.serverDate()
+              }
+            });
+            
+            // å¦‚æœå†…å®¹è¿è§„ï¼Œé€šçŸ¥ç”¨æˆ·å¹¶éšè—å†…å®¹
+            if (!result.success && result.errCode === 87014) {
+              flag = true;
+              
+              // æ ‡è®°å†…å®¹ä¸ºè¿è§„
+              await db.collection(collection).doc(item._id).update({
+                data: {
+                  isViolation: true,
+                  hidden: true
+                }
+              });
+              
+              // å‘é€è¿è§„é€šçŸ¥
+              await cloud.callFunction({
+                name: 'messageManage',
+                data: {
+                  action: 'create',
+                  data: {
+                    receiverId: item.userId || item.createdBy,
+                    type: 'system',
+                    content: `æ‚¨çš„${collection === 'nominations' ? 'æå' : 'è¯„è®º'}å†…å®¹åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼Œå·²è¢«ç³»ç»Ÿè‡ªåŠ¨éšè—ã€‚è¯·ä¿®æ”¹åé‡æ–°æäº¤ã€‚`,
+                    nominationId: item.nominationId || item._id
+                  }
+                }
+              });
+            }
+          } catch (err) {
+            console.error(`å®¡æ ¸${collection}å†…å®¹å¤±è´¥:`, err);
+          }
+        }
+      }
+    }
+    
+    return {
+      success: true,
+      flag: flag
+    };
+  } catch (err) {
+    console.error('è‡ªåŠ¨å®¡æ ¸å†…å®¹å¤±è´¥:', err);
+    return {
+      success: false,
+      error: err.message
+    };
+  }
 } 
\ No newline at end of file
diff --git a/cloudfunctions/contentReview/package.json b/cloudfunctions/contentReview/package.json
index a28a0b7..68999ec 100644
--- a/cloudfunctions/contentReview/package.json
+++ b/cloudfunctions/contentReview/package.json
@@ -1,14 +1,14 @@
-{
-  "name": "contentReview",
-  "version": "1.0.0",
-  "description": "å†…å®¹å®¡æ ¸äº‘å‡½æ•°",
-  "main": "index.js",
-  "scripts": {
-    "test": "echo \"Error: no test specified\" && exit 1"
-  },
-  "author": "",
-  "license": "ISC",
-  "dependencies": {
-    "wx-server-sdk": "~2.6.3"
-  }
+{
+  "name": "contentReview",
+  "version": "1.0.0",
+  "description": "å†…å®¹å®¡æ ¸äº‘å‡½æ•°",
+  "main": "index.js",
+  "scripts": {
+    "test": "echo \"Error: no test specified\" && exit 1"
+  },
+  "author": "",
+  "license": "ISC",
+  "dependencies": {
+    "wx-server-sdk": "~2.6.3"
+  }
 } 
\ No newline at end of file
diff --git a/cloudfunctions/grantShareReward/index.js b/cloudfunctions/grantShareReward/index.js
index 59b431e..a2692c3 100644
--- a/cloudfunctions/grantShareReward/index.js
+++ b/cloudfunctions/grantShareReward/index.js
@@ -1,84 +1,84 @@
-// å¼•å…¥äº‘å¼€å‘æœåŠ¡ç«¯SDK
-const cloud = require('wx-server-sdk');
-cloud.init({ env: cloud.DYNAMIC_CURRENT_ENV });
-const db = cloud.database();
-
-// è·å–ä»Šæ—¥é›¶ç‚¹çš„Dateå¯¹è±¡
-function getStartOfDay() {
-    const now = new Date();
-    return new Date(now.getFullYear(), now.getMonth(), now.getDate());
-}
-
-// ä¸»å‡½æ•°
-exports.main = async (event, context) => {
-    console.log('äº‘å‡½æ•°æ”¶åˆ°è¯·æ±‚:', event);
-    
-    const wxContext = cloud.getWXContext();
-    const openid = wxContext.OPENID;
-    const DAILY_LIMIT = 5; // æ¯æ—¥å¥–åŠ±ä¸Šé™æ¬¡æ•°
-    const shareType = event.shareType || 'vote'; // é»˜è®¤ä¸ºæŠ•ç¥¨ç±»å‹
-    const userId = event.userId || '';
-    const itemId = event.itemId || '';
-    
-    console.log('ç”¨æˆ·ä¿¡æ¯:', {openid, userId, itemId, shareType});
-
-    try {
-        // 1. æŸ¥è¯¢ç”¨æˆ·ä»Šæ—¥å·²åˆ†äº«è·å¾—å¥–åŠ±çš„æ¬¡æ•°
-        const todayStart = getStartOfDay();
-        console.log('æŸ¥è¯¢ä»Šæ—¥åˆ†äº«è®°å½•ï¼Œå¼€å§‹æ—¶é—´:', todayStart);
-        
-        const countResult = await db.collection('share_logs')
-            .where({
-                _openid: openid,
-                shareTime: db.command.gte(todayStart),
-                shareType: shareType
-            })
-            .count();
-        
-        const todayCount = countResult.total;
-        console.log('ä»Šæ—¥å·²åˆ†äº«æ¬¡æ•°:', todayCount);
-
-        // 2. æ£€æŸ¥æ˜¯å¦å·²è¾¾åˆ°æ¯æ—¥ä¸Šé™
-        if (todayCount >= DAILY_LIMIT) {
-            console.log('å·²è¾¾åˆ°æ¯æ—¥ä¸Šé™');
-            return {
-                success: false,
-                code: 'LIMIT_REACHED',
-                message: `ä»Šæ—¥${shareType === 'vote' ? 'æŠ•ç¥¨' : 'å‡ç¥¨'}å¥–åŠ±å·²è¾¾ä¸Šé™(${DAILY_LIMIT}æ¬¡)`,
-                remainingTimes: 0
-            };
-        }
-
-        // 3. è®°å½•æœ¬æ¬¡åˆ†äº«
-        console.log('è®°å½•æœ¬æ¬¡åˆ†äº«');
-        const addResult = await db.collection('share_logs').add({
-            data: {
-                _openid: openid,
-                shareTime: new Date(),
-                shareType: shareType,
-                userId: userId,
-                itemId: itemId
-            }
-        });
-        
-        console.log('åˆ†äº«è®°å½•æ·»åŠ ç»“æœ:', addResult);
-        
-        // 4. è¿”å›æˆåŠŸä¿¡æ¯
-        return {
-            success: true,
-            code: 'SUCCESS',
-            message: `åˆ†äº«æˆåŠŸï¼Œå·²è·å¾—${shareType === 'vote' ? 'æŠ•ç¥¨' : 'å‡ç¥¨'}å¥–åŠ±ï¼`,
-            remainingTimes: DAILY_LIMIT - (todayCount + 1),
-            shareType: shareType
-        };
-
-    } catch (error) {
-        console.error('grantShareReward function error:', error);
-        return {
-            success: false,
-            code: 'DATABASE_ERROR',
-            message: 'æœåŠ¡å™¨ç¹å¿™ï¼Œè¯·ç¨åå†è¯•',
-            error: error.message
-        };
-    }
+// å¼•å…¥äº‘å¼€å‘æœåŠ¡ç«¯SDK
+const cloud = require('wx-server-sdk');
+cloud.init({ env: cloud.DYNAMIC_CURRENT_ENV });
+const db = cloud.database();
+
+// è·å–ä»Šæ—¥é›¶ç‚¹çš„Dateå¯¹è±¡
+function getStartOfDay() {
+    const now = new Date();
+    return new Date(now.getFullYear(), now.getMonth(), now.getDate());
+}
+
+// ä¸»å‡½æ•°
+exports.main = async (event, context) => {
+    console.log('äº‘å‡½æ•°æ”¶åˆ°è¯·æ±‚:', event);
+    
+    const wxContext = cloud.getWXContext();
+    const openid = wxContext.OPENID;
+    const DAILY_LIMIT = 5; // æ¯æ—¥å¥–åŠ±ä¸Šé™æ¬¡æ•°
+    const shareType = event.shareType || 'vote'; // é»˜è®¤ä¸ºæŠ•ç¥¨ç±»å‹
+    const userId = event.userId || '';
+    const itemId = event.itemId || '';
+    
+    console.log('ç”¨æˆ·ä¿¡æ¯:', {openid, userId, itemId, shareType});
+
+    try {
+        // 1. æŸ¥è¯¢ç”¨æˆ·ä»Šæ—¥å·²åˆ†äº«è·å¾—å¥–åŠ±çš„æ¬¡æ•°
+        const todayStart = getStartOfDay();
+        console.log('æŸ¥è¯¢ä»Šæ—¥åˆ†äº«è®°å½•ï¼Œå¼€å§‹æ—¶é—´:', todayStart);
+        
+        const countResult = await db.collection('share_logs')
+            .where({
+                _openid: openid,
+                shareTime: db.command.gte(todayStart),
+                shareType: shareType
+            })
+            .count();
+        
+        const todayCount = countResult.total;
+        console.log('ä»Šæ—¥å·²åˆ†äº«æ¬¡æ•°:', todayCount);
+
+        // 2. æ£€æŸ¥æ˜¯å¦å·²è¾¾åˆ°æ¯æ—¥ä¸Šé™
+        if (todayCount >= DAILY_LIMIT) {
+            console.log('å·²è¾¾åˆ°æ¯æ—¥ä¸Šé™');
+            return {
+                success: false,
+                code: 'LIMIT_REACHED',
+                message: `ä»Šæ—¥${shareType === 'vote' ? 'æŠ•ç¥¨' : 'å‡ç¥¨'}å¥–åŠ±å·²è¾¾ä¸Šé™(${DAILY_LIMIT}æ¬¡)`,
+                remainingTimes: 0
+            };
+        }
+
+        // 3. è®°å½•æœ¬æ¬¡åˆ†äº«
+        console.log('è®°å½•æœ¬æ¬¡åˆ†äº«');
+        const addResult = await db.collection('share_logs').add({
+            data: {
+                _openid: openid,
+                shareTime: new Date(),
+                shareType: shareType,
+                userId: userId,
+                itemId: itemId
+            }
+        });
+        
+        console.log('åˆ†äº«è®°å½•æ·»åŠ ç»“æœ:', addResult);
+        
+        // 4. è¿”å›æˆåŠŸä¿¡æ¯
+        return {
+            success: true,
+            code: 'SUCCESS',
+            message: `åˆ†äº«æˆåŠŸï¼Œå·²è·å¾—${shareType === 'vote' ? 'æŠ•ç¥¨' : 'å‡ç¥¨'}å¥–åŠ±ï¼`,
+            remainingTimes: DAILY_LIMIT - (todayCount + 1),
+            shareType: shareType
+        };
+
+    } catch (error) {
+        console.error('grantShareReward function error:', error);
+        return {
+            success: false,
+            code: 'DATABASE_ERROR',
+            message: 'æœåŠ¡å™¨ç¹å¿™ï¼Œè¯·ç¨åå†è¯•',
+            error: error.message
+        };
+    }
 }; 
\ No newline at end of file
diff --git a/cloudfunctions/grantShareReward/package-lock.json b/cloudfunctions/grantShareReward/package-lock.json
index cfeab07..85fcd71 100644
--- a/cloudfunctions/grantShareReward/package-lock.json
+++ b/cloudfunctions/grantShareReward/package-lock.json
@@ -1,1288 +1,1288 @@
-{
-  "name": "grantShareReward",
-  "version": "1.0.0",
-  "lockfileVersion": 3,
-  "requires": true,
-  "packages": {
-    "": {
-      "name": "grantShareReward",
-      "version": "1.0.0",
-      "license": "ISC",
-      "dependencies": {
-        "wx-server-sdk": "latest"
-      }
-    },
-    "node_modules/@cloudbase/database": {
-      "version": "1.4.1",
-      "resolved": "https://registry.npmjs.org/@cloudbase/database/-/database-1.4.1.tgz",
-      "integrity": "sha512-BYLXHS6c+WhxAvvdak8Z3W+heScqBBPu/CQ76gC8v1Scuy5qf4qxuPWNzyoxde/eZsmc+BRRCFyIq4xUnIot8g==",
-      "license": "ISC",
-      "dependencies": {
-        "bson": "^4.0.3",
-        "lodash.clonedeep": "4.5.0",
-        "lodash.set": "4.3.2",
-        "lodash.unset": "4.5.2"
-      }
-    },
-    "node_modules/@cloudbase/node-sdk": {
-      "version": "2.10.0",
-      "resolved": "https://registry.npmjs.org/@cloudbase/node-sdk/-/node-sdk-2.10.0.tgz",
-      "integrity": "sha512-P9loxdwN6qG3iIzjx2Z3uBk/4iyn9+KoiWYGi9ZwhWP1toijpQu0+eLSAaMupNJecJopS21IWUmmGSetlZh8UA==",
-      "license": "MIT",
-      "dependencies": {
-        "@cloudbase/database": "1.4.1",
-        "@cloudbase/signature-nodejs": "1.0.0-beta.0",
-        "agentkeepalive": "^4.3.0",
-        "axios": "^0.21.1",
-        "jsonwebtoken": "^8.5.1",
-        "request": "^2.87.0",
-        "retry": "^0.13.1",
-        "xml2js": "^0.5.0"
-      },
-      "engines": {
-        "node": ">=8.6.0"
-      }
-    },
-    "node_modules/@cloudbase/signature-nodejs": {
-      "version": "1.0.0-beta.0",
-      "resolved": "https://registry.npmjs.org/@cloudbase/signature-nodejs/-/signature-nodejs-1.0.0-beta.0.tgz",
-      "integrity": "sha512-gpKqwsVk/D2PzvFamYNReymXSdvRSY90eZ1ARf+1wZ8oT6OpK9kr6nmevGykMxN1n17Gn92hBbWqAxU9o3+kAQ==",
-      "dependencies": {
-        "@types/clone": "^0.1.30",
-        "clone": "^2.1.2",
-        "is-stream": "^2.0.0",
-        "url": "^0.11.0"
-      }
-    },
-    "node_modules/@protobufjs/aspromise": {
-      "version": "1.1.2",
-      "resolved": "https://registry.npmjs.org/@protobufjs/aspromise/-/aspromise-1.1.2.tgz",
-      "integrity": "sha512-j+gKExEuLmKwvz3OgROXtrJ2UG2x8Ch2YZUxahh+s1F2HZ+wAceUNLkvy6zKCPVRkU++ZWQrdxsUeQXmcg4uoQ==",
-      "license": "BSD-3-Clause"
-    },
-    "node_modules/@protobufjs/base64": {
-      "version": "1.1.2",
-      "resolved": "https://registry.npmjs.org/@protobufjs/base64/-/base64-1.1.2.tgz",
-      "integrity": "sha512-AZkcAA5vnN/v4PDqKyMR5lx7hZttPDgClv83E//FMNhR2TMcLUhfRUBHCmSl0oi9zMgDDqRUJkSxO3wm85+XLg==",
-      "license": "BSD-3-Clause"
-    },
-    "node_modules/@protobufjs/codegen": {
-      "version": "2.0.4",
-      "resolved": "https://registry.npmjs.org/@protobufjs/codegen/-/codegen-2.0.4.tgz",
-      "integrity": "sha512-YyFaikqM5sH0ziFZCN3xDC7zeGaB/d0IUb9CATugHWbd1FRFwWwt4ld4OYMPWu5a3Xe01mGAULCdqhMlPl29Jg==",
-      "license": "BSD-3-Clause"
-    },
-    "node_modules/@protobufjs/eventemitter": {
-      "version": "1.1.0",
-      "resolved": "https://registry.npmjs.org/@protobufjs/eventemitter/-/eventemitter-1.1.0.tgz",
-      "integrity": "sha512-j9ednRT81vYJ9OfVuXG6ERSTdEL1xVsNgqpkxMsbIabzSo3goCjDIveeGv5d03om39ML71RdmrGNjG5SReBP/Q==",
-      "license": "BSD-3-Clause"
-    },
-    "node_modules/@protobufjs/fetch": {
-      "version": "1.1.0",
-      "resolved": "https://registry.npmjs.org/@protobufjs/fetch/-/fetch-1.1.0.tgz",
-      "integrity": "sha512-lljVXpqXebpsijW71PZaCYeIcE5on1w5DlQy5WH6GLbFryLUrBD4932W/E2BSpfRJWseIL4v/KPgBFxDOIdKpQ==",
-      "license": "BSD-3-Clause",
-      "dependencies": {
-        "@protobufjs/aspromise": "^1.1.1",
-        "@protobufjs/inquire": "^1.1.0"
-      }
-    },
-    "node_modules/@protobufjs/float": {
-      "version": "1.0.2",
-      "resolved": "https://registry.npmjs.org/@protobufjs/float/-/float-1.0.2.tgz",
-      "integrity": "sha512-Ddb+kVXlXst9d+R9PfTIxh1EdNkgoRe5tOX6t01f1lYWOvJnSPDBlG241QLzcyPdoNTsblLUdujGSE4RzrTZGQ==",
-      "license": "BSD-3-Clause"
-    },
-    "node_modules/@protobufjs/inquire": {
-      "version": "1.1.0",
-      "resolved": "https://registry.npmjs.org/@protobufjs/inquire/-/inquire-1.1.0.tgz",
-      "integrity": "sha512-kdSefcPdruJiFMVSbn801t4vFK7KB/5gd2fYvrxhuJYg8ILrmn9SKSX2tZdV6V+ksulWqS7aXjBcRXl3wHoD9Q==",
-      "license": "BSD-3-Clause"
-    },
-    "node_modules/@protobufjs/path": {
-      "version": "1.1.2",
-      "resolved": "https://registry.npmjs.org/@protobufjs/path/-/path-1.1.2.tgz",
-      "integrity": "sha512-6JOcJ5Tm08dOHAbdR3GrvP+yUUfkjG5ePsHYczMFLq3ZmMkAD98cDgcT2iA1lJ9NVwFd4tH/iSSoe44YWkltEA==",
-      "license": "BSD-3-Clause"
-    },
-    "node_modules/@protobufjs/pool": {
-      "version": "1.1.0",
-      "resolved": "https://registry.npmjs.org/@protobufjs/pool/-/pool-1.1.0.tgz",
-      "integrity": "sha512-0kELaGSIDBKvcgS4zkjz1PeddatrjYcmMWOlAuAPwAeccUrPHdUqo/J6LiymHHEiJT5NrF1UVwxY14f+fy4WQw==",
-      "license": "BSD-3-Clause"
-    },
-    "node_modules/@protobufjs/utf8": {
-      "version": "1.1.0",
-      "resolved": "https://registry.npmjs.org/@protobufjs/utf8/-/utf8-1.1.0.tgz",
-      "integrity": "sha512-Vvn3zZrhQZkkBE8LSuW3em98c0FwgO4nxzv6OdSxPKJIEKY2bGbHn+mhGIPerzI4twdxaP8/0+06HBpwf345Lw==",
-      "license": "BSD-3-Clause"
-    },
-    "node_modules/@types/clone": {
-      "version": "0.1.30",
-      "resolved": "https://registry.npmjs.org/@types/clone/-/clone-0.1.30.tgz",
-      "integrity": "sha512-vcxBr+ybljeSiasmdke1cQ9ICxoEwaBgM1OQ/P5h4MPj/kRyLcDl5L8PrftlbyV1kBbJIs3M3x1A1+rcWd4mEA==",
-      "license": "MIT"
-    },
-    "node_modules/@types/node": {
-      "version": "24.3.0",
-      "resolved": "https://registry.npmjs.org/@types/node/-/node-24.3.0.tgz",
-      "integrity": "sha512-aPTXCrfwnDLj4VvXrm+UUCQjNEvJgNA8s5F1cvwQU+3KNltTOkBm1j30uNLyqqPNe7gE3KFzImYoZEfLhp4Yow==",
-      "license": "MIT",
-      "dependencies": {
-        "undici-types": "~7.10.0"
-      }
-    },
-    "node_modules/agentkeepalive": {
-      "version": "4.6.0",
-      "resolved": "https://registry.npmjs.org/agentkeepalive/-/agentkeepalive-4.6.0.tgz",
-      "integrity": "sha512-kja8j7PjmncONqaTsB8fQ+wE2mSU2DJ9D4XKoJ5PFWIdRMa6SLSN1ff4mOr4jCbfRSsxR4keIiySJU0N9T5hIQ==",
-      "license": "MIT",
-      "dependencies": {
-        "humanize-ms": "^1.2.1"
-      },
-      "engines": {
-        "node": ">= 8.0.0"
-      }
-    },
-    "node_modules/ajv": {
-      "version": "6.12.6",
-      "resolved": "https://registry.npmjs.org/ajv/-/ajv-6.12.6.tgz",
-      "integrity": "sha512-j3fVLgvTo527anyYyJOGTYJbG+vnnQYvE0m5mmkc1TK+nxAppkCLMIL0aZ4dblVCNoGShhm+kzE4ZUykBoMg4g==",
-      "license": "MIT",
-      "dependencies": {
-        "fast-deep-equal": "^3.1.1",
-        "fast-json-stable-stringify": "^2.0.0",
-        "json-schema-traverse": "^0.4.1",
-        "uri-js": "^4.2.2"
-      },
-      "funding": {
-        "type": "github",
-        "url": "https://github.com/sponsors/epoberezkin"
-      }
-    },
-    "node_modules/asn1": {
-      "version": "0.2.6",
-      "resolved": "https://registry.npmjs.org/asn1/-/asn1-0.2.6.tgz",
-      "integrity": "sha512-ix/FxPn0MDjeyJ7i/yoHGFt/EX6LyNbxSEhPPXODPL+KB0VPk86UYfL0lMdy+KCnv+fmvIzySwaK5COwqVbWTQ==",
-      "license": "MIT",
-      "dependencies": {
-        "safer-buffer": "~2.1.0"
-      }
-    },
-    "node_modules/assert-plus": {
-      "version": "1.0.0",
-      "resolved": "https://registry.npmjs.org/assert-plus/-/assert-plus-1.0.0.tgz",
-      "integrity": "sha512-NfJ4UzBCcQGLDlQq7nHxH+tv3kyZ0hHQqF5BO6J7tNJeP5do1llPr8dZ8zHonfhAu0PHAdMkSo+8o0wxg9lZWw==",
-      "license": "MIT",
-      "engines": {
-        "node": ">=0.8"
-      }
-    },
-    "node_modules/asynckit": {
-      "version": "0.4.0",
-      "resolved": "https://registry.npmjs.org/asynckit/-/asynckit-0.4.0.tgz",
-      "integrity": "sha512-Oei9OH4tRh0YqU3GxhX79dM/mwVgvbZJaSNaRk+bshkj0S5cfHcgYakreBjrHwatXKbz+IoIdYLxrKim2MjW0Q==",
-      "license": "MIT"
-    },
-    "node_modules/aws-sign2": {
-      "version": "0.7.0",
-      "resolved": "https://registry.npmjs.org/aws-sign2/-/aws-sign2-0.7.0.tgz",
-      "integrity": "sha512-08kcGqnYf/YmjoRhfxyu+CLxBjUtHLXLXX/vUfx9l2LYzG3c1m61nrpyFUZI6zeS+Li/wWMMidD9KgrqtGq3mA==",
-      "license": "Apache-2.0",
-      "engines": {
-        "node": "*"
-      }
-    },
-    "node_modules/aws4": {
-      "version": "1.13.2",
-      "resolved": "https://registry.npmjs.org/aws4/-/aws4-1.13.2.tgz",
-      "integrity": "sha512-lHe62zvbTB5eEABUVi/AwVh0ZKY9rMMDhmm+eeyuuUQbQ3+J+fONVQOZyj+DdrvD4BY33uYniyRJ4UJIaSKAfw==",
-      "license": "MIT"
-    },
-    "node_modules/axios": {
-      "version": "0.21.4",
-      "resolved": "https://registry.npmjs.org/axios/-/axios-0.21.4.tgz",
-      "integrity": "sha512-ut5vewkiu8jjGBdqpM44XxjuCjq9LAKeHVmoVfHVzy8eHgxxq8SbAVQNovDA8mVi05kP0Ea/n/UzcSHcTJQfNg==",
-      "license": "MIT",
-      "dependencies": {
-        "follow-redirects": "^1.14.0"
-      }
-    },
-    "node_modules/base64-js": {
-      "version": "1.5.1",
-      "resolved": "https://registry.npmjs.org/base64-js/-/base64-js-1.5.1.tgz",
-      "integrity": "sha512-AKpaYlHn8t4SVbOHCy+b5+KKgvR4vrsD8vbvrbiQJps7fKDTkjkDry6ji0rUJjC0kzbNePLwzxq8iypo41qeWA==",
-      "funding": [
-        {
-          "type": "github",
-          "url": "https://github.com/sponsors/feross"
-        },
-        {
-          "type": "patreon",
-          "url": "https://www.patreon.com/feross"
-        },
-        {
-          "type": "consulting",
-          "url": "https://feross.org/support"
-        }
-      ],
-      "license": "MIT"
-    },
-    "node_modules/bcrypt-pbkdf": {
-      "version": "1.0.2",
-      "resolved": "https://registry.npmjs.org/bcrypt-pbkdf/-/bcrypt-pbkdf-1.0.2.tgz",
-      "integrity": "sha512-qeFIXtP4MSoi6NLqO12WfqARWWuCKi2Rn/9hJLEmtB5yTNr9DqFWkJRCf2qShWzPeAMRnOgCrq0sg/KLv5ES9w==",
-      "license": "BSD-3-Clause",
-      "dependencies": {
-        "tweetnacl": "^0.14.3"
-      }
-    },
-    "node_modules/bignumber.js": {
-      "version": "9.3.1",
-      "resolved": "https://registry.npmjs.org/bignumber.js/-/bignumber.js-9.3.1.tgz",
-      "integrity": "sha512-Ko0uX15oIUS7wJ3Rb30Fs6SkVbLmPBAKdlm7q9+ak9bbIeFf0MwuBsQV6z7+X768/cHsfg+WlysDWJcmthjsjQ==",
-      "license": "MIT",
-      "engines": {
-        "node": "*"
-      }
-    },
-    "node_modules/bson": {
-      "version": "4.7.2",
-      "resolved": "https://registry.npmjs.org/bson/-/bson-4.7.2.tgz",
-      "integrity": "sha512-Ry9wCtIZ5kGqkJoi6aD8KjxFZEx78guTQDnpXWiNthsxzrxAK/i8E6pCHAIZTbaEFWcOCvbecMukfK7XUvyLpQ==",
-      "license": "Apache-2.0",
-      "dependencies": {
-        "buffer": "^5.6.0"
-      },
-      "engines": {
-        "node": ">=6.9.0"
-      }
-    },
-    "node_modules/buffer": {
-      "version": "5.7.1",
-      "resolved": "https://registry.npmjs.org/buffer/-/buffer-5.7.1.tgz",
-      "integrity": "sha512-EHcyIPBQ4BSGlvjB16k5KgAJ27CIsHY/2JBmCRReo48y9rQ3MaUzWX3KVlBa4U7MyX02HdVj0K7C3WaB3ju7FQ==",
-      "funding": [
-        {
-          "type": "github",
-          "url": "https://github.com/sponsors/feross"
-        },
-        {
-          "type": "patreon",
-          "url": "https://www.patreon.com/feross"
-        },
-        {
-          "type": "consulting",
-          "url": "https://feross.org/support"
-        }
-      ],
-      "license": "MIT",
-      "dependencies": {
-        "base64-js": "^1.3.1",
-        "ieee754": "^1.1.13"
-      }
-    },
-    "node_modules/buffer-equal-constant-time": {
-      "version": "1.0.1",
-      "resolved": "https://registry.npmjs.org/buffer-equal-constant-time/-/buffer-equal-constant-time-1.0.1.tgz",
-      "integrity": "sha512-zRpUiDwd/xk6ADqPMATG8vc9VPrkck7T07OIx0gnjmJAnHnTVXNQG3vfvWNuiZIkwu9KrKdA1iJKfsfTVxE6NA==",
-      "license": "BSD-3-Clause"
-    },
-    "node_modules/call-bind-apply-helpers": {
-      "version": "1.0.2",
-      "resolved": "https://registry.npmjs.org/call-bind-apply-helpers/-/call-bind-apply-helpers-1.0.2.tgz",
-      "integrity": "sha512-Sp1ablJ0ivDkSzjcaJdxEunN5/XvksFJ2sMBFfq6x0ryhQV/2b/KwFe21cMpmHtPOSij8K99/wSfoEuTObmuMQ==",
-      "license": "MIT",
-      "dependencies": {
-        "es-errors": "^1.3.0",
-        "function-bind": "^1.1.2"
-      },
-      "engines": {
-        "node": ">= 0.4"
-      }
-    },
-    "node_modules/call-bound": {
-      "version": "1.0.4",
-      "resolved": "https://registry.npmjs.org/call-bound/-/call-bound-1.0.4.tgz",
-      "integrity": "sha512-+ys997U96po4Kx/ABpBCqhA9EuxJaQWDQg7295H4hBphv3IZg0boBKuwYpt4YXp6MZ5AmZQnU/tyMTlRpaSejg==",
-      "license": "MIT",
-      "dependencies": {
-        "call-bind-apply-helpers": "^1.0.2",
-        "get-intrinsic": "^1.3.0"
-      },
-      "engines": {
-        "node": ">= 0.4"
-      },
-      "funding": {
-        "url": "https://github.com/sponsors/ljharb"
-      }
-    },
-    "node_modules/caseless": {
-      "version": "0.12.0",
-      "resolved": "https://registry.npmjs.org/caseless/-/caseless-0.12.0.tgz",
-      "integrity": "sha512-4tYFyifaFfGacoiObjJegolkwSU4xQNGbVgUiNYVUxbQ2x2lUsFvY4hVgVzGiIe6WLOPqycWXA40l+PWsxthUw==",
-      "license": "Apache-2.0"
-    },
-    "node_modules/clone": {
-      "version": "2.1.2",
-      "resolved": "https://registry.npmjs.org/clone/-/clone-2.1.2.tgz",
-      "integrity": "sha512-3Pe/CF1Nn94hyhIYpjtiLhdCoEoz0DqQ+988E9gmeEdQZlojxnOb74wctFyuwWQHzqyf9X7C7MG8juUpqBJT8w==",
-      "license": "MIT",
-      "engines": {
-        "node": ">=0.8"
-      }
-    },
-    "node_modules/combined-stream": {
-      "version": "1.0.8",
-      "resolved": "https://registry.npmjs.org/combined-stream/-/combined-stream-1.0.8.tgz",
-      "integrity": "sha512-FQN4MRfuJeHf7cBbBMJFXhKSDq+2kAArBlmRBvcvFE5BB1HZKXtSFASDhdlz9zOYwxh8lDdnvmMOe/+5cdoEdg==",
-      "license": "MIT",
-      "dependencies": {
-        "delayed-stream": "~1.0.0"
-      },
-      "engines": {
-        "node": ">= 0.8"
-      }
-    },
-    "node_modules/core-util-is": {
-      "version": "1.0.2",
-      "resolved": "https://registry.npmjs.org/core-util-is/-/core-util-is-1.0.2.tgz",
-      "integrity": "sha512-3lqz5YjWTYnW6dlDa5TLaTCcShfar1e40rmcJVwCBJC6mWlFuj0eCHIElmG1g5kyuJ/GD+8Wn4FFCcz4gJPfaQ==",
-      "license": "MIT"
-    },
-    "node_modules/dashdash": {
-      "version": "1.14.1",
-      "resolved": "https://registry.npmjs.org/dashdash/-/dashdash-1.14.1.tgz",
-      "integrity": "sha512-jRFi8UDGo6j+odZiEpjazZaWqEal3w/basFjQHQEwVtZJGDpxbH1MeYluwCS8Xq5wmLJooDlMgvVarmWfGM44g==",
-      "license": "MIT",
-      "dependencies": {
-        "assert-plus": "^1.0.0"
-      },
-      "engines": {
-        "node": ">=0.10"
-      }
-    },
-    "node_modules/delayed-stream": {
-      "version": "1.0.0",
-      "resolved": "https://registry.npmjs.org/delayed-stream/-/delayed-stream-1.0.0.tgz",
-      "integrity": "sha512-ZySD7Nf91aLB0RxL4KGrKHBXl7Eds1DAmEdcoVawXnLD7SDhpNgtuII2aAkg7a7QS41jxPSZ17p4VdGnMHk3MQ==",
-      "license": "MIT",
-      "engines": {
-        "node": ">=0.4.0"
-      }
-    },
-    "node_modules/dunder-proto": {
-      "version": "1.0.1",
-      "resolved": "https://registry.npmjs.org/dunder-proto/-/dunder-proto-1.0.1.tgz",
-      "integrity": "sha512-KIN/nDJBQRcXw0MLVhZE9iQHmG68qAVIBg9CqmUYjmQIhgij9U5MFvrqkUL5FbtyyzZuOeOt0zdeRe4UY7ct+A==",
-      "license": "MIT",
-      "dependencies": {
-        "call-bind-apply-helpers": "^1.0.1",
-        "es-errors": "^1.3.0",
-        "gopd": "^1.2.0"
-      },
-      "engines": {
-        "node": ">= 0.4"
-      }
-    },
-    "node_modules/ecc-jsbn": {
-      "version": "0.1.2",
-      "resolved": "https://registry.npmjs.org/ecc-jsbn/-/ecc-jsbn-0.1.2.tgz",
-      "integrity": "sha512-eh9O+hwRHNbG4BLTjEl3nw044CkGm5X6LoaCf7LPp7UU8Qrt47JYNi6nPX8xjW97TKGKm1ouctg0QSpZe9qrnw==",
-      "license": "MIT",
-      "dependencies": {
-        "jsbn": "~0.1.0",
-        "safer-buffer": "^2.1.0"
-      }
-    },
-    "node_modules/ecdsa-sig-formatter": {
-      "version": "1.0.11",
-      "resolved": "https://registry.npmjs.org/ecdsa-sig-formatter/-/ecdsa-sig-formatter-1.0.11.tgz",
-      "integrity": "sha512-nagl3RYrbNv6kQkeJIpt6NJZy8twLB/2vtz6yN9Z4vRKHN4/QZJIEbqohALSgwKdnksuY3k5Addp5lg8sVoVcQ==",
-      "license": "Apache-2.0",
-      "dependencies": {
-        "safe-buffer": "^5.0.1"
-      }
-    },
-    "node_modules/es-define-property": {
-      "version": "1.0.1",
-      "resolved": "https://registry.npmjs.org/es-define-property/-/es-define-property-1.0.1.tgz",
-      "integrity": "sha512-e3nRfgfUZ4rNGL232gUgX06QNyyez04KdjFrF+LTRoOXmrOgFKDg4BCdsjW8EnT69eqdYGmRpJwiPVYNrCaW3g==",
-      "license": "MIT",
-      "engines": {
-        "node": ">= 0.4"
-      }
-    },
-    "node_modules/es-errors": {
-      "version": "1.3.0",
-      "resolved": "https://registry.npmjs.org/es-errors/-/es-errors-1.3.0.tgz",
-      "integrity": "sha512-Zf5H2Kxt2xjTvbJvP2ZWLEICxA6j+hAmMzIlypy4xcBg1vKVnx89Wy0GbS+kf5cwCVFFzdCFh2XSCFNULS6csw==",
-      "license": "MIT",
-      "engines": {
-        "node": ">= 0.4"
-      }
-    },
-    "node_modules/es-object-atoms": {
-      "version": "1.1.1",
-      "resolved": "https://registry.npmjs.org/es-object-atoms/-/es-object-atoms-1.1.1.tgz",
-      "integrity": "sha512-FGgH2h8zKNim9ljj7dankFPcICIK9Cp5bm+c2gQSYePhpaG5+esrLODihIorn+Pe6FGJzWhXQotPv73jTaldXA==",
-      "license": "MIT",
-      "dependencies": {
-        "es-errors": "^1.3.0"
-      },
-      "engines": {
-        "node": ">= 0.4"
-      }
-    },
-    "node_modules/extend": {
-      "version": "3.0.2",
-      "resolved": "https://registry.npmjs.org/extend/-/extend-3.0.2.tgz",
-      "integrity": "sha512-fjquC59cD7CyW6urNXK0FBufkZcoiGG80wTuPujX590cB5Ttln20E2UB4S/WARVqhXffZl2LNgS+gQdPIIim/g==",
-      "license": "MIT"
-    },
-    "node_modules/extsprintf": {
-      "version": "1.3.0",
-      "resolved": "https://registry.npmjs.org/extsprintf/-/extsprintf-1.3.0.tgz",
-      "integrity": "sha512-11Ndz7Nv+mvAC1j0ktTa7fAb0vLyGGX+rMHNBYQviQDGU0Hw7lhctJANqbPhu9nV9/izT/IntTgZ7Im/9LJs9g==",
-      "engines": [
-        "node >=0.6.0"
-      ],
-      "license": "MIT"
-    },
-    "node_modules/fast-deep-equal": {
-      "version": "3.1.3",
-      "resolved": "https://registry.npmjs.org/fast-deep-equal/-/fast-deep-equal-3.1.3.tgz",
-      "integrity": "sha512-f3qQ9oQy9j2AhBe/H9VC91wLmKBCCU/gDOnKNAYG5hswO7BLKj09Hc5HYNz9cGI++xlpDCIgDaitVs03ATR84Q==",
-      "license": "MIT"
-    },
-    "node_modules/fast-json-stable-stringify": {
-      "version": "2.1.0",
-      "resolved": "https://registry.npmjs.org/fast-json-stable-stringify/-/fast-json-stable-stringify-2.1.0.tgz",
-      "integrity": "sha512-lhd/wF+Lk98HZoTCtlVraHtfh5XYijIjalXck7saUtuanSDyLMxnHhSXEDJqHxD7msR8D0uCmqlkwjCV8xvwHw==",
-      "license": "MIT"
-    },
-    "node_modules/follow-redirects": {
-      "version": "1.15.11",
-      "resolved": "https://registry.npmjs.org/follow-redirects/-/follow-redirects-1.15.11.tgz",
-      "integrity": "sha512-deG2P0JfjrTxl50XGCDyfI97ZGVCxIpfKYmfyrQ54n5FO/0gfIES8C/Psl6kWVDolizcaaxZJnTS0QSMxvnsBQ==",
-      "funding": [
-        {
-          "type": "individual",
-          "url": "https://github.com/sponsors/RubenVerborgh"
-        }
-      ],
-      "license": "MIT",
-      "engines": {
-        "node": ">=4.0"
-      },
-      "peerDependenciesMeta": {
-        "debug": {
-          "optional": true
-        }
-      }
-    },
-    "node_modules/forever-agent": {
-      "version": "0.6.1",
-      "resolved": "https://registry.npmjs.org/forever-agent/-/forever-agent-0.6.1.tgz",
-      "integrity": "sha512-j0KLYPhm6zeac4lz3oJ3o65qvgQCcPubiyotZrXqEaG4hNagNYO8qdlUrX5vwqv9ohqeT/Z3j6+yW067yWWdUw==",
-      "license": "Apache-2.0",
-      "engines": {
-        "node": "*"
-      }
-    },
-    "node_modules/form-data": {
-      "version": "2.3.3",
-      "resolved": "https://registry.npmjs.org/form-data/-/form-data-2.3.3.tgz",
-      "integrity": "sha512-1lLKB2Mu3aGP1Q/2eCOx0fNbRMe7XdwktwOruhfqqd0rIJWwN4Dh+E3hrPSlDCXnSR7UtZ1N38rVXm+6+MEhJQ==",
-      "license": "MIT",
-      "dependencies": {
-        "asynckit": "^0.4.0",
-        "combined-stream": "^1.0.6",
-        "mime-types": "^2.1.12"
-      },
-      "engines": {
-        "node": ">= 0.12"
-      }
-    },
-    "node_modules/function-bind": {
-      "version": "1.1.2",
-      "resolved": "https://registry.npmjs.org/function-bind/-/function-bind-1.1.2.tgz",
-      "integrity": "sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==",
-      "license": "MIT",
-      "funding": {
-        "url": "https://github.com/sponsors/ljharb"
-      }
-    },
-    "node_modules/get-intrinsic": {
-      "version": "1.3.0",
-      "resolved": "https://registry.npmjs.org/get-intrinsic/-/get-intrinsic-1.3.0.tgz",
-      "integrity": "sha512-9fSjSaos/fRIVIp+xSJlE6lfwhES7LNtKaCBIamHsjr2na1BiABJPo0mOjjz8GJDURarmCPGqaiVg5mfjb98CQ==",
-      "license": "MIT",
-      "dependencies": {
-        "call-bind-apply-helpers": "^1.0.2",
-        "es-define-property": "^1.0.1",
-        "es-errors": "^1.3.0",
-        "es-object-atoms": "^1.1.1",
-        "function-bind": "^1.1.2",
-        "get-proto": "^1.0.1",
-        "gopd": "^1.2.0",
-        "has-symbols": "^1.1.0",
-        "hasown": "^2.0.2",
-        "math-intrinsics": "^1.1.0"
-      },
-      "engines": {
-        "node": ">= 0.4"
-      },
-      "funding": {
-        "url": "https://github.com/sponsors/ljharb"
-      }
-    },
-    "node_modules/get-proto": {
-      "version": "1.0.1",
-      "resolved": "https://registry.npmjs.org/get-proto/-/get-proto-1.0.1.tgz",
-      "integrity": "sha512-sTSfBjoXBp89JvIKIefqw7U2CCebsc74kiY6awiGogKtoSGbgjYE/G/+l9sF3MWFPNc9IcoOC4ODfKHfxFmp0g==",
-      "license": "MIT",
-      "dependencies": {
-        "dunder-proto": "^1.0.1",
-        "es-object-atoms": "^1.0.0"
-      },
-      "engines": {
-        "node": ">= 0.4"
-      }
-    },
-    "node_modules/getpass": {
-      "version": "0.1.7",
-      "resolved": "https://registry.npmjs.org/getpass/-/getpass-0.1.7.tgz",
-      "integrity": "sha512-0fzj9JxOLfJ+XGLhR8ze3unN0KZCgZwiSSDz168VERjK8Wl8kVSdcu2kspd4s4wtAa1y/qrVRiAA0WclVsu0ng==",
-      "license": "MIT",
-      "dependencies": {
-        "assert-plus": "^1.0.0"
-      }
-    },
-    "node_modules/gopd": {
-      "version": "1.2.0",
-      "resolved": "https://registry.npmjs.org/gopd/-/gopd-1.2.0.tgz",
-      "integrity": "sha512-ZUKRh6/kUFoAiTAtTYPZJ3hw9wNxx+BIBOijnlG9PnrJsCcSjs1wyyD6vJpaYtgnzDrKYRSqf3OO6Rfa93xsRg==",
-      "license": "MIT",
-      "engines": {
-        "node": ">= 0.4"
-      },
-      "funding": {
-        "url": "https://github.com/sponsors/ljharb"
-      }
-    },
-    "node_modules/har-schema": {
-      "version": "2.0.0",
-      "resolved": "https://registry.npmjs.org/har-schema/-/har-schema-2.0.0.tgz",
-      "integrity": "sha512-Oqluz6zhGX8cyRaTQlFMPw80bSJVG2x/cFb8ZPhUILGgHka9SsokCCOQgpveePerqidZOrT14ipqfJb7ILcW5Q==",
-      "license": "ISC",
-      "engines": {
-        "node": ">=4"
-      }
-    },
-    "node_modules/har-validator": {
-      "version": "5.1.5",
-      "resolved": "https://registry.npmjs.org/har-validator/-/har-validator-5.1.5.tgz",
-      "integrity": "sha512-nmT2T0lljbxdQZfspsno9hgrG3Uir6Ks5afism62poxqBM6sDnMEuPmzTq8XN0OEwqKLLdh1jQI3qyE66Nzb3w==",
-      "deprecated": "this library is no longer supported",
-      "license": "MIT",
-      "dependencies": {
-        "ajv": "^6.12.3",
-        "har-schema": "^2.0.0"
-      },
-      "engines": {
-        "node": ">=6"
-      }
-    },
-    "node_modules/has-symbols": {
-      "version": "1.1.0",
-      "resolved": "https://registry.npmjs.org/has-symbols/-/has-symbols-1.1.0.tgz",
-      "integrity": "sha512-1cDNdwJ2Jaohmb3sg4OmKaMBwuC48sYni5HUw2DvsC8LjGTLK9h+eb1X6RyuOHe4hT0ULCW68iomhjUoKUqlPQ==",
-      "license": "MIT",
-      "engines": {
-        "node": ">= 0.4"
-      },
-      "funding": {
-        "url": "https://github.com/sponsors/ljharb"
-      }
-    },
-    "node_modules/hasown": {
-      "version": "2.0.2",
-      "resolved": "https://registry.npmjs.org/hasown/-/hasown-2.0.2.tgz",
-      "integrity": "sha512-0hJU9SCPvmMzIBdZFqNPXWa6dqh7WdH0cII9y+CyS8rG3nL48Bclra9HmKhVVUHyPWNH5Y7xDwAB7bfgSjkUMQ==",
-      "license": "MIT",
-      "dependencies": {
-        "function-bind": "^1.1.2"
-      },
-      "engines": {
-        "node": ">= 0.4"
-      }
-    },
-    "node_modules/http-signature": {
-      "version": "1.2.0",
-      "resolved": "https://registry.npmjs.org/http-signature/-/http-signature-1.2.0.tgz",
-      "integrity": "sha512-CAbnr6Rz4CYQkLYUtSNXxQPUH2gK8f3iWexVlsnMeD+GjlsQ0Xsy1cOX+mN3dtxYomRy21CiOzU8Uhw6OwncEQ==",
-      "license": "MIT",
-      "dependencies": {
-        "assert-plus": "^1.0.0",
-        "jsprim": "^1.2.2",
-        "sshpk": "^1.7.0"
-      },
-      "engines": {
-        "node": ">=0.8",
-        "npm": ">=1.3.7"
-      }
-    },
-    "node_modules/humanize-ms": {
-      "version": "1.2.1",
-      "resolved": "https://registry.npmjs.org/humanize-ms/-/humanize-ms-1.2.1.tgz",
-      "integrity": "sha512-Fl70vYtsAFb/C06PTS9dZBo7ihau+Tu/DNCk/OyHhea07S+aeMWpFFkUaXRa8fI+ScZbEI8dfSxwY7gxZ9SAVQ==",
-      "license": "MIT",
-      "dependencies": {
-        "ms": "^2.0.0"
-      }
-    },
-    "node_modules/ieee754": {
-      "version": "1.2.1",
-      "resolved": "https://registry.npmjs.org/ieee754/-/ieee754-1.2.1.tgz",
-      "integrity": "sha512-dcyqhDvX1C46lXZcVqCpK+FtMRQVdIMN6/Df5js2zouUsqG7I6sFxitIC+7KYK29KdXOLHdu9zL4sFnoVQnqaA==",
-      "funding": [
-        {
-          "type": "github",
-          "url": "https://github.com/sponsors/feross"
-        },
-        {
-          "type": "patreon",
-          "url": "https://www.patreon.com/feross"
-        },
-        {
-          "type": "consulting",
-          "url": "https://feross.org/support"
-        }
-      ],
-      "license": "BSD-3-Clause"
-    },
-    "node_modules/is-stream": {
-      "version": "2.0.1",
-      "resolved": "https://registry.npmjs.org/is-stream/-/is-stream-2.0.1.tgz",
-      "integrity": "sha512-hFoiJiTl63nn+kstHGBtewWSKnQLpyb155KHheA1l39uvtO9nWIop1p3udqPcUd/xbF1VLMO4n7OI6p7RbngDg==",
-      "license": "MIT",
-      "engines": {
-        "node": ">=8"
-      },
-      "funding": {
-        "url": "https://github.com/sponsors/sindresorhus"
-      }
-    },
-    "node_modules/is-typedarray": {
-      "version": "1.0.0",
-      "resolved": "https://registry.npmjs.org/is-typedarray/-/is-typedarray-1.0.0.tgz",
-      "integrity": "sha512-cyA56iCMHAh5CdzjJIa4aohJyeO1YbwLi3Jc35MmRU6poroFjIGZzUzupGiRPOjgHg9TLu43xbpwXk523fMxKA==",
-      "license": "MIT"
-    },
-    "node_modules/isstream": {
-      "version": "0.1.2",
-      "resolved": "https://registry.npmjs.org/isstream/-/isstream-0.1.2.tgz",
-      "integrity": "sha512-Yljz7ffyPbrLpLngrMtZ7NduUgVvi6wG9RJ9IUcyCd59YQ911PBJphODUcbOVbqYfxe1wuYf/LJ8PauMRwsM/g==",
-      "license": "MIT"
-    },
-    "node_modules/jsbn": {
-      "version": "0.1.1",
-      "resolved": "https://registry.npmjs.org/jsbn/-/jsbn-0.1.1.tgz",
-      "integrity": "sha512-UVU9dibq2JcFWxQPA6KCqj5O42VOmAY3zQUfEKxU0KpTGXwNoCjkX1e13eHNvw/xPynt6pU0rZ1htjWTNTSXsg==",
-      "license": "MIT"
-    },
-    "node_modules/json-bigint": {
-      "version": "1.0.0",
-      "resolved": "https://registry.npmjs.org/json-bigint/-/json-bigint-1.0.0.tgz",
-      "integrity": "sha512-SiPv/8VpZuWbvLSMtTDU8hEfrZWg/mH/nV/b4o0CYbSxu1UIQPLdwKOCIyLQX+VIPO5vrLX3i8qtqFyhdPSUSQ==",
-      "license": "MIT",
-      "dependencies": {
-        "bignumber.js": "^9.0.0"
-      }
-    },
-    "node_modules/json-schema": {
-      "version": "0.4.0",
-      "resolved": "https://registry.npmjs.org/json-schema/-/json-schema-0.4.0.tgz",
-      "integrity": "sha512-es94M3nTIfsEPisRafak+HDLfHXnKBhV3vU5eqPcS3flIWqcxJWgXHXiey3YrpaNsanY5ei1VoYEbOzijuq9BA==",
-      "license": "(AFL-2.1 OR BSD-3-Clause)"
-    },
-    "node_modules/json-schema-traverse": {
-      "version": "0.4.1",
-      "resolved": "https://registry.npmjs.org/json-schema-traverse/-/json-schema-traverse-0.4.1.tgz",
-      "integrity": "sha512-xbbCH5dCYU5T8LcEhhuh7HJ88HXuW3qsI3Y0zOZFKfZEHcpWiHU/Jxzk629Brsab/mMiHQti9wMP+845RPe3Vg==",
-      "license": "MIT"
-    },
-    "node_modules/json-stringify-safe": {
-      "version": "5.0.1",
-      "resolved": "https://registry.npmjs.org/json-stringify-safe/-/json-stringify-safe-5.0.1.tgz",
-      "integrity": "sha512-ZClg6AaYvamvYEE82d3Iyd3vSSIjQ+odgjaTzRuO3s7toCdFKczob2i0zCh7JE8kWn17yvAWhUVxvqGwUalsRA==",
-      "license": "ISC"
-    },
-    "node_modules/jsonwebtoken": {
-      "version": "8.5.1",
-      "resolved": "https://registry.npmjs.org/jsonwebtoken/-/jsonwebtoken-8.5.1.tgz",
-      "integrity": "sha512-XjwVfRS6jTMsqYs0EsuJ4LGxXV14zQybNd4L2r0UvbVnSF9Af8x7p5MzbJ90Ioz/9TI41/hTCvznF/loiSzn8w==",
-      "license": "MIT",
-      "dependencies": {
-        "jws": "^3.2.2",
-        "lodash.includes": "^4.3.0",
-        "lodash.isboolean": "^3.0.3",
-        "lodash.isinteger": "^4.0.4",
-        "lodash.isnumber": "^3.0.3",
-        "lodash.isplainobject": "^4.0.6",
-        "lodash.isstring": "^4.0.1",
-        "lodash.once": "^4.0.0",
-        "ms": "^2.1.1",
-        "semver": "^5.6.0"
-      },
-      "engines": {
-        "node": ">=4",
-        "npm": ">=1.4.28"
-      }
-    },
-    "node_modules/jsprim": {
-      "version": "1.4.2",
-      "resolved": "https://registry.npmjs.org/jsprim/-/jsprim-1.4.2.tgz",
-      "integrity": "sha512-P2bSOMAc/ciLz6DzgjVlGJP9+BrJWu5UDGK70C2iweC5QBIeFf0ZXRvGjEj2uYgrY2MkAAhsSWHDWlFtEroZWw==",
-      "license": "MIT",
-      "dependencies": {
-        "assert-plus": "1.0.0",
-        "extsprintf": "1.3.0",
-        "json-schema": "0.4.0",
-        "verror": "1.10.0"
-      },
-      "engines": {
-        "node": ">=0.6.0"
-      }
-    },
-    "node_modules/jwa": {
-      "version": "1.4.2",
-      "resolved": "https://registry.npmjs.org/jwa/-/jwa-1.4.2.tgz",
-      "integrity": "sha512-eeH5JO+21J78qMvTIDdBXidBd6nG2kZjg5Ohz/1fpa28Z4CcsWUzJ1ZZyFq/3z3N17aZy+ZuBoHljASbL1WfOw==",
-      "license": "MIT",
-      "dependencies": {
-        "buffer-equal-constant-time": "^1.0.1",
-        "ecdsa-sig-formatter": "1.0.11",
-        "safe-buffer": "^5.0.1"
-      }
-    },
-    "node_modules/jws": {
-      "version": "3.2.2",
-      "resolved": "https://registry.npmjs.org/jws/-/jws-3.2.2.tgz",
-      "integrity": "sha512-YHlZCB6lMTllWDtSPHz/ZXTsi8S00usEV6v1tjq8tOUZzw7DpSDWVXjXDre6ed1w/pd495ODpHZYSdkRTsa0HA==",
-      "license": "MIT",
-      "dependencies": {
-        "jwa": "^1.4.1",
-        "safe-buffer": "^5.0.1"
-      }
-    },
-    "node_modules/lodash.clonedeep": {
-      "version": "4.5.0",
-      "resolved": "https://registry.npmjs.org/lodash.clonedeep/-/lodash.clonedeep-4.5.0.tgz",
-      "integrity": "sha512-H5ZhCF25riFd9uB5UCkVKo61m3S/xZk1x4wA6yp/L3RFP6Z/eHH1ymQcGLo7J3GMPfm0V/7m1tryHuGVxpqEBQ==",
-      "license": "MIT"
-    },
-    "node_modules/lodash.includes": {
-      "version": "4.3.0",
-      "resolved": "https://registry.npmjs.org/lodash.includes/-/lodash.includes-4.3.0.tgz",
-      "integrity": "sha512-W3Bx6mdkRTGtlJISOvVD/lbqjTlPPUDTMnlXZFnVwi9NKJ6tiAk6LVdlhZMm17VZisqhKcgzpO5Wz91PCt5b0w==",
-      "license": "MIT"
-    },
-    "node_modules/lodash.isboolean": {
-      "version": "3.0.3",
-      "resolved": "https://registry.npmjs.org/lodash.isboolean/-/lodash.isboolean-3.0.3.tgz",
-      "integrity": "sha512-Bz5mupy2SVbPHURB98VAcw+aHh4vRV5IPNhILUCsOzRmsTmSQ17jIuqopAentWoehktxGd9e/hbIXq980/1QJg==",
-      "license": "MIT"
-    },
-    "node_modules/lodash.isinteger": {
-      "version": "4.0.4",
-      "resolved": "https://registry.npmjs.org/lodash.isinteger/-/lodash.isinteger-4.0.4.tgz",
-      "integrity": "sha512-DBwtEWN2caHQ9/imiNeEA5ys1JoRtRfY3d7V9wkqtbycnAmTvRRmbHKDV4a0EYc678/dia0jrte4tjYwVBaZUA==",
-      "license": "MIT"
-    },
-    "node_modules/lodash.isnumber": {
-      "version": "3.0.3",
-      "resolved": "https://registry.npmjs.org/lodash.isnumber/-/lodash.isnumber-3.0.3.tgz",
-      "integrity": "sha512-QYqzpfwO3/CWf3XP+Z+tkQsfaLL/EnUlXWVkIk5FUPc4sBdTehEqZONuyRt2P67PXAk+NXmTBcc97zw9t1FQrw==",
-      "license": "MIT"
-    },
-    "node_modules/lodash.isplainobject": {
-      "version": "4.0.6",
-      "resolved": "https://registry.npmjs.org/lodash.isplainobject/-/lodash.isplainobject-4.0.6.tgz",
-      "integrity": "sha512-oSXzaWypCMHkPC3NvBEaPHf0KsA5mvPrOPgQWDsbg8n7orZ290M0BmC/jgRZ4vcJ6DTAhjrsSYgdsW/F+MFOBA==",
-      "license": "MIT"
-    },
-    "node_modules/lodash.isstring": {
-      "version": "4.0.1",
-      "resolved": "https://registry.npmjs.org/lodash.isstring/-/lodash.isstring-4.0.1.tgz",
-      "integrity": "sha512-0wJxfxH1wgO3GrbuP+dTTk7op+6L41QCXbGINEmD+ny/G/eCqGzxyCsh7159S+mgDDcoarnBw6PC1PS5+wUGgw==",
-      "license": "MIT"
-    },
-    "node_modules/lodash.once": {
-      "version": "4.1.1",
-      "resolved": "https://registry.npmjs.org/lodash.once/-/lodash.once-4.1.1.tgz",
-      "integrity": "sha512-Sb487aTOCr9drQVL8pIxOzVhafOjZN9UU54hiN8PU3uAiSV7lx1yYNpbNmex2PK6dSJoNTSJUUswT651yww3Mg==",
-      "license": "MIT"
-    },
-    "node_modules/lodash.set": {
-      "version": "4.3.2",
-      "resolved": "https://registry.npmjs.org/lodash.set/-/lodash.set-4.3.2.tgz",
-      "integrity": "sha512-4hNPN5jlm/N/HLMCO43v8BXKq9Z7QdAGc/VGrRD61w8gN9g/6jF9A4L1pbUgBLCffi0w9VsXfTOij5x8iTyFvg==",
-      "license": "MIT"
-    },
-    "node_modules/lodash.unset": {
-      "version": "4.5.2",
-      "resolved": "https://registry.npmjs.org/lodash.unset/-/lodash.unset-4.5.2.tgz",
-      "integrity": "sha512-bwKX88k2JhCV9D1vtE8+naDKlLiGrSmf8zi/Y9ivFHwbmRfA8RxS/aVJ+sIht2XOwqoNr4xUPUkGZpc1sHFEKg==",
-      "license": "MIT"
-    },
-    "node_modules/long": {
-      "version": "5.3.2",
-      "resolved": "https://registry.npmjs.org/long/-/long-5.3.2.tgz",
-      "integrity": "sha512-mNAgZ1GmyNhD7AuqnTG3/VQ26o760+ZYBPKjPvugO8+nLbYfX6TVpJPseBvopbdY+qpZ/lKUnmEc1LeZYS3QAA==",
-      "license": "Apache-2.0"
-    },
-    "node_modules/math-intrinsics": {
-      "version": "1.1.0",
-      "resolved": "https://registry.npmjs.org/math-intrinsics/-/math-intrinsics-1.1.0.tgz",
-      "integrity": "sha512-/IXtbwEk5HTPyEwyKX6hGkYXxM9nbj64B+ilVJnC/R6B0pH5G4V3b0pVbL7DBj4tkhBAppbQUlf6F6Xl9LHu1g==",
-      "license": "MIT",
-      "engines": {
-        "node": ">= 0.4"
-      }
-    },
-    "node_modules/mime-db": {
-      "version": "1.52.0",
-      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.52.0.tgz",
-      "integrity": "sha512-sPU4uV7dYlvtWJxwwxHD0PuihVNiE7TyAbQ5SWxDCB9mUYvOgroQOwYQQOKPJ8CIbE+1ETVlOoK1UC2nU3gYvg==",
-      "license": "MIT",
-      "engines": {
-        "node": ">= 0.6"
-      }
-    },
-    "node_modules/mime-types": {
-      "version": "2.1.35",
-      "resolved": "https://registry.npmjs.org/mime-types/-/mime-types-2.1.35.tgz",
-      "integrity": "sha512-ZDY+bPm5zTTF+YpCrAU9nK0UgICYPT0QtT1NZWFv4s++TNkcgVaT0g6+4R2uI4MjQjzysHB1zxuWL50hzaeXiw==",
-      "license": "MIT",
-      "dependencies": {
-        "mime-db": "1.52.0"
-      },
-      "engines": {
-        "node": ">= 0.6"
-      }
-    },
-    "node_modules/ms": {
-      "version": "2.1.3",
-      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
-      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
-      "license": "MIT"
-    },
-    "node_modules/oauth-sign": {
-      "version": "0.9.0",
-      "resolved": "https://registry.npmjs.org/oauth-sign/-/oauth-sign-0.9.0.tgz",
-      "integrity": "sha512-fexhUFFPTGV8ybAtSIGbV6gOkSv8UtRbDBnAyLQw4QPKkgNlsH2ByPGtMUqdWkos6YCRmAqViwgZrJc/mRDzZQ==",
-      "license": "Apache-2.0",
-      "engines": {
-        "node": "*"
-      }
-    },
-    "node_modules/object-inspect": {
-      "version": "1.13.4",
-      "resolved": "https://registry.npmjs.org/object-inspect/-/object-inspect-1.13.4.tgz",
-      "integrity": "sha512-W67iLl4J2EXEGTbfeHCffrjDfitvLANg0UlX3wFUUSTx92KXRFegMHUVgSqE+wvhAbi4WqjGg9czysTV2Epbew==",
-      "license": "MIT",
-      "engines": {
-        "node": ">= 0.4"
-      },
-      "funding": {
-        "url": "https://github.com/sponsors/ljharb"
-      }
-    },
-    "node_modules/performance-now": {
-      "version": "2.1.0",
-      "resolved": "https://registry.npmjs.org/performance-now/-/performance-now-2.1.0.tgz",
-      "integrity": "sha512-7EAHlyLHI56VEIdK57uwHdHKIaAGbnXPiw0yWbarQZOKaKpvUIgW0jWRVLiatnM+XXlSwsanIBH/hzGMJulMow==",
-      "license": "MIT"
-    },
-    "node_modules/protobufjs": {
-      "version": "7.5.3",
-      "resolved": "https://registry.npmjs.org/protobufjs/-/protobufjs-7.5.3.tgz",
-      "integrity": "sha512-sildjKwVqOI2kmFDiXQ6aEB0fjYTafpEvIBs8tOR8qI4spuL9OPROLVu2qZqi/xgCfsHIwVqlaF8JBjWFHnKbw==",
-      "hasInstallScript": true,
-      "license": "BSD-3-Clause",
-      "dependencies": {
-        "@protobufjs/aspromise": "^1.1.2",
-        "@protobufjs/base64": "^1.1.2",
-        "@protobufjs/codegen": "^2.0.4",
-        "@protobufjs/eventemitter": "^1.1.0",
-        "@protobufjs/fetch": "^1.1.0",
-        "@protobufjs/float": "^1.0.2",
-        "@protobufjs/inquire": "^1.1.0",
-        "@protobufjs/path": "^1.1.2",
-        "@protobufjs/pool": "^1.1.0",
-        "@protobufjs/utf8": "^1.1.0",
-        "@types/node": ">=13.7.0",
-        "long": "^5.0.0"
-      },
-      "engines": {
-        "node": ">=12.0.0"
-      }
-    },
-    "node_modules/psl": {
-      "version": "1.15.0",
-      "resolved": "https://registry.npmjs.org/psl/-/psl-1.15.0.tgz",
-      "integrity": "sha512-JZd3gMVBAVQkSs6HdNZo9Sdo0LNcQeMNP3CozBJb3JYC/QUYZTnKxP+f8oWRX4rHP5EurWxqAHTSwUCjlNKa1w==",
-      "license": "MIT",
-      "dependencies": {
-        "punycode": "^2.3.1"
-      },
-      "funding": {
-        "url": "https://github.com/sponsors/lupomontero"
-      }
-    },
-    "node_modules/punycode": {
-      "version": "2.3.1",
-      "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.3.1.tgz",
-      "integrity": "sha512-vYt7UD1U9Wg6138shLtLOvdAu+8DsC/ilFtEVHcH+wydcSpNE20AfSOduf6MkRFahL5FY7X1oU7nKVZFtfq8Fg==",
-      "license": "MIT",
-      "engines": {
-        "node": ">=6"
-      }
-    },
-    "node_modules/qs": {
-      "version": "6.5.3",
-      "resolved": "https://registry.npmjs.org/qs/-/qs-6.5.3.tgz",
-      "integrity": "sha512-qxXIEh4pCGfHICj1mAJQ2/2XVZkjCDTcEgfoSQxc/fYivUZxTkk7L3bDBJSoNrEzXI17oUO5Dp07ktqE5KzczA==",
-      "license": "BSD-3-Clause",
-      "engines": {
-        "node": ">=0.6"
-      }
-    },
-    "node_modules/request": {
-      "version": "2.88.2",
-      "resolved": "https://registry.npmjs.org/request/-/request-2.88.2.tgz",
-      "integrity": "sha512-MsvtOrfG9ZcrOwAW+Qi+F6HbD0CWXEh9ou77uOb7FM2WPhwT7smM833PzanhJLsgXjN89Ir6V2PczXNnMpwKhw==",
-      "deprecated": "request has been deprecated, see https://github.com/request/request/issues/3142",
-      "license": "Apache-2.0",
-      "dependencies": {
-        "aws-sign2": "~0.7.0",
-        "aws4": "^1.8.0",
-        "caseless": "~0.12.0",
-        "combined-stream": "~1.0.6",
-        "extend": "~3.0.2",
-        "forever-agent": "~0.6.1",
-        "form-data": "~2.3.2",
-        "har-validator": "~5.1.3",
-        "http-signature": "~1.2.0",
-        "is-typedarray": "~1.0.0",
-        "isstream": "~0.1.2",
-        "json-stringify-safe": "~5.0.1",
-        "mime-types": "~2.1.19",
-        "oauth-sign": "~0.9.0",
-        "performance-now": "^2.1.0",
-        "qs": "~6.5.2",
-        "safe-buffer": "^5.1.2",
-        "tough-cookie": "~2.5.0",
-        "tunnel-agent": "^0.6.0",
-        "uuid": "^3.3.2"
-      },
-      "engines": {
-        "node": ">= 6"
-      }
-    },
-    "node_modules/retry": {
-      "version": "0.13.1",
-      "resolved": "https://registry.npmjs.org/retry/-/retry-0.13.1.tgz",
-      "integrity": "sha512-XQBQ3I8W1Cge0Seh+6gjj03LbmRFWuoszgK9ooCpwYIrhhoO80pfq4cUkU5DkknwfOfFteRwlZ56PYOGYyFWdg==",
-      "license": "MIT",
-      "engines": {
-        "node": ">= 4"
-      }
-    },
-    "node_modules/safe-buffer": {
-      "version": "5.2.1",
-      "resolved": "https://registry.npmjs.org/safe-buffer/-/safe-buffer-5.2.1.tgz",
-      "integrity": "sha512-rp3So07KcdmmKbGvgaNxQSJr7bGVSVk5S9Eq1F+ppbRo70+YeaDxkw5Dd8NPN+GD6bjnYm2VuPuCXmpuYvmCXQ==",
-      "funding": [
-        {
-          "type": "github",
-          "url": "https://github.com/sponsors/feross"
-        },
-        {
-          "type": "patreon",
-          "url": "https://www.patreon.com/feross"
-        },
-        {
-          "type": "consulting",
-          "url": "https://feross.org/support"
-        }
-      ],
-      "license": "MIT"
-    },
-    "node_modules/safer-buffer": {
-      "version": "2.1.2",
-      "resolved": "https://registry.npmjs.org/safer-buffer/-/safer-buffer-2.1.2.tgz",
-      "integrity": "sha512-YZo3K82SD7Riyi0E1EQPojLz7kpepnSQI9IyPbHHg1XXXevb5dJI7tpyN2ADxGcQbHG7vcyRHk0cbwqcQriUtg==",
-      "license": "MIT"
-    },
-    "node_modules/sax": {
-      "version": "1.4.1",
-      "resolved": "https://registry.npmjs.org/sax/-/sax-1.4.1.tgz",
-      "integrity": "sha512-+aWOz7yVScEGoKNd4PA10LZ8sk0A/z5+nXQG5giUO5rprX9jgYsTdov9qCchZiPIZezbZH+jRut8nPodFAX4Jg==",
-      "license": "ISC"
-    },
-    "node_modules/semver": {
-      "version": "5.7.2",
-      "resolved": "https://registry.npmjs.org/semver/-/semver-5.7.2.tgz",
-      "integrity": "sha512-cBznnQ9KjJqU67B52RMC65CMarK2600WFnbkcaiwWq3xy/5haFJlshgnpjovMVJ+Hff49d8GEn0b87C5pDQ10g==",
-      "license": "ISC",
-      "bin": {
-        "semver": "bin/semver"
-      }
-    },
-    "node_modules/side-channel": {
-      "version": "1.1.0",
-      "resolved": "https://registry.npmjs.org/side-channel/-/side-channel-1.1.0.tgz",
-      "integrity": "sha512-ZX99e6tRweoUXqR+VBrslhda51Nh5MTQwou5tnUDgbtyM0dBgmhEDtWGP/xbKn6hqfPRHujUNwz5fy/wbbhnpw==",
-      "license": "MIT",
-      "dependencies": {
-        "es-errors": "^1.3.0",
-        "object-inspect": "^1.13.3",
-        "side-channel-list": "^1.0.0",
-        "side-channel-map": "^1.0.1",
-        "side-channel-weakmap": "^1.0.2"
-      },
-      "engines": {
-        "node": ">= 0.4"
-      },
-      "funding": {
-        "url": "https://github.com/sponsors/ljharb"
-      }
-    },
-    "node_modules/side-channel-list": {
-      "version": "1.0.0",
-      "resolved": "https://registry.npmjs.org/side-channel-list/-/side-channel-list-1.0.0.tgz",
-      "integrity": "sha512-FCLHtRD/gnpCiCHEiJLOwdmFP+wzCmDEkc9y7NsYxeF4u7Btsn1ZuwgwJGxImImHicJArLP4R0yX4c2KCrMrTA==",
-      "license": "MIT",
-      "dependencies": {
-        "es-errors": "^1.3.0",
-        "object-inspect": "^1.13.3"
-      },
-      "engines": {
-        "node": ">= 0.4"
-      },
-      "funding": {
-        "url": "https://github.com/sponsors/ljharb"
-      }
-    },
-    "node_modules/side-channel-map": {
-      "version": "1.0.1",
-      "resolved": "https://registry.npmjs.org/side-channel-map/-/side-channel-map-1.0.1.tgz",
-      "integrity": "sha512-VCjCNfgMsby3tTdo02nbjtM/ewra6jPHmpThenkTYh8pG9ucZ/1P8So4u4FGBek/BjpOVsDCMoLA/iuBKIFXRA==",
-      "license": "MIT",
-      "dependencies": {
-        "call-bound": "^1.0.2",
-        "es-errors": "^1.3.0",
-        "get-intrinsic": "^1.2.5",
-        "object-inspect": "^1.13.3"
-      },
-      "engines": {
-        "node": ">= 0.4"
-      },
-      "funding": {
-        "url": "https://github.com/sponsors/ljharb"
-      }
-    },
-    "node_modules/side-channel-weakmap": {
-      "version": "1.0.2",
-      "resolved": "https://registry.npmjs.org/side-channel-weakmap/-/side-channel-weakmap-1.0.2.tgz",
-      "integrity": "sha512-WPS/HvHQTYnHisLo9McqBHOJk2FkHO/tlpvldyrnem4aeQp4hai3gythswg6p01oSoTl58rcpiFAjF2br2Ak2A==",
-      "license": "MIT",
-      "dependencies": {
-        "call-bound": "^1.0.2",
-        "es-errors": "^1.3.0",
-        "get-intrinsic": "^1.2.5",
-        "object-inspect": "^1.13.3",
-        "side-channel-map": "^1.0.1"
-      },
-      "engines": {
-        "node": ">= 0.4"
-      },
-      "funding": {
-        "url": "https://github.com/sponsors/ljharb"
-      }
-    },
-    "node_modules/sshpk": {
-      "version": "1.18.0",
-      "resolved": "https://registry.npmjs.org/sshpk/-/sshpk-1.18.0.tgz",
-      "integrity": "sha512-2p2KJZTSqQ/I3+HX42EpYOa2l3f8Erv8MWKsy2I9uf4wA7yFIkXRffYdsx86y6z4vHtV8u7g+pPlr8/4ouAxsQ==",
-      "license": "MIT",
-      "dependencies": {
-        "asn1": "~0.2.3",
-        "assert-plus": "^1.0.0",
-        "bcrypt-pbkdf": "^1.0.0",
-        "dashdash": "^1.12.0",
-        "ecc-jsbn": "~0.1.1",
-        "getpass": "^0.1.1",
-        "jsbn": "~0.1.0",
-        "safer-buffer": "^2.0.2",
-        "tweetnacl": "~0.14.0"
-      },
-      "bin": {
-        "sshpk-conv": "bin/sshpk-conv",
-        "sshpk-sign": "bin/sshpk-sign",
-        "sshpk-verify": "bin/sshpk-verify"
-      },
-      "engines": {
-        "node": ">=0.10.0"
-      }
-    },
-    "node_modules/tough-cookie": {
-      "version": "2.5.0",
-      "resolved": "https://registry.npmjs.org/tough-cookie/-/tough-cookie-2.5.0.tgz",
-      "integrity": "sha512-nlLsUzgm1kfLXSXfRZMc1KLAugd4hqJHDTvc2hDIwS3mZAfMEuMbc03SujMF+GEcpaX/qboeycw6iO8JwVv2+g==",
-      "license": "BSD-3-Clause",
-      "dependencies": {
-        "psl": "^1.1.28",
-        "punycode": "^2.1.1"
-      },
-      "engines": {
-        "node": ">=0.8"
-      }
-    },
-    "node_modules/tslib": {
-      "version": "1.14.1",
-      "resolved": "https://registry.npmjs.org/tslib/-/tslib-1.14.1.tgz",
-      "integrity": "sha512-Xni35NKzjgMrwevysHTCArtLDpPvye8zV/0E4EyYn43P7/7qvQwPh9BGkHewbMulVntbigmcT7rdX3BNo9wRJg==",
-      "license": "0BSD"
-    },
-    "node_modules/tunnel-agent": {
-      "version": "0.6.0",
-      "resolved": "https://registry.npmjs.org/tunnel-agent/-/tunnel-agent-0.6.0.tgz",
-      "integrity": "sha512-McnNiV1l8RYeY8tBgEpuodCC1mLUdbSN+CYBL7kJsJNInOP8UjDDEwdk6Mw60vdLLrr5NHKZhMAOSrR2NZuQ+w==",
-      "license": "Apache-2.0",
-      "dependencies": {
-        "safe-buffer": "^5.0.1"
-      },
-      "engines": {
-        "node": "*"
-      }
-    },
-    "node_modules/tweetnacl": {
-      "version": "0.14.5",
-      "resolved": "https://registry.npmjs.org/tweetnacl/-/tweetnacl-0.14.5.tgz",
-      "integrity": "sha512-KXXFFdAbFXY4geFIwoyNK+f5Z1b7swfXABfL7HXCmoIWMKU3dmS26672A4EeQtDzLKy7SXmfBu51JolvEKwtGA==",
-      "license": "Unlicense"
-    },
-    "node_modules/undici-types": {
-      "version": "7.10.0",
-      "resolved": "https://registry.npmjs.org/undici-types/-/undici-types-7.10.0.tgz",
-      "integrity": "sha512-t5Fy/nfn+14LuOc2KNYg75vZqClpAiqscVvMygNnlsHBFpSXdJaYtXMcdNLpl/Qvc3P2cB3s6lOV51nqsFq4ag==",
-      "license": "MIT"
-    },
-    "node_modules/uri-js": {
-      "version": "4.4.1",
-      "resolved": "https://registry.npmjs.org/uri-js/-/uri-js-4.4.1.tgz",
-      "integrity": "sha512-7rKUyy33Q1yc98pQ1DAmLtwX109F7TIfWlW1Ydo8Wl1ii1SeHieeh0HHfPeL2fMXK6z0s8ecKs9frCuLJvndBg==",
-      "license": "BSD-2-Clause",
-      "dependencies": {
-        "punycode": "^2.1.0"
-      }
-    },
-    "node_modules/url": {
-      "version": "0.11.4",
-      "resolved": "https://registry.npmjs.org/url/-/url-0.11.4.tgz",
-      "integrity": "sha512-oCwdVC7mTuWiPyjLUz/COz5TLk6wgp0RCsN+wHZ2Ekneac9w8uuV0njcbbie2ME+Vs+d6duwmYuR3HgQXs1fOg==",
-      "license": "MIT",
-      "dependencies": {
-        "punycode": "^1.4.1",
-        "qs": "^6.12.3"
-      },
-      "engines": {
-        "node": ">= 0.4"
-      }
-    },
-    "node_modules/url/node_modules/punycode": {
-      "version": "1.4.1",
-      "resolved": "https://registry.npmjs.org/punycode/-/punycode-1.4.1.tgz",
-      "integrity": "sha512-jmYNElW7yvO7TV33CjSmvSiE2yco3bV2czu/OzDKdMNVZQWfxCblURLhf+47syQRBntjfLdd/H0egrzIG+oaFQ==",
-      "license": "MIT"
-    },
-    "node_modules/url/node_modules/qs": {
-      "version": "6.14.0",
-      "resolved": "https://registry.npmjs.org/qs/-/qs-6.14.0.tgz",
-      "integrity": "sha512-YWWTjgABSKcvs/nWBi9PycY/JiPJqOD4JA6o9Sej2AtvSGarXxKC3OQSk4pAarbdQlKAh5D4FCQkJNkW+GAn3w==",
-      "license": "BSD-3-Clause",
-      "dependencies": {
-        "side-channel": "^1.1.0"
-      },
-      "engines": {
-        "node": ">=0.6"
-      },
-      "funding": {
-        "url": "https://github.com/sponsors/ljharb"
-      }
-    },
-    "node_modules/uuid": {
-      "version": "3.4.0",
-      "resolved": "https://registry.npmjs.org/uuid/-/uuid-3.4.0.tgz",
-      "integrity": "sha512-HjSDRw6gZE5JMggctHBcjVak08+KEVhSIiDzFnT9S9aegmp85S/bReBVTb4QTFaRNptJ9kuYaNhnbNEOkbKb/A==",
-      "deprecated": "Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.",
-      "license": "MIT",
-      "bin": {
-        "uuid": "bin/uuid"
-      }
-    },
-    "node_modules/verror": {
-      "version": "1.10.0",
-      "resolved": "https://registry.npmjs.org/verror/-/verror-1.10.0.tgz",
-      "integrity": "sha512-ZZKSmDAEFOijERBLkmYfJ+vmk3w+7hOLYDNkRCuRuMJGEmqYNCNLyBBFwWKVMhfwaEF3WOd0Zlw86U/WC/+nYw==",
-      "engines": [
-        "node >=0.6.0"
-      ],
-      "license": "MIT",
-      "dependencies": {
-        "assert-plus": "^1.0.0",
-        "core-util-is": "1.0.2",
-        "extsprintf": "^1.2.0"
-      }
-    },
-    "node_modules/wx-server-sdk": {
-      "version": "3.0.1",
-      "resolved": "https://registry.npmjs.org/wx-server-sdk/-/wx-server-sdk-3.0.1.tgz",
-      "integrity": "sha512-b53tbqTV9knXJIfcmWTmksQvk+BC54vTU6WZNwEvAJ3iOxrRhPitcygyiwFfMBWpFm9YvkwITEhU821XoG8llQ==",
-      "license": "MIT",
-      "dependencies": {
-        "@cloudbase/node-sdk": "2.10.0",
-        "json-bigint": "^1.0.0",
-        "protobufjs": "^7.2.4",
-        "tslib": "^1.9.3"
-      }
-    },
-    "node_modules/xml2js": {
-      "version": "0.5.0",
-      "resolved": "https://registry.npmjs.org/xml2js/-/xml2js-0.5.0.tgz",
-      "integrity": "sha512-drPFnkQJik/O+uPKpqSgr22mpuFHqKdbS835iAQrUC73L2F5WkboIRd63ai/2Yg6I1jzifPFKH2NTK+cfglkIA==",
-      "license": "MIT",
-      "dependencies": {
-        "sax": ">=0.6.0",
-        "xmlbuilder": "~11.0.0"
-      },
-      "engines": {
-        "node": ">=4.0.0"
-      }
-    },
-    "node_modules/xmlbuilder": {
-      "version": "11.0.1",
-      "resolved": "https://registry.npmjs.org/xmlbuilder/-/xmlbuilder-11.0.1.tgz",
-      "integrity": "sha512-fDlsI/kFEx7gLvbecc0/ohLG50fugQp8ryHzMTuW9vSa1GJ0XYWKnhsUx7oie3G98+r56aTQIUB4kht42R3JvA==",
-      "license": "MIT",
-      "engines": {
-        "node": ">=4.0"
-      }
-    }
-  }
-}
+{
+  "name": "grantShareReward",
+  "version": "1.0.0",
+  "lockfileVersion": 3,
+  "requires": true,
+  "packages": {
+    "": {
+      "name": "grantShareReward",
+      "version": "1.0.0",
+      "license": "ISC",
+      "dependencies": {
+        "wx-server-sdk": "latest"
+      }
+    },
+    "node_modules/@cloudbase/database": {
+      "version": "1.4.1",
+      "resolved": "https://registry.npmjs.org/@cloudbase/database/-/database-1.4.1.tgz",
+      "integrity": "sha512-BYLXHS6c+WhxAvvdak8Z3W+heScqBBPu/CQ76gC8v1Scuy5qf4qxuPWNzyoxde/eZsmc+BRRCFyIq4xUnIot8g==",
+      "license": "ISC",
+      "dependencies": {
+        "bson": "^4.0.3",
+        "lodash.clonedeep": "4.5.0",
+        "lodash.set": "4.3.2",
+        "lodash.unset": "4.5.2"
+      }
+    },
+    "node_modules/@cloudbase/node-sdk": {
+      "version": "2.10.0",
+      "resolved": "https://registry.npmjs.org/@cloudbase/node-sdk/-/node-sdk-2.10.0.tgz",
+      "integrity": "sha512-P9loxdwN6qG3iIzjx2Z3uBk/4iyn9+KoiWYGi9ZwhWP1toijpQu0+eLSAaMupNJecJopS21IWUmmGSetlZh8UA==",
+      "license": "MIT",
+      "dependencies": {
+        "@cloudbase/database": "1.4.1",
+        "@cloudbase/signature-nodejs": "1.0.0-beta.0",
+        "agentkeepalive": "^4.3.0",
+        "axios": "^0.21.1",
+        "jsonwebtoken": "^8.5.1",
+        "request": "^2.87.0",
+        "retry": "^0.13.1",
+        "xml2js": "^0.5.0"
+      },
+      "engines": {
+        "node": ">=8.6.0"
+      }
+    },
+    "node_modules/@cloudbase/signature-nodejs": {
+      "version": "1.0.0-beta.0",
+      "resolved": "https://registry.npmjs.org/@cloudbase/signature-nodejs/-/signature-nodejs-1.0.0-beta.0.tgz",
+      "integrity": "sha512-gpKqwsVk/D2PzvFamYNReymXSdvRSY90eZ1ARf+1wZ8oT6OpK9kr6nmevGykMxN1n17Gn92hBbWqAxU9o3+kAQ==",
+      "dependencies": {
+        "@types/clone": "^0.1.30",
+        "clone": "^2.1.2",
+        "is-stream": "^2.0.0",
+        "url": "^0.11.0"
+      }
+    },
+    "node_modules/@protobufjs/aspromise": {
+      "version": "1.1.2",
+      "resolved": "https://registry.npmjs.org/@protobufjs/aspromise/-/aspromise-1.1.2.tgz",
+      "integrity": "sha512-j+gKExEuLmKwvz3OgROXtrJ2UG2x8Ch2YZUxahh+s1F2HZ+wAceUNLkvy6zKCPVRkU++ZWQrdxsUeQXmcg4uoQ==",
+      "license": "BSD-3-Clause"
+    },
+    "node_modules/@protobufjs/base64": {
+      "version": "1.1.2",
+      "resolved": "https://registry.npmjs.org/@protobufjs/base64/-/base64-1.1.2.tgz",
+      "integrity": "sha512-AZkcAA5vnN/v4PDqKyMR5lx7hZttPDgClv83E//FMNhR2TMcLUhfRUBHCmSl0oi9zMgDDqRUJkSxO3wm85+XLg==",
+      "license": "BSD-3-Clause"
+    },
+    "node_modules/@protobufjs/codegen": {
+      "version": "2.0.4",
+      "resolved": "https://registry.npmjs.org/@protobufjs/codegen/-/codegen-2.0.4.tgz",
+      "integrity": "sha512-YyFaikqM5sH0ziFZCN3xDC7zeGaB/d0IUb9CATugHWbd1FRFwWwt4ld4OYMPWu5a3Xe01mGAULCdqhMlPl29Jg==",
+      "license": "BSD-3-Clause"
+    },
+    "node_modules/@protobufjs/eventemitter": {
+      "version": "1.1.0",
+      "resolved": "https://registry.npmjs.org/@protobufjs/eventemitter/-/eventemitter-1.1.0.tgz",
+      "integrity": "sha512-j9ednRT81vYJ9OfVuXG6ERSTdEL1xVsNgqpkxMsbIabzSo3goCjDIveeGv5d03om39ML71RdmrGNjG5SReBP/Q==",
+      "license": "BSD-3-Clause"
+    },
+    "node_modules/@protobufjs/fetch": {
+      "version": "1.1.0",
+      "resolved": "https://registry.npmjs.org/@protobufjs/fetch/-/fetch-1.1.0.tgz",
+      "integrity": "sha512-lljVXpqXebpsijW71PZaCYeIcE5on1w5DlQy5WH6GLbFryLUrBD4932W/E2BSpfRJWseIL4v/KPgBFxDOIdKpQ==",
+      "license": "BSD-3-Clause",
+      "dependencies": {
+        "@protobufjs/aspromise": "^1.1.1",
+        "@protobufjs/inquire": "^1.1.0"
+      }
+    },
+    "node_modules/@protobufjs/float": {
+      "version": "1.0.2",
+      "resolved": "https://registry.npmjs.org/@protobufjs/float/-/float-1.0.2.tgz",
+      "integrity": "sha512-Ddb+kVXlXst9d+R9PfTIxh1EdNkgoRe5tOX6t01f1lYWOvJnSPDBlG241QLzcyPdoNTsblLUdujGSE4RzrTZGQ==",
+      "license": "BSD-3-Clause"
+    },
+    "node_modules/@protobufjs/inquire": {
+      "version": "1.1.0",
+      "resolved": "https://registry.npmjs.org/@protobufjs/inquire/-/inquire-1.1.0.tgz",
+      "integrity": "sha512-kdSefcPdruJiFMVSbn801t4vFK7KB/5gd2fYvrxhuJYg8ILrmn9SKSX2tZdV6V+ksulWqS7aXjBcRXl3wHoD9Q==",
+      "license": "BSD-3-Clause"
+    },
+    "node_modules/@protobufjs/path": {
+      "version": "1.1.2",
+      "resolved": "https://registry.npmjs.org/@protobufjs/path/-/path-1.1.2.tgz",
+      "integrity": "sha512-6JOcJ5Tm08dOHAbdR3GrvP+yUUfkjG5ePsHYczMFLq3ZmMkAD98cDgcT2iA1lJ9NVwFd4tH/iSSoe44YWkltEA==",
+      "license": "BSD-3-Clause"
+    },
+    "node_modules/@protobufjs/pool": {
+      "version": "1.1.0",
+      "resolved": "https://registry.npmjs.org/@protobufjs/pool/-/pool-1.1.0.tgz",
+      "integrity": "sha512-0kELaGSIDBKvcgS4zkjz1PeddatrjYcmMWOlAuAPwAeccUrPHdUqo/J6LiymHHEiJT5NrF1UVwxY14f+fy4WQw==",
+      "license": "BSD-3-Clause"
+    },
+    "node_modules/@protobufjs/utf8": {
+      "version": "1.1.0",
+      "resolved": "https://registry.npmjs.org/@protobufjs/utf8/-/utf8-1.1.0.tgz",
+      "integrity": "sha512-Vvn3zZrhQZkkBE8LSuW3em98c0FwgO4nxzv6OdSxPKJIEKY2bGbHn+mhGIPerzI4twdxaP8/0+06HBpwf345Lw==",
+      "license": "BSD-3-Clause"
+    },
+    "node_modules/@types/clone": {
+      "version": "0.1.30",
+      "resolved": "https://registry.npmjs.org/@types/clone/-/clone-0.1.30.tgz",
+      "integrity": "sha512-vcxBr+ybljeSiasmdke1cQ9ICxoEwaBgM1OQ/P5h4MPj/kRyLcDl5L8PrftlbyV1kBbJIs3M3x1A1+rcWd4mEA==",
+      "license": "MIT"
+    },
+    "node_modules/@types/node": {
+      "version": "24.3.0",
+      "resolved": "https://registry.npmjs.org/@types/node/-/node-24.3.0.tgz",
+      "integrity": "sha512-aPTXCrfwnDLj4VvXrm+UUCQjNEvJgNA8s5F1cvwQU+3KNltTOkBm1j30uNLyqqPNe7gE3KFzImYoZEfLhp4Yow==",
+      "license": "MIT",
+      "dependencies": {
+        "undici-types": "~7.10.0"
+      }
+    },
+    "node_modules/agentkeepalive": {
+      "version": "4.6.0",
+      "resolved": "https://registry.npmjs.org/agentkeepalive/-/agentkeepalive-4.6.0.tgz",
+      "integrity": "sha512-kja8j7PjmncONqaTsB8fQ+wE2mSU2DJ9D4XKoJ5PFWIdRMa6SLSN1ff4mOr4jCbfRSsxR4keIiySJU0N9T5hIQ==",
+      "license": "MIT",
+      "dependencies": {
+        "humanize-ms": "^1.2.1"
+      },
+      "engines": {
+        "node": ">= 8.0.0"
+      }
+    },
+    "node_modules/ajv": {
+      "version": "6.12.6",
+      "resolved": "https://registry.npmjs.org/ajv/-/ajv-6.12.6.tgz",
+      "integrity": "sha512-j3fVLgvTo527anyYyJOGTYJbG+vnnQYvE0m5mmkc1TK+nxAppkCLMIL0aZ4dblVCNoGShhm+kzE4ZUykBoMg4g==",
+      "license": "MIT",
+      "dependencies": {
+        "fast-deep-equal": "^3.1.1",
+        "fast-json-stable-stringify": "^2.0.0",
+        "json-schema-traverse": "^0.4.1",
+        "uri-js": "^4.2.2"
+      },
+      "funding": {
+        "type": "github",
+        "url": "https://github.com/sponsors/epoberezkin"
+      }
+    },
+    "node_modules/asn1": {
+      "version": "0.2.6",
+      "resolved": "https://registry.npmjs.org/asn1/-/asn1-0.2.6.tgz",
+      "integrity": "sha512-ix/FxPn0MDjeyJ7i/yoHGFt/EX6LyNbxSEhPPXODPL+KB0VPk86UYfL0lMdy+KCnv+fmvIzySwaK5COwqVbWTQ==",
+      "license": "MIT",
+      "dependencies": {
+        "safer-buffer": "~2.1.0"
+      }
+    },
+    "node_modules/assert-plus": {
+      "version": "1.0.0",
+      "resolved": "https://registry.npmjs.org/assert-plus/-/assert-plus-1.0.0.tgz",
+      "integrity": "sha512-NfJ4UzBCcQGLDlQq7nHxH+tv3kyZ0hHQqF5BO6J7tNJeP5do1llPr8dZ8zHonfhAu0PHAdMkSo+8o0wxg9lZWw==",
+      "license": "MIT",
+      "engines": {
+        "node": ">=0.8"
+      }
+    },
+    "node_modules/asynckit": {
+      "version": "0.4.0",
+      "resolved": "https://registry.npmjs.org/asynckit/-/asynckit-0.4.0.tgz",
+      "integrity": "sha512-Oei9OH4tRh0YqU3GxhX79dM/mwVgvbZJaSNaRk+bshkj0S5cfHcgYakreBjrHwatXKbz+IoIdYLxrKim2MjW0Q==",
+      "license": "MIT"
+    },
+    "node_modules/aws-sign2": {
+      "version": "0.7.0",
+      "resolved": "https://registry.npmjs.org/aws-sign2/-/aws-sign2-0.7.0.tgz",
+      "integrity": "sha512-08kcGqnYf/YmjoRhfxyu+CLxBjUtHLXLXX/vUfx9l2LYzG3c1m61nrpyFUZI6zeS+Li/wWMMidD9KgrqtGq3mA==",
+      "license": "Apache-2.0",
+      "engines": {
+        "node": "*"
+      }
+    },
+    "node_modules/aws4": {
+      "version": "1.13.2",
+      "resolved": "https://registry.npmjs.org/aws4/-/aws4-1.13.2.tgz",
+      "integrity": "sha512-lHe62zvbTB5eEABUVi/AwVh0ZKY9rMMDhmm+eeyuuUQbQ3+J+fONVQOZyj+DdrvD4BY33uYniyRJ4UJIaSKAfw==",
+      "license": "MIT"
+    },
+    "node_modules/axios": {
+      "version": "0.21.4",
+      "resolved": "https://registry.npmjs.org/axios/-/axios-0.21.4.tgz",
+      "integrity": "sha512-ut5vewkiu8jjGBdqpM44XxjuCjq9LAKeHVmoVfHVzy8eHgxxq8SbAVQNovDA8mVi05kP0Ea/n/UzcSHcTJQfNg==",
+      "license": "MIT",
+      "dependencies": {
+        "follow-redirects": "^1.14.0"
+      }
+    },
+    "node_modules/base64-js": {
+      "version": "1.5.1",
+      "resolved": "https://registry.npmjs.org/base64-js/-/base64-js-1.5.1.tgz",
+      "integrity": "sha512-AKpaYlHn8t4SVbOHCy+b5+KKgvR4vrsD8vbvrbiQJps7fKDTkjkDry6ji0rUJjC0kzbNePLwzxq8iypo41qeWA==",
+      "funding": [
+        {
+          "type": "github",
+          "url": "https://github.com/sponsors/feross"
+        },
+        {
+          "type": "patreon",
+          "url": "https://www.patreon.com/feross"
+        },
+        {
+          "type": "consulting",
+          "url": "https://feross.org/support"
+        }
+      ],
+      "license": "MIT"
+    },
+    "node_modules/bcrypt-pbkdf": {
+      "version": "1.0.2",
+      "resolved": "https://registry.npmjs.org/bcrypt-pbkdf/-/bcrypt-pbkdf-1.0.2.tgz",
+      "integrity": "sha512-qeFIXtP4MSoi6NLqO12WfqARWWuCKi2Rn/9hJLEmtB5yTNr9DqFWkJRCf2qShWzPeAMRnOgCrq0sg/KLv5ES9w==",
+      "license": "BSD-3-Clause",
+      "dependencies": {
+        "tweetnacl": "^0.14.3"
+      }
+    },
+    "node_modules/bignumber.js": {
+      "version": "9.3.1",
+      "resolved": "https://registry.npmjs.org/bignumber.js/-/bignumber.js-9.3.1.tgz",
+      "integrity": "sha512-Ko0uX15oIUS7wJ3Rb30Fs6SkVbLmPBAKdlm7q9+ak9bbIeFf0MwuBsQV6z7+X768/cHsfg+WlysDWJcmthjsjQ==",
+      "license": "MIT",
+      "engines": {
+        "node": "*"
+      }
+    },
+    "node_modules/bson": {
+      "version": "4.7.2",
+      "resolved": "https://registry.npmjs.org/bson/-/bson-4.7.2.tgz",
+      "integrity": "sha512-Ry9wCtIZ5kGqkJoi6aD8KjxFZEx78guTQDnpXWiNthsxzrxAK/i8E6pCHAIZTbaEFWcOCvbecMukfK7XUvyLpQ==",
+      "license": "Apache-2.0",
+      "dependencies": {
+        "buffer": "^5.6.0"
+      },
+      "engines": {
+        "node": ">=6.9.0"
+      }
+    },
+    "node_modules/buffer": {
+      "version": "5.7.1",
+      "resolved": "https://registry.npmjs.org/buffer/-/buffer-5.7.1.tgz",
+      "integrity": "sha512-EHcyIPBQ4BSGlvjB16k5KgAJ27CIsHY/2JBmCRReo48y9rQ3MaUzWX3KVlBa4U7MyX02HdVj0K7C3WaB3ju7FQ==",
+      "funding": [
+        {
+          "type": "github",
+          "url": "https://github.com/sponsors/feross"
+        },
+        {
+          "type": "patreon",
+          "url": "https://www.patreon.com/feross"
+        },
+        {
+          "type": "consulting",
+          "url": "https://feross.org/support"
+        }
+      ],
+      "license": "MIT",
+      "dependencies": {
+        "base64-js": "^1.3.1",
+        "ieee754": "^1.1.13"
+      }
+    },
+    "node_modules/buffer-equal-constant-time": {
+      "version": "1.0.1",
+      "resolved": "https://registry.npmjs.org/buffer-equal-constant-time/-/buffer-equal-constant-time-1.0.1.tgz",
+      "integrity": "sha512-zRpUiDwd/xk6ADqPMATG8vc9VPrkck7T07OIx0gnjmJAnHnTVXNQG3vfvWNuiZIkwu9KrKdA1iJKfsfTVxE6NA==",
+      "license": "BSD-3-Clause"
+    },
+    "node_modules/call-bind-apply-helpers": {
+      "version": "1.0.2",
+      "resolved": "https://registry.npmjs.org/call-bind-apply-helpers/-/call-bind-apply-helpers-1.0.2.tgz",
+      "integrity": "sha512-Sp1ablJ0ivDkSzjcaJdxEunN5/XvksFJ2sMBFfq6x0ryhQV/2b/KwFe21cMpmHtPOSij8K99/wSfoEuTObmuMQ==",
+      "license": "MIT",
+      "dependencies": {
+        "es-errors": "^1.3.0",
+        "function-bind": "^1.1.2"
+      },
+      "engines": {
+        "node": ">= 0.4"
+      }
+    },
+    "node_modules/call-bound": {
+      "version": "1.0.4",
+      "resolved": "https://registry.npmjs.org/call-bound/-/call-bound-1.0.4.tgz",
+      "integrity": "sha512-+ys997U96po4Kx/ABpBCqhA9EuxJaQWDQg7295H4hBphv3IZg0boBKuwYpt4YXp6MZ5AmZQnU/tyMTlRpaSejg==",
+      "license": "MIT",
+      "dependencies": {
+        "call-bind-apply-helpers": "^1.0.2",
+        "get-intrinsic": "^1.3.0"
+      },
+      "engines": {
+        "node": ">= 0.4"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/ljharb"
+      }
+    },
+    "node_modules/caseless": {
+      "version": "0.12.0",
+      "resolved": "https://registry.npmjs.org/caseless/-/caseless-0.12.0.tgz",
+      "integrity": "sha512-4tYFyifaFfGacoiObjJegolkwSU4xQNGbVgUiNYVUxbQ2x2lUsFvY4hVgVzGiIe6WLOPqycWXA40l+PWsxthUw==",
+      "license": "Apache-2.0"
+    },
+    "node_modules/clone": {
+      "version": "2.1.2",
+      "resolved": "https://registry.npmjs.org/clone/-/clone-2.1.2.tgz",
+      "integrity": "sha512-3Pe/CF1Nn94hyhIYpjtiLhdCoEoz0DqQ+988E9gmeEdQZlojxnOb74wctFyuwWQHzqyf9X7C7MG8juUpqBJT8w==",
+      "license": "MIT",
+      "engines": {
+        "node": ">=0.8"
+      }
+    },
+    "node_modules/combined-stream": {
+      "version": "1.0.8",
+      "resolved": "https://registry.npmjs.org/combined-stream/-/combined-stream-1.0.8.tgz",
+      "integrity": "sha512-FQN4MRfuJeHf7cBbBMJFXhKSDq+2kAArBlmRBvcvFE5BB1HZKXtSFASDhdlz9zOYwxh8lDdnvmMOe/+5cdoEdg==",
+      "license": "MIT",
+      "dependencies": {
+        "delayed-stream": "~1.0.0"
+      },
+      "engines": {
+        "node": ">= 0.8"
+      }
+    },
+    "node_modules/core-util-is": {
+      "version": "1.0.2",
+      "resolved": "https://registry.npmjs.org/core-util-is/-/core-util-is-1.0.2.tgz",
+      "integrity": "sha512-3lqz5YjWTYnW6dlDa5TLaTCcShfar1e40rmcJVwCBJC6mWlFuj0eCHIElmG1g5kyuJ/GD+8Wn4FFCcz4gJPfaQ==",
+      "license": "MIT"
+    },
+    "node_modules/dashdash": {
+      "version": "1.14.1",
+      "resolved": "https://registry.npmjs.org/dashdash/-/dashdash-1.14.1.tgz",
+      "integrity": "sha512-jRFi8UDGo6j+odZiEpjazZaWqEal3w/basFjQHQEwVtZJGDpxbH1MeYluwCS8Xq5wmLJooDlMgvVarmWfGM44g==",
+      "license": "MIT",
+      "dependencies": {
+        "assert-plus": "^1.0.0"
+      },
+      "engines": {
+        "node": ">=0.10"
+      }
+    },
+    "node_modules/delayed-stream": {
+      "version": "1.0.0",
+      "resolved": "https://registry.npmjs.org/delayed-stream/-/delayed-stream-1.0.0.tgz",
+      "integrity": "sha512-ZySD7Nf91aLB0RxL4KGrKHBXl7Eds1DAmEdcoVawXnLD7SDhpNgtuII2aAkg7a7QS41jxPSZ17p4VdGnMHk3MQ==",
+      "license": "MIT",
+      "engines": {
+        "node": ">=0.4.0"
+      }
+    },
+    "node_modules/dunder-proto": {
+      "version": "1.0.1",
+      "resolved": "https://registry.npmjs.org/dunder-proto/-/dunder-proto-1.0.1.tgz",
+      "integrity": "sha512-KIN/nDJBQRcXw0MLVhZE9iQHmG68qAVIBg9CqmUYjmQIhgij9U5MFvrqkUL5FbtyyzZuOeOt0zdeRe4UY7ct+A==",
+      "license": "MIT",
+      "dependencies": {
+        "call-bind-apply-helpers": "^1.0.1",
+        "es-errors": "^1.3.0",
+        "gopd": "^1.2.0"
+      },
+      "engines": {
+        "node": ">= 0.4"
+      }
+    },
+    "node_modules/ecc-jsbn": {
+      "version": "0.1.2",
+      "resolved": "https://registry.npmjs.org/ecc-jsbn/-/ecc-jsbn-0.1.2.tgz",
+      "integrity": "sha512-eh9O+hwRHNbG4BLTjEl3nw044CkGm5X6LoaCf7LPp7UU8Qrt47JYNi6nPX8xjW97TKGKm1ouctg0QSpZe9qrnw==",
+      "license": "MIT",
+      "dependencies": {
+        "jsbn": "~0.1.0",
+        "safer-buffer": "^2.1.0"
+      }
+    },
+    "node_modules/ecdsa-sig-formatter": {
+      "version": "1.0.11",
+      "resolved": "https://registry.npmjs.org/ecdsa-sig-formatter/-/ecdsa-sig-formatter-1.0.11.tgz",
+      "integrity": "sha512-nagl3RYrbNv6kQkeJIpt6NJZy8twLB/2vtz6yN9Z4vRKHN4/QZJIEbqohALSgwKdnksuY3k5Addp5lg8sVoVcQ==",
+      "license": "Apache-2.0",
+      "dependencies": {
+        "safe-buffer": "^5.0.1"
+      }
+    },
+    "node_modules/es-define-property": {
+      "version": "1.0.1",
+      "resolved": "https://registry.npmjs.org/es-define-property/-/es-define-property-1.0.1.tgz",
+      "integrity": "sha512-e3nRfgfUZ4rNGL232gUgX06QNyyez04KdjFrF+LTRoOXmrOgFKDg4BCdsjW8EnT69eqdYGmRpJwiPVYNrCaW3g==",
+      "license": "MIT",
+      "engines": {
+        "node": ">= 0.4"
+      }
+    },
+    "node_modules/es-errors": {
+      "version": "1.3.0",
+      "resolved": "https://registry.npmjs.org/es-errors/-/es-errors-1.3.0.tgz",
+      "integrity": "sha512-Zf5H2Kxt2xjTvbJvP2ZWLEICxA6j+hAmMzIlypy4xcBg1vKVnx89Wy0GbS+kf5cwCVFFzdCFh2XSCFNULS6csw==",
+      "license": "MIT",
+      "engines": {
+        "node": ">= 0.4"
+      }
+    },
+    "node_modules/es-object-atoms": {
+      "version": "1.1.1",
+      "resolved": "https://registry.npmjs.org/es-object-atoms/-/es-object-atoms-1.1.1.tgz",
+      "integrity": "sha512-FGgH2h8zKNim9ljj7dankFPcICIK9Cp5bm+c2gQSYePhpaG5+esrLODihIorn+Pe6FGJzWhXQotPv73jTaldXA==",
+      "license": "MIT",
+      "dependencies": {
+        "es-errors": "^1.3.0"
+      },
+      "engines": {
+        "node": ">= 0.4"
+      }
+    },
+    "node_modules/extend": {
+      "version": "3.0.2",
+      "resolved": "https://registry.npmjs.org/extend/-/extend-3.0.2.tgz",
+      "integrity": "sha512-fjquC59cD7CyW6urNXK0FBufkZcoiGG80wTuPujX590cB5Ttln20E2UB4S/WARVqhXffZl2LNgS+gQdPIIim/g==",
+      "license": "MIT"
+    },
+    "node_modules/extsprintf": {
+      "version": "1.3.0",
+      "resolved": "https://registry.npmjs.org/extsprintf/-/extsprintf-1.3.0.tgz",
+      "integrity": "sha512-11Ndz7Nv+mvAC1j0ktTa7fAb0vLyGGX+rMHNBYQviQDGU0Hw7lhctJANqbPhu9nV9/izT/IntTgZ7Im/9LJs9g==",
+      "engines": [
+        "node >=0.6.0"
+      ],
+      "license": "MIT"
+    },
+    "node_modules/fast-deep-equal": {
+      "version": "3.1.3",
+      "resolved": "https://registry.npmjs.org/fast-deep-equal/-/fast-deep-equal-3.1.3.tgz",
+      "integrity": "sha512-f3qQ9oQy9j2AhBe/H9VC91wLmKBCCU/gDOnKNAYG5hswO7BLKj09Hc5HYNz9cGI++xlpDCIgDaitVs03ATR84Q==",
+      "license": "MIT"
+    },
+    "node_modules/fast-json-stable-stringify": {
+      "version": "2.1.0",
+      "resolved": "https://registry.npmjs.org/fast-json-stable-stringify/-/fast-json-stable-stringify-2.1.0.tgz",
+      "integrity": "sha512-lhd/wF+Lk98HZoTCtlVraHtfh5XYijIjalXck7saUtuanSDyLMxnHhSXEDJqHxD7msR8D0uCmqlkwjCV8xvwHw==",
+      "license": "MIT"
+    },
+    "node_modules/follow-redirects": {
+      "version": "1.15.11",
+      "resolved": "https://registry.npmjs.org/follow-redirects/-/follow-redirects-1.15.11.tgz",
+      "integrity": "sha512-deG2P0JfjrTxl50XGCDyfI97ZGVCxIpfKYmfyrQ54n5FO/0gfIES8C/Psl6kWVDolizcaaxZJnTS0QSMxvnsBQ==",
+      "funding": [
+        {
+          "type": "individual",
+          "url": "https://github.com/sponsors/RubenVerborgh"
+        }
+      ],
+      "license": "MIT",
+      "engines": {
+        "node": ">=4.0"
+      },
+      "peerDependenciesMeta": {
+        "debug": {
+          "optional": true
+        }
+      }
+    },
+    "node_modules/forever-agent": {
+      "version": "0.6.1",
+      "resolved": "https://registry.npmjs.org/forever-agent/-/forever-agent-0.6.1.tgz",
+      "integrity": "sha512-j0KLYPhm6zeac4lz3oJ3o65qvgQCcPubiyotZrXqEaG4hNagNYO8qdlUrX5vwqv9ohqeT/Z3j6+yW067yWWdUw==",
+      "license": "Apache-2.0",
+      "engines": {
+        "node": "*"
+      }
+    },
+    "node_modules/form-data": {
+      "version": "2.3.3",
+      "resolved": "https://registry.npmjs.org/form-data/-/form-data-2.3.3.tgz",
+      "integrity": "sha512-1lLKB2Mu3aGP1Q/2eCOx0fNbRMe7XdwktwOruhfqqd0rIJWwN4Dh+E3hrPSlDCXnSR7UtZ1N38rVXm+6+MEhJQ==",
+      "license": "MIT",
+      "dependencies": {
+        "asynckit": "^0.4.0",
+        "combined-stream": "^1.0.6",
+        "mime-types": "^2.1.12"
+      },
+      "engines": {
+        "node": ">= 0.12"
+      }
+    },
+    "node_modules/function-bind": {
+      "version": "1.1.2",
+      "resolved": "https://registry.npmjs.org/function-bind/-/function-bind-1.1.2.tgz",
+      "integrity": "sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==",
+      "license": "MIT",
+      "funding": {
+        "url": "https://github.com/sponsors/ljharb"
+      }
+    },
+    "node_modules/get-intrinsic": {
+      "version": "1.3.0",
+      "resolved": "https://registry.npmjs.org/get-intrinsic/-/get-intrinsic-1.3.0.tgz",
+      "integrity": "sha512-9fSjSaos/fRIVIp+xSJlE6lfwhES7LNtKaCBIamHsjr2na1BiABJPo0mOjjz8GJDURarmCPGqaiVg5mfjb98CQ==",
+      "license": "MIT",
+      "dependencies": {
+        "call-bind-apply-helpers": "^1.0.2",
+        "es-define-property": "^1.0.1",
+        "es-errors": "^1.3.0",
+        "es-object-atoms": "^1.1.1",
+        "function-bind": "^1.1.2",
+        "get-proto": "^1.0.1",
+        "gopd": "^1.2.0",
+        "has-symbols": "^1.1.0",
+        "hasown": "^2.0.2",
+        "math-intrinsics": "^1.1.0"
+      },
+      "engines": {
+        "node": ">= 0.4"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/ljharb"
+      }
+    },
+    "node_modules/get-proto": {
+      "version": "1.0.1",
+      "resolved": "https://registry.npmjs.org/get-proto/-/get-proto-1.0.1.tgz",
+      "integrity": "sha512-sTSfBjoXBp89JvIKIefqw7U2CCebsc74kiY6awiGogKtoSGbgjYE/G/+l9sF3MWFPNc9IcoOC4ODfKHfxFmp0g==",
+      "license": "MIT",
+      "dependencies": {
+        "dunder-proto": "^1.0.1",
+        "es-object-atoms": "^1.0.0"
+      },
+      "engines": {
+        "node": ">= 0.4"
+      }
+    },
+    "node_modules/getpass": {
+      "version": "0.1.7",
+      "resolved": "https://registry.npmjs.org/getpass/-/getpass-0.1.7.tgz",
+      "integrity": "sha512-0fzj9JxOLfJ+XGLhR8ze3unN0KZCgZwiSSDz168VERjK8Wl8kVSdcu2kspd4s4wtAa1y/qrVRiAA0WclVsu0ng==",
+      "license": "MIT",
+      "dependencies": {
+        "assert-plus": "^1.0.0"
+      }
+    },
+    "node_modules/gopd": {
+      "version": "1.2.0",
+      "resolved": "https://registry.npmjs.org/gopd/-/gopd-1.2.0.tgz",
+      "integrity": "sha512-ZUKRh6/kUFoAiTAtTYPZJ3hw9wNxx+BIBOijnlG9PnrJsCcSjs1wyyD6vJpaYtgnzDrKYRSqf3OO6Rfa93xsRg==",
+      "license": "MIT",
+      "engines": {
+        "node": ">= 0.4"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/ljharb"
+      }
+    },
+    "node_modules/har-schema": {
+      "version": "2.0.0",
+      "resolved": "https://registry.npmjs.org/har-schema/-/har-schema-2.0.0.tgz",
+      "integrity": "sha512-Oqluz6zhGX8cyRaTQlFMPw80bSJVG2x/cFb8ZPhUILGgHka9SsokCCOQgpveePerqidZOrT14ipqfJb7ILcW5Q==",
+      "license": "ISC",
+      "engines": {
+        "node": ">=4"
+      }
+    },
+    "node_modules/har-validator": {
+      "version": "5.1.5",
+      "resolved": "https://registry.npmjs.org/har-validator/-/har-validator-5.1.5.tgz",
+      "integrity": "sha512-nmT2T0lljbxdQZfspsno9hgrG3Uir6Ks5afism62poxqBM6sDnMEuPmzTq8XN0OEwqKLLdh1jQI3qyE66Nzb3w==",
+      "deprecated": "this library is no longer supported",
+      "license": "MIT",
+      "dependencies": {
+        "ajv": "^6.12.3",
+        "har-schema": "^2.0.0"
+      },
+      "engines": {
+        "node": ">=6"
+      }
+    },
+    "node_modules/has-symbols": {
+      "version": "1.1.0",
+      "resolved": "https://registry.npmjs.org/has-symbols/-/has-symbols-1.1.0.tgz",
+      "integrity": "sha512-1cDNdwJ2Jaohmb3sg4OmKaMBwuC48sYni5HUw2DvsC8LjGTLK9h+eb1X6RyuOHe4hT0ULCW68iomhjUoKUqlPQ==",
+      "license": "MIT",
+      "engines": {
+        "node": ">= 0.4"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/ljharb"
+      }
+    },
+    "node_modules/hasown": {
+      "version": "2.0.2",
+      "resolved": "https://registry.npmjs.org/hasown/-/hasown-2.0.2.tgz",
+      "integrity": "sha512-0hJU9SCPvmMzIBdZFqNPXWa6dqh7WdH0cII9y+CyS8rG3nL48Bclra9HmKhVVUHyPWNH5Y7xDwAB7bfgSjkUMQ==",
+      "license": "MIT",
+      "dependencies": {
+        "function-bind": "^1.1.2"
+      },
+      "engines": {
+        "node": ">= 0.4"
+      }
+    },
+    "node_modules/http-signature": {
+      "version": "1.2.0",
+      "resolved": "https://registry.npmjs.org/http-signature/-/http-signature-1.2.0.tgz",
+      "integrity": "sha512-CAbnr6Rz4CYQkLYUtSNXxQPUH2gK8f3iWexVlsnMeD+GjlsQ0Xsy1cOX+mN3dtxYomRy21CiOzU8Uhw6OwncEQ==",
+      "license": "MIT",
+      "dependencies": {
+        "assert-plus": "^1.0.0",
+        "jsprim": "^1.2.2",
+        "sshpk": "^1.7.0"
+      },
+      "engines": {
+        "node": ">=0.8",
+        "npm": ">=1.3.7"
+      }
+    },
+    "node_modules/humanize-ms": {
+      "version": "1.2.1",
+      "resolved": "https://registry.npmjs.org/humanize-ms/-/humanize-ms-1.2.1.tgz",
+      "integrity": "sha512-Fl70vYtsAFb/C06PTS9dZBo7ihau+Tu/DNCk/OyHhea07S+aeMWpFFkUaXRa8fI+ScZbEI8dfSxwY7gxZ9SAVQ==",
+      "license": "MIT",
+      "dependencies": {
+        "ms": "^2.0.0"
+      }
+    },
+    "node_modules/ieee754": {
+      "version": "1.2.1",
+      "resolved": "https://registry.npmjs.org/ieee754/-/ieee754-1.2.1.tgz",
+      "integrity": "sha512-dcyqhDvX1C46lXZcVqCpK+FtMRQVdIMN6/Df5js2zouUsqG7I6sFxitIC+7KYK29KdXOLHdu9zL4sFnoVQnqaA==",
+      "funding": [
+        {
+          "type": "github",
+          "url": "https://github.com/sponsors/feross"
+        },
+        {
+          "type": "patreon",
+          "url": "https://www.patreon.com/feross"
+        },
+        {
+          "type": "consulting",
+          "url": "https://feross.org/support"
+        }
+      ],
+      "license": "BSD-3-Clause"
+    },
+    "node_modules/is-stream": {
+      "version": "2.0.1",
+      "resolved": "https://registry.npmjs.org/is-stream/-/is-stream-2.0.1.tgz",
+      "integrity": "sha512-hFoiJiTl63nn+kstHGBtewWSKnQLpyb155KHheA1l39uvtO9nWIop1p3udqPcUd/xbF1VLMO4n7OI6p7RbngDg==",
+      "license": "MIT",
+      "engines": {
+        "node": ">=8"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/sindresorhus"
+      }
+    },
+    "node_modules/is-typedarray": {
+      "version": "1.0.0",
+      "resolved": "https://registry.npmjs.org/is-typedarray/-/is-typedarray-1.0.0.tgz",
+      "integrity": "sha512-cyA56iCMHAh5CdzjJIa4aohJyeO1YbwLi3Jc35MmRU6poroFjIGZzUzupGiRPOjgHg9TLu43xbpwXk523fMxKA==",
+      "license": "MIT"
+    },
+    "node_modules/isstream": {
+      "version": "0.1.2",
+      "resolved": "https://registry.npmjs.org/isstream/-/isstream-0.1.2.tgz",
+      "integrity": "sha512-Yljz7ffyPbrLpLngrMtZ7NduUgVvi6wG9RJ9IUcyCd59YQ911PBJphODUcbOVbqYfxe1wuYf/LJ8PauMRwsM/g==",
+      "license": "MIT"
+    },
+    "node_modules/jsbn": {
+      "version": "0.1.1",
+      "resolved": "https://registry.npmjs.org/jsbn/-/jsbn-0.1.1.tgz",
+      "integrity": "sha512-UVU9dibq2JcFWxQPA6KCqj5O42VOmAY3zQUfEKxU0KpTGXwNoCjkX1e13eHNvw/xPynt6pU0rZ1htjWTNTSXsg==",
+      "license": "MIT"
+    },
+    "node_modules/json-bigint": {
+      "version": "1.0.0",
+      "resolved": "https://registry.npmjs.org/json-bigint/-/json-bigint-1.0.0.tgz",
+      "integrity": "sha512-SiPv/8VpZuWbvLSMtTDU8hEfrZWg/mH/nV/b4o0CYbSxu1UIQPLdwKOCIyLQX+VIPO5vrLX3i8qtqFyhdPSUSQ==",
+      "license": "MIT",
+      "dependencies": {
+        "bignumber.js": "^9.0.0"
+      }
+    },
+    "node_modules/json-schema": {
+      "version": "0.4.0",
+      "resolved": "https://registry.npmjs.org/json-schema/-/json-schema-0.4.0.tgz",
+      "integrity": "sha512-es94M3nTIfsEPisRafak+HDLfHXnKBhV3vU5eqPcS3flIWqcxJWgXHXiey3YrpaNsanY5ei1VoYEbOzijuq9BA==",
+      "license": "(AFL-2.1 OR BSD-3-Clause)"
+    },
+    "node_modules/json-schema-traverse": {
+      "version": "0.4.1",
+      "resolved": "https://registry.npmjs.org/json-schema-traverse/-/json-schema-traverse-0.4.1.tgz",
+      "integrity": "sha512-xbbCH5dCYU5T8LcEhhuh7HJ88HXuW3qsI3Y0zOZFKfZEHcpWiHU/Jxzk629Brsab/mMiHQti9wMP+845RPe3Vg==",
+      "license": "MIT"
+    },
+    "node_modules/json-stringify-safe": {
+      "version": "5.0.1",
+      "resolved": "https://registry.npmjs.org/json-stringify-safe/-/json-stringify-safe-5.0.1.tgz",
+      "integrity": "sha512-ZClg6AaYvamvYEE82d3Iyd3vSSIjQ+odgjaTzRuO3s7toCdFKczob2i0zCh7JE8kWn17yvAWhUVxvqGwUalsRA==",
+      "license": "ISC"
+    },
+    "node_modules/jsonwebtoken": {
+      "version": "8.5.1",
+      "resolved": "https://registry.npmjs.org/jsonwebtoken/-/jsonwebtoken-8.5.1.tgz",
+      "integrity": "sha512-XjwVfRS6jTMsqYs0EsuJ4LGxXV14zQybNd4L2r0UvbVnSF9Af8x7p5MzbJ90Ioz/9TI41/hTCvznF/loiSzn8w==",
+      "license": "MIT",
+      "dependencies": {
+        "jws": "^3.2.2",
+        "lodash.includes": "^4.3.0",
+        "lodash.isboolean": "^3.0.3",
+        "lodash.isinteger": "^4.0.4",
+        "lodash.isnumber": "^3.0.3",
+        "lodash.isplainobject": "^4.0.6",
+        "lodash.isstring": "^4.0.1",
+        "lodash.once": "^4.0.0",
+        "ms": "^2.1.1",
+        "semver": "^5.6.0"
+      },
+      "engines": {
+        "node": ">=4",
+        "npm": ">=1.4.28"
+      }
+    },
+    "node_modules/jsprim": {
+      "version": "1.4.2",
+      "resolved": "https://registry.npmjs.org/jsprim/-/jsprim-1.4.2.tgz",
+      "integrity": "sha512-P2bSOMAc/ciLz6DzgjVlGJP9+BrJWu5UDGK70C2iweC5QBIeFf0ZXRvGjEj2uYgrY2MkAAhsSWHDWlFtEroZWw==",
+      "license": "MIT",
+      "dependencies": {
+        "assert-plus": "1.0.0",
+        "extsprintf": "1.3.0",
+        "json-schema": "0.4.0",
+        "verror": "1.10.0"
+      },
+      "engines": {
+        "node": ">=0.6.0"
+      }
+    },
+    "node_modules/jwa": {
+      "version": "1.4.2",
+      "resolved": "https://registry.npmjs.org/jwa/-/jwa-1.4.2.tgz",
+      "integrity": "sha512-eeH5JO+21J78qMvTIDdBXidBd6nG2kZjg5Ohz/1fpa28Z4CcsWUzJ1ZZyFq/3z3N17aZy+ZuBoHljASbL1WfOw==",
+      "license": "MIT",
+      "dependencies": {
+        "buffer-equal-constant-time": "^1.0.1",
+        "ecdsa-sig-formatter": "1.0.11",
+        "safe-buffer": "^5.0.1"
+      }
+    },
+    "node_modules/jws": {
+      "version": "3.2.2",
+      "resolved": "https://registry.npmjs.org/jws/-/jws-3.2.2.tgz",
+      "integrity": "sha512-YHlZCB6lMTllWDtSPHz/ZXTsi8S00usEV6v1tjq8tOUZzw7DpSDWVXjXDre6ed1w/pd495ODpHZYSdkRTsa0HA==",
+      "license": "MIT",
+      "dependencies": {
+        "jwa": "^1.4.1",
+        "safe-buffer": "^5.0.1"
+      }
+    },
+    "node_modules/lodash.clonedeep": {
+      "version": "4.5.0",
+      "resolved": "https://registry.npmjs.org/lodash.clonedeep/-/lodash.clonedeep-4.5.0.tgz",
+      "integrity": "sha512-H5ZhCF25riFd9uB5UCkVKo61m3S/xZk1x4wA6yp/L3RFP6Z/eHH1ymQcGLo7J3GMPfm0V/7m1tryHuGVxpqEBQ==",
+      "license": "MIT"
+    },
+    "node_modules/lodash.includes": {
+      "version": "4.3.0",
+      "resolved": "https://registry.npmjs.org/lodash.includes/-/lodash.includes-4.3.0.tgz",
+      "integrity": "sha512-W3Bx6mdkRTGtlJISOvVD/lbqjTlPPUDTMnlXZFnVwi9NKJ6tiAk6LVdlhZMm17VZisqhKcgzpO5Wz91PCt5b0w==",
+      "license": "MIT"
+    },
+    "node_modules/lodash.isboolean": {
+      "version": "3.0.3",
+      "resolved": "https://registry.npmjs.org/lodash.isboolean/-/lodash.isboolean-3.0.3.tgz",
+      "integrity": "sha512-Bz5mupy2SVbPHURB98VAcw+aHh4vRV5IPNhILUCsOzRmsTmSQ17jIuqopAentWoehktxGd9e/hbIXq980/1QJg==",
+      "license": "MIT"
+    },
+    "node_modules/lodash.isinteger": {
+      "version": "4.0.4",
+      "resolved": "https://registry.npmjs.org/lodash.isinteger/-/lodash.isinteger-4.0.4.tgz",
+      "integrity": "sha512-DBwtEWN2caHQ9/imiNeEA5ys1JoRtRfY3d7V9wkqtbycnAmTvRRmbHKDV4a0EYc678/dia0jrte4tjYwVBaZUA==",
+      "license": "MIT"
+    },
+    "node_modules/lodash.isnumber": {
+      "version": "3.0.3",
+      "resolved": "https://registry.npmjs.org/lodash.isnumber/-/lodash.isnumber-3.0.3.tgz",
+      "integrity": "sha512-QYqzpfwO3/CWf3XP+Z+tkQsfaLL/EnUlXWVkIk5FUPc4sBdTehEqZONuyRt2P67PXAk+NXmTBcc97zw9t1FQrw==",
+      "license": "MIT"
+    },
+    "node_modules/lodash.isplainobject": {
+      "version": "4.0.6",
+      "resolved": "https://registry.npmjs.org/lodash.isplainobject/-/lodash.isplainobject-4.0.6.tgz",
+      "integrity": "sha512-oSXzaWypCMHkPC3NvBEaPHf0KsA5mvPrOPgQWDsbg8n7orZ290M0BmC/jgRZ4vcJ6DTAhjrsSYgdsW/F+MFOBA==",
+      "license": "MIT"
+    },
+    "node_modules/lodash.isstring": {
+      "version": "4.0.1",
+      "resolved": "https://registry.npmjs.org/lodash.isstring/-/lodash.isstring-4.0.1.tgz",
+      "integrity": "sha512-0wJxfxH1wgO3GrbuP+dTTk7op+6L41QCXbGINEmD+ny/G/eCqGzxyCsh7159S+mgDDcoarnBw6PC1PS5+wUGgw==",
+      "license": "MIT"
+    },
+    "node_modules/lodash.once": {
+      "version": "4.1.1",
+      "resolved": "https://registry.npmjs.org/lodash.once/-/lodash.once-4.1.1.tgz",
+      "integrity": "sha512-Sb487aTOCr9drQVL8pIxOzVhafOjZN9UU54hiN8PU3uAiSV7lx1yYNpbNmex2PK6dSJoNTSJUUswT651yww3Mg==",
+      "license": "MIT"
+    },
+    "node_modules/lodash.set": {
+      "version": "4.3.2",
+      "resolved": "https://registry.npmjs.org/lodash.set/-/lodash.set-4.3.2.tgz",
+      "integrity": "sha512-4hNPN5jlm/N/HLMCO43v8BXKq9Z7QdAGc/VGrRD61w8gN9g/6jF9A4L1pbUgBLCffi0w9VsXfTOij5x8iTyFvg==",
+      "license": "MIT"
+    },
+    "node_modules/lodash.unset": {
+      "version": "4.5.2",
+      "resolved": "https://registry.npmjs.org/lodash.unset/-/lodash.unset-4.5.2.tgz",
+      "integrity": "sha512-bwKX88k2JhCV9D1vtE8+naDKlLiGrSmf8zi/Y9ivFHwbmRfA8RxS/aVJ+sIht2XOwqoNr4xUPUkGZpc1sHFEKg==",
+      "license": "MIT"
+    },
+    "node_modules/long": {
+      "version": "5.3.2",
+      "resolved": "https://registry.npmjs.org/long/-/long-5.3.2.tgz",
+      "integrity": "sha512-mNAgZ1GmyNhD7AuqnTG3/VQ26o760+ZYBPKjPvugO8+nLbYfX6TVpJPseBvopbdY+qpZ/lKUnmEc1LeZYS3QAA==",
+      "license": "Apache-2.0"
+    },
+    "node_modules/math-intrinsics": {
+      "version": "1.1.0",
+      "resolved": "https://registry.npmjs.org/math-intrinsics/-/math-intrinsics-1.1.0.tgz",
+      "integrity": "sha512-/IXtbwEk5HTPyEwyKX6hGkYXxM9nbj64B+ilVJnC/R6B0pH5G4V3b0pVbL7DBj4tkhBAppbQUlf6F6Xl9LHu1g==",
+      "license": "MIT",
+      "engines": {
+        "node": ">= 0.4"
+      }
+    },
+    "node_modules/mime-db": {
+      "version": "1.52.0",
+      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.52.0.tgz",
+      "integrity": "sha512-sPU4uV7dYlvtWJxwwxHD0PuihVNiE7TyAbQ5SWxDCB9mUYvOgroQOwYQQOKPJ8CIbE+1ETVlOoK1UC2nU3gYvg==",
+      "license": "MIT",
+      "engines": {
+        "node": ">= 0.6"
+      }
+    },
+    "node_modules/mime-types": {
+      "version": "2.1.35",
+      "resolved": "https://registry.npmjs.org/mime-types/-/mime-types-2.1.35.tgz",
+      "integrity": "sha512-ZDY+bPm5zTTF+YpCrAU9nK0UgICYPT0QtT1NZWFv4s++TNkcgVaT0g6+4R2uI4MjQjzysHB1zxuWL50hzaeXiw==",
+      "license": "MIT",
+      "dependencies": {
+        "mime-db": "1.52.0"
+      },
+      "engines": {
+        "node": ">= 0.6"
+      }
+    },
+    "node_modules/ms": {
+      "version": "2.1.3",
+      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
+      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
+      "license": "MIT"
+    },
+    "node_modules/oauth-sign": {
+      "version": "0.9.0",
+      "resolved": "https://registry.npmjs.org/oauth-sign/-/oauth-sign-0.9.0.tgz",
+      "integrity": "sha512-fexhUFFPTGV8ybAtSIGbV6gOkSv8UtRbDBnAyLQw4QPKkgNlsH2ByPGtMUqdWkos6YCRmAqViwgZrJc/mRDzZQ==",
+      "license": "Apache-2.0",
+      "engines": {
+        "node": "*"
+      }
+    },
+    "node_modules/object-inspect": {
+      "version": "1.13.4",
+      "resolved": "https://registry.npmjs.org/object-inspect/-/object-inspect-1.13.4.tgz",
+      "integrity": "sha512-W67iLl4J2EXEGTbfeHCffrjDfitvLANg0UlX3wFUUSTx92KXRFegMHUVgSqE+wvhAbi4WqjGg9czysTV2Epbew==",
+      "license": "MIT",
+      "engines": {
+        "node": ">= 0.4"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/ljharb"
+      }
+    },
+    "node_modules/performance-now": {
+      "version": "2.1.0",
+      "resolved": "https://registry.npmjs.org/performance-now/-/performance-now-2.1.0.tgz",
+      "integrity": "sha512-7EAHlyLHI56VEIdK57uwHdHKIaAGbnXPiw0yWbarQZOKaKpvUIgW0jWRVLiatnM+XXlSwsanIBH/hzGMJulMow==",
+      "license": "MIT"
+    },
+    "node_modules/protobufjs": {
+      "version": "7.5.3",
+      "resolved": "https://registry.npmjs.org/protobufjs/-/protobufjs-7.5.3.tgz",
+      "integrity": "sha512-sildjKwVqOI2kmFDiXQ6aEB0fjYTafpEvIBs8tOR8qI4spuL9OPROLVu2qZqi/xgCfsHIwVqlaF8JBjWFHnKbw==",
+      "hasInstallScript": true,
+      "license": "BSD-3-Clause",
+      "dependencies": {
+        "@protobufjs/aspromise": "^1.1.2",
+        "@protobufjs/base64": "^1.1.2",
+        "@protobufjs/codegen": "^2.0.4",
+        "@protobufjs/eventemitter": "^1.1.0",
+        "@protobufjs/fetch": "^1.1.0",
+        "@protobufjs/float": "^1.0.2",
+        "@protobufjs/inquire": "^1.1.0",
+        "@protobufjs/path": "^1.1.2",
+        "@protobufjs/pool": "^1.1.0",
+        "@protobufjs/utf8": "^1.1.0",
+        "@types/node": ">=13.7.0",
+        "long": "^5.0.0"
+      },
+      "engines": {
+        "node": ">=12.0.0"
+      }
+    },
+    "node_modules/psl": {
+      "version": "1.15.0",
+      "resolved": "https://registry.npmjs.org/psl/-/psl-1.15.0.tgz",
+      "integrity": "sha512-JZd3gMVBAVQkSs6HdNZo9Sdo0LNcQeMNP3CozBJb3JYC/QUYZTnKxP+f8oWRX4rHP5EurWxqAHTSwUCjlNKa1w==",
+      "license": "MIT",
+      "dependencies": {
+        "punycode": "^2.3.1"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/lupomontero"
+      }
+    },
+    "node_modules/punycode": {
+      "version": "2.3.1",
+      "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.3.1.tgz",
+      "integrity": "sha512-vYt7UD1U9Wg6138shLtLOvdAu+8DsC/ilFtEVHcH+wydcSpNE20AfSOduf6MkRFahL5FY7X1oU7nKVZFtfq8Fg==",
+      "license": "MIT",
+      "engines": {
+        "node": ">=6"
+      }
+    },
+    "node_modules/qs": {
+      "version": "6.5.3",
+      "resolved": "https://registry.npmjs.org/qs/-/qs-6.5.3.tgz",
+      "integrity": "sha512-qxXIEh4pCGfHICj1mAJQ2/2XVZkjCDTcEgfoSQxc/fYivUZxTkk7L3bDBJSoNrEzXI17oUO5Dp07ktqE5KzczA==",
+      "license": "BSD-3-Clause",
+      "engines": {
+        "node": ">=0.6"
+      }
+    },
+    "node_modules/request": {
+      "version": "2.88.2",
+      "resolved": "https://registry.npmjs.org/request/-/request-2.88.2.tgz",
+      "integrity": "sha512-MsvtOrfG9ZcrOwAW+Qi+F6HbD0CWXEh9ou77uOb7FM2WPhwT7smM833PzanhJLsgXjN89Ir6V2PczXNnMpwKhw==",
+      "deprecated": "request has been deprecated, see https://github.com/request/request/issues/3142",
+      "license": "Apache-2.0",
+      "dependencies": {
+        "aws-sign2": "~0.7.0",
+        "aws4": "^1.8.0",
+        "caseless": "~0.12.0",
+        "combined-stream": "~1.0.6",
+        "extend": "~3.0.2",
+        "forever-agent": "~0.6.1",
+        "form-data": "~2.3.2",
+        "har-validator": "~5.1.3",
+        "http-signature": "~1.2.0",
+        "is-typedarray": "~1.0.0",
+        "isstream": "~0.1.2",
+        "json-stringify-safe": "~5.0.1",
+        "mime-types": "~2.1.19",
+        "oauth-sign": "~0.9.0",
+        "performance-now": "^2.1.0",
+        "qs": "~6.5.2",
+        "safe-buffer": "^5.1.2",
+        "tough-cookie": "~2.5.0",
+        "tunnel-agent": "^0.6.0",
+        "uuid": "^3.3.2"
+      },
+      "engines": {
+        "node": ">= 6"
+      }
+    },
+    "node_modules/retry": {
+      "version": "0.13.1",
+      "resolved": "https://registry.npmjs.org/retry/-/retry-0.13.1.tgz",
+      "integrity": "sha512-XQBQ3I8W1Cge0Seh+6gjj03LbmRFWuoszgK9ooCpwYIrhhoO80pfq4cUkU5DkknwfOfFteRwlZ56PYOGYyFWdg==",
+      "license": "MIT",
+      "engines": {
+        "node": ">= 4"
+      }
+    },
+    "node_modules/safe-buffer": {
+      "version": "5.2.1",
+      "resolved": "https://registry.npmjs.org/safe-buffer/-/safe-buffer-5.2.1.tgz",
+      "integrity": "sha512-rp3So07KcdmmKbGvgaNxQSJr7bGVSVk5S9Eq1F+ppbRo70+YeaDxkw5Dd8NPN+GD6bjnYm2VuPuCXmpuYvmCXQ==",
+      "funding": [
+        {
+          "type": "github",
+          "url": "https://github.com/sponsors/feross"
+        },
+        {
+          "type": "patreon",
+          "url": "https://www.patreon.com/feross"
+        },
+        {
+          "type": "consulting",
+          "url": "https://feross.org/support"
+        }
+      ],
+      "license": "MIT"
+    },
+    "node_modules/safer-buffer": {
+      "version": "2.1.2",
+      "resolved": "https://registry.npmjs.org/safer-buffer/-/safer-buffer-2.1.2.tgz",
+      "integrity": "sha512-YZo3K82SD7Riyi0E1EQPojLz7kpepnSQI9IyPbHHg1XXXevb5dJI7tpyN2ADxGcQbHG7vcyRHk0cbwqcQriUtg==",
+      "license": "MIT"
+    },
+    "node_modules/sax": {
+      "version": "1.4.1",
+      "resolved": "https://registry.npmjs.org/sax/-/sax-1.4.1.tgz",
+      "integrity": "sha512-+aWOz7yVScEGoKNd4PA10LZ8sk0A/z5+nXQG5giUO5rprX9jgYsTdov9qCchZiPIZezbZH+jRut8nPodFAX4Jg==",
+      "license": "ISC"
+    },
+    "node_modules/semver": {
+      "version": "5.7.2",
+      "resolved": "https://registry.npmjs.org/semver/-/semver-5.7.2.tgz",
+      "integrity": "sha512-cBznnQ9KjJqU67B52RMC65CMarK2600WFnbkcaiwWq3xy/5haFJlshgnpjovMVJ+Hff49d8GEn0b87C5pDQ10g==",
+      "license": "ISC",
+      "bin": {
+        "semver": "bin/semver"
+      }
+    },
+    "node_modules/side-channel": {
+      "version": "1.1.0",
+      "resolved": "https://registry.npmjs.org/side-channel/-/side-channel-1.1.0.tgz",
+      "integrity": "sha512-ZX99e6tRweoUXqR+VBrslhda51Nh5MTQwou5tnUDgbtyM0dBgmhEDtWGP/xbKn6hqfPRHujUNwz5fy/wbbhnpw==",
+      "license": "MIT",
+      "dependencies": {
+        "es-errors": "^1.3.0",
+        "object-inspect": "^1.13.3",
+        "side-channel-list": "^1.0.0",
+        "side-channel-map": "^1.0.1",
+        "side-channel-weakmap": "^1.0.2"
+      },
+      "engines": {
+        "node": ">= 0.4"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/ljharb"
+      }
+    },
+    "node_modules/side-channel-list": {
+      "version": "1.0.0",
+      "resolved": "https://registry.npmjs.org/side-channel-list/-/side-channel-list-1.0.0.tgz",
+      "integrity": "sha512-FCLHtRD/gnpCiCHEiJLOwdmFP+wzCmDEkc9y7NsYxeF4u7Btsn1ZuwgwJGxImImHicJArLP4R0yX4c2KCrMrTA==",
+      "license": "MIT",
+      "dependencies": {
+        "es-errors": "^1.3.0",
+        "object-inspect": "^1.13.3"
+      },
+      "engines": {
+        "node": ">= 0.4"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/ljharb"
+      }
+    },
+    "node_modules/side-channel-map": {
+      "version": "1.0.1",
+      "resolved": "https://registry.npmjs.org/side-channel-map/-/side-channel-map-1.0.1.tgz",
+      "integrity": "sha512-VCjCNfgMsby3tTdo02nbjtM/ewra6jPHmpThenkTYh8pG9ucZ/1P8So4u4FGBek/BjpOVsDCMoLA/iuBKIFXRA==",
+      "license": "MIT",
+      "dependencies": {
+        "call-bound": "^1.0.2",
+        "es-errors": "^1.3.0",
+        "get-intrinsic": "^1.2.5",
+        "object-inspect": "^1.13.3"
+      },
+      "engines": {
+        "node": ">= 0.4"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/ljharb"
+      }
+    },
+    "node_modules/side-channel-weakmap": {
+      "version": "1.0.2",
+      "resolved": "https://registry.npmjs.org/side-channel-weakmap/-/side-channel-weakmap-1.0.2.tgz",
+      "integrity": "sha512-WPS/HvHQTYnHisLo9McqBHOJk2FkHO/tlpvldyrnem4aeQp4hai3gythswg6p01oSoTl58rcpiFAjF2br2Ak2A==",
+      "license": "MIT",
+      "dependencies": {
+        "call-bound": "^1.0.2",
+        "es-errors": "^1.3.0",
+        "get-intrinsic": "^1.2.5",
+        "object-inspect": "^1.13.3",
+        "side-channel-map": "^1.0.1"
+      },
+      "engines": {
+        "node": ">= 0.4"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/ljharb"
+      }
+    },
+    "node_modules/sshpk": {
+      "version": "1.18.0",
+      "resolved": "https://registry.npmjs.org/sshpk/-/sshpk-1.18.0.tgz",
+      "integrity": "sha512-2p2KJZTSqQ/I3+HX42EpYOa2l3f8Erv8MWKsy2I9uf4wA7yFIkXRffYdsx86y6z4vHtV8u7g+pPlr8/4ouAxsQ==",
+      "license": "MIT",
+      "dependencies": {
+        "asn1": "~0.2.3",
+        "assert-plus": "^1.0.0",
+        "bcrypt-pbkdf": "^1.0.0",
+        "dashdash": "^1.12.0",
+        "ecc-jsbn": "~0.1.1",
+        "getpass": "^0.1.1",
+        "jsbn": "~0.1.0",
+        "safer-buffer": "^2.0.2",
+        "tweetnacl": "~0.14.0"
+      },
+      "bin": {
+        "sshpk-conv": "bin/sshpk-conv",
+        "sshpk-sign": "bin/sshpk-sign",
+        "sshpk-verify": "bin/sshpk-verify"
+      },
+      "engines": {
+        "node": ">=0.10.0"
+      }
+    },
+    "node_modules/tough-cookie": {
+      "version": "2.5.0",
+      "resolved": "https://registry.npmjs.org/tough-cookie/-/tough-cookie-2.5.0.tgz",
+      "integrity": "sha512-nlLsUzgm1kfLXSXfRZMc1KLAugd4hqJHDTvc2hDIwS3mZAfMEuMbc03SujMF+GEcpaX/qboeycw6iO8JwVv2+g==",
+      "license": "BSD-3-Clause",
+      "dependencies": {
+        "psl": "^1.1.28",
+        "punycode": "^2.1.1"
+      },
+      "engines": {
+        "node": ">=0.8"
+      }
+    },
+    "node_modules/tslib": {
+      "version": "1.14.1",
+      "resolved": "https://registry.npmjs.org/tslib/-/tslib-1.14.1.tgz",
+      "integrity": "sha512-Xni35NKzjgMrwevysHTCArtLDpPvye8zV/0E4EyYn43P7/7qvQwPh9BGkHewbMulVntbigmcT7rdX3BNo9wRJg==",
+      "license": "0BSD"
+    },
+    "node_modules/tunnel-agent": {
+      "version": "0.6.0",
+      "resolved": "https://registry.npmjs.org/tunnel-agent/-/tunnel-agent-0.6.0.tgz",
+      "integrity": "sha512-McnNiV1l8RYeY8tBgEpuodCC1mLUdbSN+CYBL7kJsJNInOP8UjDDEwdk6Mw60vdLLrr5NHKZhMAOSrR2NZuQ+w==",
+      "license": "Apache-2.0",
+      "dependencies": {
+        "safe-buffer": "^5.0.1"
+      },
+      "engines": {
+        "node": "*"
+      }
+    },
+    "node_modules/tweetnacl": {
+      "version": "0.14.5",
+      "resolved": "https://registry.npmjs.org/tweetnacl/-/tweetnacl-0.14.5.tgz",
+      "integrity": "sha512-KXXFFdAbFXY4geFIwoyNK+f5Z1b7swfXABfL7HXCmoIWMKU3dmS26672A4EeQtDzLKy7SXmfBu51JolvEKwtGA==",
+      "license": "Unlicense"
+    },
+    "node_modules/undici-types": {
+      "version": "7.10.0",
+      "resolved": "https://registry.npmjs.org/undici-types/-/undici-types-7.10.0.tgz",
+      "integrity": "sha512-t5Fy/nfn+14LuOc2KNYg75vZqClpAiqscVvMygNnlsHBFpSXdJaYtXMcdNLpl/Qvc3P2cB3s6lOV51nqsFq4ag==",
+      "license": "MIT"
+    },
+    "node_modules/uri-js": {
+      "version": "4.4.1",
+      "resolved": "https://registry.npmjs.org/uri-js/-/uri-js-4.4.1.tgz",
+      "integrity": "sha512-7rKUyy33Q1yc98pQ1DAmLtwX109F7TIfWlW1Ydo8Wl1ii1SeHieeh0HHfPeL2fMXK6z0s8ecKs9frCuLJvndBg==",
+      "license": "BSD-2-Clause",
+      "dependencies": {
+        "punycode": "^2.1.0"
+      }
+    },
+    "node_modules/url": {
+      "version": "0.11.4",
+      "resolved": "https://registry.npmjs.org/url/-/url-0.11.4.tgz",
+      "integrity": "sha512-oCwdVC7mTuWiPyjLUz/COz5TLk6wgp0RCsN+wHZ2Ekneac9w8uuV0njcbbie2ME+Vs+d6duwmYuR3HgQXs1fOg==",
+      "license": "MIT",
+      "dependencies": {
+        "punycode": "^1.4.1",
+        "qs": "^6.12.3"
+      },
+      "engines": {
+        "node": ">= 0.4"
+      }
+    },
+    "node_modules/url/node_modules/punycode": {
+      "version": "1.4.1",
+      "resolved": "https://registry.npmjs.org/punycode/-/punycode-1.4.1.tgz",
+      "integrity": "sha512-jmYNElW7yvO7TV33CjSmvSiE2yco3bV2czu/OzDKdMNVZQWfxCblURLhf+47syQRBntjfLdd/H0egrzIG+oaFQ==",
+      "license": "MIT"
+    },
+    "node_modules/url/node_modules/qs": {
+      "version": "6.14.0",
+      "resolved": "https://registry.npmjs.org/qs/-/qs-6.14.0.tgz",
+      "integrity": "sha512-YWWTjgABSKcvs/nWBi9PycY/JiPJqOD4JA6o9Sej2AtvSGarXxKC3OQSk4pAarbdQlKAh5D4FCQkJNkW+GAn3w==",
+      "license": "BSD-3-Clause",
+      "dependencies": {
+        "side-channel": "^1.1.0"
+      },
+      "engines": {
+        "node": ">=0.6"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/ljharb"
+      }
+    },
+    "node_modules/uuid": {
+      "version": "3.4.0",
+      "resolved": "https://registry.npmjs.org/uuid/-/uuid-3.4.0.tgz",
+      "integrity": "sha512-HjSDRw6gZE5JMggctHBcjVak08+KEVhSIiDzFnT9S9aegmp85S/bReBVTb4QTFaRNptJ9kuYaNhnbNEOkbKb/A==",
+      "deprecated": "Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.",
+      "license": "MIT",
+      "bin": {
+        "uuid": "bin/uuid"
+      }
+    },
+    "node_modules/verror": {
+      "version": "1.10.0",
+      "resolved": "https://registry.npmjs.org/verror/-/verror-1.10.0.tgz",
+      "integrity": "sha512-ZZKSmDAEFOijERBLkmYfJ+vmk3w+7hOLYDNkRCuRuMJGEmqYNCNLyBBFwWKVMhfwaEF3WOd0Zlw86U/WC/+nYw==",
+      "engines": [
+        "node >=0.6.0"
+      ],
+      "license": "MIT",
+      "dependencies": {
+        "assert-plus": "^1.0.0",
+        "core-util-is": "1.0.2",
+        "extsprintf": "^1.2.0"
+      }
+    },
+    "node_modules/wx-server-sdk": {
+      "version": "3.0.1",
+      "resolved": "https://registry.npmjs.org/wx-server-sdk/-/wx-server-sdk-3.0.1.tgz",
+      "integrity": "sha512-b53tbqTV9knXJIfcmWTmksQvk+BC54vTU6WZNwEvAJ3iOxrRhPitcygyiwFfMBWpFm9YvkwITEhU821XoG8llQ==",
+      "license": "MIT",
+      "dependencies": {
+        "@cloudbase/node-sdk": "2.10.0",
+        "json-bigint": "^1.0.0",
+        "protobufjs": "^7.2.4",
+        "tslib": "^1.9.3"
+      }
+    },
+    "node_modules/xml2js": {
+      "version": "0.5.0",
+      "resolved": "https://registry.npmjs.org/xml2js/-/xml2js-0.5.0.tgz",
+      "integrity": "sha512-drPFnkQJik/O+uPKpqSgr22mpuFHqKdbS835iAQrUC73L2F5WkboIRd63ai/2Yg6I1jzifPFKH2NTK+cfglkIA==",
+      "license": "MIT",
+      "dependencies": {
+        "sax": ">=0.6.0",
+        "xmlbuilder": "~11.0.0"
+      },
+      "engines": {
+        "node": ">=4.0.0"
+      }
+    },
+    "node_modules/xmlbuilder": {
+      "version": "11.0.1",
+      "resolved": "https://registry.npmjs.org/xmlbuilder/-/xmlbuilder-11.0.1.tgz",
+      "integrity": "sha512-fDlsI/kFEx7gLvbecc0/ohLG50fugQp8ryHzMTuW9vSa1GJ0XYWKnhsUx7oie3G98+r56aTQIUB4kht42R3JvA==",
+      "license": "MIT",
+      "engines": {
+        "node": ">=4.0"
+      }
+    }
+  }
+}
diff --git a/cloudfunctions/grantShareReward/package.json b/cloudfunctions/grantShareReward/package.json
index f443e32..1aab316 100644
--- a/cloudfunctions/grantShareReward/package.json
+++ b/cloudfunctions/grantShareReward/package.json
@@ -1,14 +1,14 @@
-{
-  "name": "grantShareReward",
-  "version": "1.0.0",
-  "description": "å¤„ç†åˆ†äº«å¥–åŠ±çš„äº‘å‡½æ•°",
-  "main": "index.js",
-  "scripts": {
-    "test": "echo \"Error: no test specified\" && exit 1"
-  },
-  "author": "",
-  "license": "ISC",
-  "dependencies": {
-    "wx-server-sdk": "latest"
-  }
+{
+  "name": "grantShareReward",
+  "version": "1.0.0",
+  "description": "å¤„ç†åˆ†äº«å¥–åŠ±çš„äº‘å‡½æ•°",
+  "main": "index.js",
+  "scripts": {
+    "test": "echo \"Error: no test specified\" && exit 1"
+  },
+  "author": "",
+  "license": "ISC",
+  "dependencies": {
+    "wx-server-sdk": "latest"
+  }
 } 
\ No newline at end of file
diff --git a/cloudfunctions/login/package.json b/cloudfunctions/login/package.json
index 4a4245c..ce90c12 100644
--- a/cloudfunctions/login/package.json
+++ b/cloudfunctions/login/package.json
@@ -1,3 +1,4 @@
+<<<<<<< Updated upstream:cloudfunctions/login/package.json
 {
   "name": "login",
   "version": "1.0.0",
@@ -11,4 +12,19 @@
   "dependencies": {
     "wx-server-sdk": "~2.6.3"
   }
+=======
+{
+  "name": "search",
+  "version": "1.0.0",
+  "description": "æœç´¢åŠŸèƒ½äº‘å‡½æ•°",
+  "main": "index.js",
+  "scripts": {
+    "test": "echo \"Error: no test specified\" && exit 1"
+  },
+  "author": "",
+  "license": "ISC",
+  "dependencies": {
+    "wx-server-sdk": "~2.6.3"
+  }
+>>>>>>> Stashed changes:cloudfunctions/search/package.json
 } 
\ No newline at end of file
diff --git a/cloudfunctions/messageManage/package.json b/cloudfunctions/messageManage/package.json
index ad3cbf2..fd24648 100644
--- a/cloudfunctions/messageManage/package.json
+++ b/cloudfunctions/messageManage/package.json
@@ -1,14 +1,14 @@
-{
-  "name": "messageManage",
-  "version": "1.0.0",
-  "description": "æ¶ˆæ¯ç®¡ç†äº‘å‡½æ•°",
-  "main": "index.js",
-  "scripts": {
-    "test": "echo \"Error: no test specified\" && exit 1"
-  },
-  "author": "",
-  "license": "ISC",
-  "dependencies": {
-    "wx-server-sdk": "~2.6.3"
-  }
+{
+  "name": "messageManage",
+  "version": "1.0.0",
+  "description": "æ¶ˆæ¯ç®¡ç†äº‘å‡½æ•°",
+  "main": "index.js",
+  "scripts": {
+    "test": "echo \"Error: no test specified\" && exit 1"
+  },
+  "author": "",
+  "license": "ISC",
+  "dependencies": {
+    "wx-server-sdk": "~2.6.3"
+  }
 } 
\ No newline at end of file
diff --git a/cloudfunctions/search/index.js b/cloudfunctions/search/index.js
new file mode 100644
index 0000000..3e4aab3
--- /dev/null
+++ b/cloudfunctions/search/index.js
@@ -0,0 +1,367 @@
+// äº‘å‡½æ•°å…¥å£æ–‡ä»¶
+const cloud = require('wx-server-sdk')
+
+cloud.init({
+  env: cloud.DYNAMIC_CURRENT_ENV
+})
+
+const db = cloud.database()
+const _ = db.command
+const $ = db.command.aggregate
+
+// äº‘å‡½æ•°å…¥å£å‡½æ•°
+exports.main = async (event, context) => {
+  const wxContext = cloud.getWXContext()
+  const { OPENID } = wxContext
+  const { action, keyword, category, limit = 20, skip = 0 } = event
+  
+  // æ ¹æ®ä¸åŒçš„æ“ä½œæ‰§è¡Œä¸åŒçš„åŠŸèƒ½
+  switch (action) {
+    case 'searchNominations':
+      return await searchNominations(keyword, category, limit, skip)
+    case 'searchByLocation':
+      return await searchByLocation(event.location, event.radius, limit, skip)
+    case 'getRecommendations':
+      return await getRecommendations(OPENID, limit)
+    case 'getPopularSearches':
+      return await getPopularSearches(limit)
+    default:
+      return {
+        success: false,
+        message: 'æœªçŸ¥æ“ä½œç±»å‹'
+      }
+  }
+}
+
+/**
+ * æœç´¢æå
+ * @param {string} keyword æœç´¢å…³é”®è¯
+ * @param {string} category åˆ†ç±»è¿‡æ»¤ï¼ˆå¯é€‰ï¼‰
+ * @param {number} limit æ¯é¡µæ•°é‡
+ * @param {number} skip è·³è¿‡è®°å½•æ•°
+ */
+async function searchNominations(keyword, category, limit = 20, skip = 0) {
+  try {
+    // è®°å½•æœç´¢å…³é”®è¯
+    if (keyword) {
+      await logSearch(keyword);
+    }
+    
+    // æ„å»ºæŸ¥è¯¢æ¡ä»¶
+    let query = {}
+    
+    // å¦‚æœæä¾›äº†å…³é”®è¯ï¼Œæ·»åŠ æ¨¡ç³Šæœç´¢æ¡ä»¶
+    if (keyword && keyword.trim()) {
+      // åˆ†è¯å¤„ç†å…³é”®è¯
+      const keywords = keyword.trim().split(/\s+/).filter(k => k);
+      
+      if (keywords.length > 0) {
+        // æ„å»ºORæ¡ä»¶ï¼ŒåŒ¹é…ä»»ä¸€å…³é”®è¯
+        const orConditions = keywords.map(k => {
+          return {
+            name: db.RegExp({
+              regexp: k,
+              options: 'i'
+            })
+          }
+        });
+        
+        // å†æ·»åŠ æè¿°å­—æ®µçš„æœç´¢
+        keywords.forEach(k => {
+          orConditions.push({
+            description: db.RegExp({
+              regexp: k,
+              options: 'i'
+            })
+          });
+          
+          // ä¿®æ”¹ä¸ºæœç´¢locationå­—æ®µ
+          orConditions.push({
+            location: db.RegExp({
+              regexp: k,
+              options: 'i'
+            })
+          });
+        });
+        
+        query = _.or(orConditions);
+      }
+    }
+    
+    // å¦‚æœæä¾›äº†åˆ†ç±»ï¼Œæ·»åŠ åˆ†ç±»è¿‡æ»¤
+    if (category) {
+      query = _.and([
+        query,
+        { category: category }
+      ]);
+    }
+    
+    // æ‰§è¡Œæœç´¢æŸ¥è¯¢
+    const searchResult = await db.collection('entries')
+      .where(query)
+      .orderBy('votes', 'desc')
+      .skip(skip)
+      .limit(limit)
+      .get();
+    
+    // è·å–æ€»è®°å½•æ•°
+    const countResult = await db.collection('entries')
+      .where(query)
+      .count();
+    
+    return {
+      success: true,
+      data: searchResult.data,
+      total: countResult.total,
+      hasMore: skip + searchResult.data.length < countResult.total
+    };
+  } catch (err) {
+    console.error('æœç´¢æåå¤±è´¥:', err);
+    return {
+      success: false,
+      message: 'æœç´¢å¤±è´¥',
+      error: err.message
+    };
+  }
+}
+
+/**
+ * æ ¹æ®ä½ç½®æœç´¢æå
+ * @param {object} location ä½ç½®åæ ‡ {latitude, longitude}
+ * @param {number} radius æœç´¢åŠå¾„ï¼ˆå…¬é‡Œï¼‰
+ * @param {number} limit æ¯é¡µæ•°é‡
+ * @param {number} skip è·³è¿‡è®°å½•æ•°
+ */
+async function searchByLocation(location, radius = 5, limit = 20, skip = 0) {
+  if (!location || !location.latitude || !location.longitude) {
+    return {
+      success: false,
+      message: 'ç¼ºå°‘ä½ç½®ä¿¡æ¯'
+    }
+  }
+  
+  try {
+    // ä½¿ç”¨èšåˆæ“ä½œè®¡ç®—è·ç¦»å¹¶ç­›é€‰
+    const result = await db.collection('entries')
+      .aggregate()
+      .geoNear({
+        distanceField: 'distance', // è¾“å‡ºçš„è·ç¦»å­—æ®µå
+        spherical: true,
+        near: {
+          type: 'Point',
+          coordinates: [location.longitude, location.latitude]
+        },
+        maxDistance: radius * 1000, // è½¬æ¢ä¸ºç±³
+        query: {
+          location: _.exists(true) // ç¡®ä¿æœ‰ä½ç½®å­—æ®µ
+        }
+      })
+      .skip(skip)
+      .limit(limit)
+      .end()
+    
+    // è®¡ç®—æ€»æ•°ï¼ˆè¿™æ˜¯ä¸€ä¸ªè¿‘ä¼¼å€¼ï¼Œå› ä¸ºgeoNearä¸æ”¯æŒç›´æ¥è®¡æ•°ï¼‰
+    const approximateTotal = await db.collection('entries')
+      .where({
+        location: _.exists(true) // ç¡®ä¿æœ‰ä½ç½®å­—æ®µ
+      })
+      .count()
+    
+    return {
+      success: true,
+      data: result.list,
+      total: approximateTotal.total,
+      hasMore: result.list.length >= limit // è¿‘ä¼¼åˆ¤æ–­
+    }
+  } catch (err) {
+    console.error('ä½ç½®æœç´¢å¤±è´¥:', err)
+    return {
+      success: false,
+      message: 'ä½ç½®æœç´¢å¤±è´¥',
+      error: err.message
+    }
+  }
+}
+
+/**
+ * è·å–æ¨èæå
+ * @param {string} openid ç”¨æˆ·çš„openid
+ * @param {number} limit è¿”å›æ•°é‡
+ */
+async function getRecommendations(openid, limit = 10) {
+  try {
+    // è·å–ç”¨æˆ·ä¿¡æ¯
+    const userRes = await db.collection('users').where({
+      openid: openid
+    }).get()
+    
+    if (!userRes.data || userRes.data.length === 0) {
+      // ç”¨æˆ·ä¸å­˜åœ¨ï¼Œè¿”å›çƒ­é—¨æå
+      return await getHotNominations(limit)
+    }
+    
+    const user = userRes.data[0]
+    
+    // è·å–ç”¨æˆ·å·²æŠ•ç¥¨çš„æå
+    const votedNominations = await db.collection('votes')
+      .where({
+        userId: user._id
+      })
+      .get()
+    
+    // æå–å·²æŠ•ç¥¨çš„æåID
+    const votedIds = votedNominations.data.map(vote => vote.targetId)
+    
+    // æŸ¥è¯¢ç”¨æˆ·å¯èƒ½å–œæ¬¢çš„æåï¼ˆåŸºäºæŠ•ç¥¨å†å²çš„åˆ†ç±»ï¼‰
+    const userVotedCategories = await db.collection('votes')
+      .aggregate()
+      .match({
+        userId: user._id
+      })
+      .lookup({
+        from: 'entries',
+        localField: 'targetId',
+        foreignField: '_id',
+        as: 'nomination'
+      })
+      .unwind('$nomination')
+      .group({
+        _id: '$nomination.category',
+        count: $.sum(1)
+      })
+      .sort({
+        count: -1
+      })
+      .limit(3) // å–ç”¨æˆ·æœ€å¸¸æŠ•ç¥¨çš„3ä¸ªåˆ†ç±»
+      .end()
+    
+    // å¦‚æœç”¨æˆ·æœ‰æŠ•ç¥¨å†å²
+    if (userVotedCategories.list.length > 0) {
+      const preferredCategories = userVotedCategories.list.map(item => item._id).filter(Boolean)
+      
+      // å¦‚æœæœ‰æ˜ç¡®çš„åˆ†ç±»åå¥½
+      if (preferredCategories.length > 0) {
+        // æŸ¥è¯¢ç¬¦åˆç”¨æˆ·åå¥½åˆ†ç±»ä¸”æœªæŠ•ç¥¨çš„æå
+        const recommendResult = await db.collection('entries')
+          .where({
+            category: _.in(preferredCategories),
+            _id: _.nin(votedIds) // æ’é™¤å·²æŠ•ç¥¨çš„
+          })
+          .orderBy('votes', 'desc')
+          .limit(limit)
+          .get()
+        
+        // å¦‚æœæ‰¾åˆ°äº†æ¨è
+        if (recommendResult.data && recommendResult.data.length > 0) {
+          return {
+            success: true,
+            data: recommendResult.data,
+            type: 'personalized'
+          }
+        }
+      }
+    }
+    
+    // å¦‚æœæ²¡æœ‰æ‰¾åˆ°ä¸ªæ€§åŒ–æ¨èï¼Œè¿”å›çƒ­é—¨æåï¼ˆæ’é™¤å·²æŠ•ç¥¨çš„ï¼‰
+    return await getHotNominations(limit, votedIds)
+  } catch (err) {
+    console.error('è·å–æ¨èæåå¤±è´¥:', err)
+    return {
+      success: false,
+      message: 'è·å–æ¨èå¤±è´¥',
+      error: err.message
+    }
+  }
+}
+
+/**
+ * è·å–çƒ­é—¨æå
+ * @param {number} limit è¿”å›æ•°é‡
+ * @param {array} excludeIds æ’é™¤çš„IDåˆ—è¡¨
+ */
+async function getHotNominations(limit = 10, excludeIds = []) {
+  try {
+    let query = {}
+    
+    // å¦‚æœæœ‰éœ€è¦æ’é™¤çš„ID
+    if (excludeIds && excludeIds.length > 0) {
+      query._id = _.nin(excludeIds)
+    }
+    
+    // è·å–çƒ­é—¨æå
+    const hotResult = await db.collection('entries')
+      .where(query)
+      .orderBy('votes', 'desc')
+      .limit(limit)
+      .get()
+    
+    return {
+      success: true,
+      data: hotResult.data,
+      type: 'trending'
+    }
+  } catch (err) {
+    console.error('è·å–çƒ­é—¨æåå¤±è´¥:', err)
+    return {
+      success: false,
+      message: 'è·å–çƒ­é—¨æåå¤±è´¥',
+      error: err.message
+    }
+  }
+}
+
+/**
+ * è·å–çƒ­é—¨æœç´¢å…³é”®è¯
+ * @param {number} limit è¿”å›æ•°é‡
+ */
+async function getPopularSearches(limit = 10) {
+  try {
+    const result = await db.collection('search_logs')
+      .aggregate()
+      .group({
+        _id: '$keyword',
+        count: $.sum(1)
+      })
+      .sort({
+        count: -1
+      })
+      .limit(limit)
+      .end()
+    
+    return {
+      success: true,
+      data: result.list.map(item => ({
+        keyword: item._id,
+        count: item.count
+      }))
+    }
+  } catch (err) {
+    console.error('è·å–çƒ­é—¨æœç´¢å¤±è´¥:', err)
+    return {
+      success: false,
+      message: 'è·å–çƒ­é—¨æœç´¢å¤±è´¥',
+      error: err.message
+    }
+  }
+}
+
+/**
+ * è®°å½•æœç´¢æ—¥å¿—
+ * @param {string} keyword æœç´¢å…³é”®è¯
+ */
+async function logSearch(keyword) {
+  try {
+    // åªè®°å½•æœ‰æ„ä¹‰çš„å…³é”®è¯
+    if (keyword && keyword.trim().length > 1) {
+      await db.collection('search_logs').add({
+        data: {
+          keyword: keyword.trim().toLowerCase(), // ç»Ÿä¸€è½¬å°å†™ä¾¿äºç»Ÿè®¡
+          createTime: db.serverDate()
+        }
+      })
+    }
+  } catch (error) {
+    console.error('è®°å½•æœç´¢æ—¥å¿—å¤±è´¥:', error)
+    // æœç´¢æ—¥å¿—è®°å½•å¤±è´¥ä¸å½±å“ä¸»æµç¨‹
+  }
+} 
\ No newline at end of file
diff --git a/cloudfunctions/shareAnalytics/package.json b/cloudfunctions/shareAnalytics/package.json
index d7fd902..f7ca75a 100644
--- a/cloudfunctions/shareAnalytics/package.json
+++ b/cloudfunctions/shareAnalytics/package.json
@@ -1,14 +1,14 @@
-{
-  "name": "shareAnalytics",
-  "version": "1.0.0",
-  "description": "åˆ†äº«æ•°æ®åˆ†æäº‘å‡½æ•°",
-  "main": "index.js",
-  "scripts": {
-    "test": "echo \"Error: no test specified\" && exit 1"
-  },
-  "author": "",
-  "license": "ISC",
-  "dependencies": {
-    "wx-server-sdk": "~2.6.3"
-  }
+{
+  "name": "shareAnalytics",
+  "version": "1.0.0",
+  "description": "åˆ†äº«æ•°æ®åˆ†æäº‘å‡½æ•°",
+  "main": "index.js",
+  "scripts": {
+    "test": "echo \"Error: no test specified\" && exit 1"
+  },
+  "author": "",
+  "license": "ISC",
+  "dependencies": {
+    "wx-server-sdk": "~2.6.3"
+  }
 } 
\ No newline at end of file
diff --git a/cloudfunctions/statistics/index.js b/cloudfunctions/statistics/index.js
index 210b8ea..7b8c765 100644
--- a/cloudfunctions/statistics/index.js
+++ b/cloudfunctions/statistics/index.js
@@ -1,354 +1,354 @@
-// äº‘å‡½æ•°å…¥å£æ–‡ä»¶
-const cloud = require('wx-server-sdk')
-
-cloud.init({
-  env: cloud.DYNAMIC_CURRENT_ENV
-})
-
-const db = cloud.database()
-const _ = db.command
-const $ = db.command.aggregate
-
-// äº‘å‡½æ•°å…¥å£å‡½æ•°
-exports.main = async (event, context) => {
-  const wxContext = cloud.getWXContext()
-  const { OPENID } = wxContext
-  const { action, timeRange } = event
-  
-  // æ ¹æ®ä¸åŒçš„æ“ä½œæ‰§è¡Œä¸åŒçš„åŠŸèƒ½
-  switch (action) {
-    case 'getDashboardStats':
-      return await getDashboardStats()
-    case 'getRankingTrends':
-      return await getRankingTrends(timeRange)
-    case 'getUserStats':
-      return await getUserStats(OPENID, event.userId)
-    case 'getCategoryStats':
-      return await getCategoryStats()
-    default:
-      return {
-        success: false,
-        message: 'æœªçŸ¥æ“ä½œç±»å‹'
-      }
-  }
-}
-
-/**
- * è·å–é¦–é¡µä»ªè¡¨æ¿ç»Ÿè®¡æ•°æ®
- */
-async function getDashboardStats() {
-  try {
-    // è·å–å„ç±»ç»Ÿè®¡æ•°æ®
-    const [
-      nominationsCount,
-      totalUsers,
-      totalVotes,
-      todayVotes
-    ] = await Promise.all([
-      db.collection('entries').count(),
-      db.collection('users').count(),
-      getTotalVotes(),
-      getTodayVotes()
-    ])
-
-    // è®¡ç®—å¢é•¿ç‡ï¼ˆä¸æ˜¨æ—¥ç›¸æ¯”ï¼‰
-    const yesterdayVotes = await getYesterdayVotes()
-    const voteGrowthRate = yesterdayVotes > 0 ? (todayVotes.total / yesterdayVotes - 1) * 100 : 0
-
-    return {
-      success: true,
-      data: {
-        nominationsCount: nominationsCount.total,
-        totalUsers: totalUsers.total,
-        totalVotes: totalVotes,
-        todayVotes: todayVotes.total,
-        voteGrowthRate: parseFloat(voteGrowthRate.toFixed(2))
-      }
-    }
-  } catch (err) {
-    console.error('è·å–ä»ªè¡¨æ¿ç»Ÿè®¡å¤±è´¥:', err)
-    return {
-      success: false,
-      message: 'è·å–ç»Ÿè®¡æ•°æ®å¤±è´¥',
-      error: err.message
-    }
-  }
-}
-
-/**
- * è·å–æ’åè¶‹åŠ¿æ•°æ®
- * @param {string} timeRange æ—¶é—´èŒƒå›´ï¼ˆweek, month, allï¼‰
- */
-async function getRankingTrends(timeRange = 'week') {
-  try {
-    let dateFilter = {}
-    const now = new Date()
-    
-    // æ ¹æ®æ—¶é—´èŒƒå›´è®¾ç½®è¿‡æ»¤æ¡ä»¶
-    if (timeRange === 'week') {
-      const weekAgo = new Date(now)
-      weekAgo.setDate(weekAgo.getDate() - 7)
-      dateFilter = _.gte(weekAgo)
-    } else if (timeRange === 'month') {
-      const monthAgo = new Date(now)
-      monthAgo.setMonth(monthAgo.getMonth() - 1)
-      dateFilter = _.gte(monthAgo)
-    }
-
-    // è·å–æ’åå‰10çš„æ¡ç›®è¶‹åŠ¿
-    const topNominations = await db.collection('entries')
-      .orderBy('votes', 'desc')
-      .limit(10)
-      .get()
-
-    // è·å–æ¯ä¸ªæ¡ç›®çš„æŠ•ç¥¨å†å²
-    const trendsData = await Promise.all(
-      topNominations.data.map(async (nomination) => {
-        let query = db.collection('votes')
-          .where({
-            targetId: nomination._id
-          })
-        
-        // æ·»åŠ æ—¶é—´è¿‡æ»¤
-        if (Object.keys(dateFilter).length > 0) {
-          query = query.where({
-            createTime: dateFilter
-          })
-        }
-        
-        // æŒ‰æ—¥æœŸåˆ†ç»„ç»Ÿè®¡
-        const votesAgg = await db.collection('votes')
-          .aggregate()
-          .match({
-            targetId: nomination._id,
-            ...(Object.keys(dateFilter).length > 0 ? { createTime: dateFilter } : {})
-          })
-          .group({
-            _id: {
-              year: $.dateToString({
-                date: '$createTime',
-                format: '%Y'
-              }),
-              month: $.dateToString({
-                date: '$createTime',
-                format: '%m'
-              }),
-              day: $.dateToString({
-                date: '$createTime',
-                format: '%d'
-              })
-            },
-            count: $.sum(1)
-          })
-          .sort({
-            '_id.year': 1,
-            '_id.month': 1,
-            '_id.day': 1
-          })
-          .end()
-
-        // æ„é€ è¶‹åŠ¿æ•°æ®
-        return {
-          id: nomination._id,
-          name: nomination.name,
-          currentVotes: nomination.votes,
-          trend: nomination.trend || 'stable',
-          dailyVotes: votesAgg.list.map(item => ({
-            date: `${item._id.year}-${item._id.month}-${item._id.day}`,
-            votes: item.count
-          }))
-        }
-      })
-    )
-
-    return {
-      success: true,
-      data: trendsData
-    }
-  } catch (err) {
-    console.error('è·å–æ’åè¶‹åŠ¿å¤±è´¥:', err)
-    return {
-      success: false,
-      message: 'è·å–æ’åè¶‹åŠ¿å¤±è´¥',
-      error: err.message
-    }
-  }
-}
-
-/**
- * è·å–ç”¨æˆ·ç»Ÿè®¡æ•°æ®
- * @param {string} openid ç”¨æˆ·çš„openid
- * @param {string} userId æŒ‡å®šæŸ¥è¯¢çš„ç”¨æˆ·ID (å¯é€‰)
- */
-async function getUserStats(openid, userId) {
-  try {
-    // è·å–ç”¨æˆ·ä¿¡æ¯
-    let userQuery = {}
-    if (userId) {
-      userQuery._id = userId
-    } else {
-      userQuery.openid = openid
-    }
-    
-    const userRes = await db.collection('users').where(userQuery).get()
-    
-    if (!userRes.data || userRes.data.length === 0) {
-      return {
-        success: false,
-        message: 'ç”¨æˆ·ä¸å­˜åœ¨'
-      }
-    }
-    
-    const user = userRes.data[0]
-    
-    // è·å–ç”¨æˆ·æåæ•°é‡
-    const nominationsCount = await db.collection('entries')
-      .where({
-        createdBy: user._id
-      })
-      .count()
-    
-    // è·å–ç”¨æˆ·æŠ•ç¥¨æ•°é‡
-    const votesCount = await db.collection('votes')
-      .where({
-        userId: user._id
-      })
-      .count()
-    
-    // è·å–ç”¨æˆ·æ”¶åˆ°çš„æŠ•ç¥¨æ•°é‡ï¼ˆä½œä¸ºæåäººï¼‰
-    const receivedVotesCount = await db.collection('votes')
-      .aggregate()
-      .lookup({
-        from: 'entries',
-        localField: 'targetId',
-        foreignField: '_id',
-        as: 'entry'
-      })
-      .match({
-        'entry.createdBy': user._id
-      })
-      .count('total')
-      .end()
-    
-    return {
-      success: true,
-      data: {
-        userId: user._id,
-        nominationsCount: nominationsCount.total,
-        votesCount: votesCount.total,
-        receivedVotesCount: receivedVotesCount.list.length > 0 ? receivedVotesCount.list[0].total : 0
-      }
-    }
-  } catch (err) {
-    console.error('è·å–ç”¨æˆ·ç»Ÿè®¡å¤±è´¥:', err)
-    return {
-      success: false,
-      message: 'è·å–ç”¨æˆ·ç»Ÿè®¡å¤±è´¥',
-      error: err.message
-    }
-  }
-}
-
-/**
- * è·å–åˆ†ç±»ç»Ÿè®¡æ•°æ®
- */
-async function getCategoryStats() {
-  try {
-    // æŒ‰åˆ†ç±»ç»Ÿè®¡æåæ•°é‡
-    const categoriesAgg = await db.collection('entries')
-      .aggregate()
-      .group({
-        _id: '$category',
-        count: $.sum(1),
-        totalVotes: $.sum('$votes')
-      })
-      .sort({
-        count: -1
-      })
-      .end()
-
-    // å¤„ç†æ²¡æœ‰åˆ†ç±»çš„æƒ…å†µ
-    const result = categoriesAgg.list.map(item => ({
-      category: item._id || 'æœªåˆ†ç±»',
-      count: item.count,
-      totalVotes: item.totalVotes,
-      averageVotes: parseFloat((item.totalVotes / item.count).toFixed(1))
-    }))
-
-    return {
-      success: true,
-      data: result
-    }
-  } catch (err) {
-    console.error('è·å–åˆ†ç±»ç»Ÿè®¡å¤±è´¥:', err)
-    return {
-      success: false,
-      message: 'è·å–åˆ†ç±»ç»Ÿè®¡å¤±è´¥',
-      error: err.message
-    }
-  }
-}
-
-/**
- * è·å–æ€»æŠ•ç¥¨æ•°
- */
-async function getTotalVotes() {
-  try {
-    const result = await db.collection('entries')
-      .aggregate()
-      .group({
-        _id: null,
-        total: $.sum('$votes')
-      })
-      .end()
-    
-    return result.list.length > 0 ? result.list[0].total : 0
-  } catch (err) {
-    console.error('è·å–æ€»æŠ•ç¥¨æ•°å¤±è´¥:', err)
-    return 0
-  }
-}
-
-/**
- * è·å–ä»Šæ—¥æŠ•ç¥¨æ•°
- */
-async function getTodayVotes() {
-  try {
-    const today = new Date()
-    today.setHours(0, 0, 0, 0)
-    
-    return await db.collection('votes')
-      .where({
-        createTime: _.gte(today)
-      })
-      .count()
-  } catch (err) {
-    console.error('è·å–ä»Šæ—¥æŠ•ç¥¨æ•°å¤±è´¥:', err)
-    return { total: 0 }
-  }
-}
-
-/**
- * è·å–æ˜¨æ—¥æŠ•ç¥¨æ•°
- */
-async function getYesterdayVotes() {
-  try {
-    const yesterday = new Date()
-    yesterday.setDate(yesterday.getDate() - 1)
-    yesterday.setHours(0, 0, 0, 0)
-    
-    const today = new Date()
-    today.setHours(0, 0, 0, 0)
-    
-    const result = await db.collection('votes')
-      .where({
-        createTime: _.gte(yesterday).and(_.lt(today))
-      })
-      .count()
-    
-    return result.total
-  } catch (err) {
-    console.error('è·å–æ˜¨æ—¥æŠ•ç¥¨æ•°å¤±è´¥:', err)
-    return 0
-  }
+// äº‘å‡½æ•°å…¥å£æ–‡ä»¶
+const cloud = require('wx-server-sdk')
+
+cloud.init({
+  env: cloud.DYNAMIC_CURRENT_ENV
+})
+
+const db = cloud.database()
+const _ = db.command
+const $ = db.command.aggregate
+
+// äº‘å‡½æ•°å…¥å£å‡½æ•°
+exports.main = async (event, context) => {
+  const wxContext = cloud.getWXContext()
+  const { OPENID } = wxContext
+  const { action, timeRange } = event
+  
+  // æ ¹æ®ä¸åŒçš„æ“ä½œæ‰§è¡Œä¸åŒçš„åŠŸèƒ½
+  switch (action) {
+    case 'getDashboardStats':
+      return await getDashboardStats()
+    case 'getRankingTrends':
+      return await getRankingTrends(timeRange)
+    case 'getUserStats':
+      return await getUserStats(OPENID, event.userId)
+    case 'getCategoryStats':
+      return await getCategoryStats()
+    default:
+      return {
+        success: false,
+        message: 'æœªçŸ¥æ“ä½œç±»å‹'
+      }
+  }
+}
+
+/**
+ * è·å–é¦–é¡µä»ªè¡¨æ¿ç»Ÿè®¡æ•°æ®
+ */
+async function getDashboardStats() {
+  try {
+    // è·å–å„ç±»ç»Ÿè®¡æ•°æ®
+    const [
+      nominationsCount,
+      totalUsers,
+      totalVotes,
+      todayVotes
+    ] = await Promise.all([
+      db.collection('entries').count(),
+      db.collection('users').count(),
+      getTotalVotes(),
+      getTodayVotes()
+    ])
+
+    // è®¡ç®—å¢é•¿ç‡ï¼ˆä¸æ˜¨æ—¥ç›¸æ¯”ï¼‰
+    const yesterdayVotes = await getYesterdayVotes()
+    const voteGrowthRate = yesterdayVotes > 0 ? (todayVotes.total / yesterdayVotes - 1) * 100 : 0
+
+    return {
+      success: true,
+      data: {
+        nominationsCount: nominationsCount.total,
+        totalUsers: totalUsers.total,
+        totalVotes: totalVotes,
+        todayVotes: todayVotes.total,
+        voteGrowthRate: parseFloat(voteGrowthRate.toFixed(2))
+      }
+    }
+  } catch (err) {
+    console.error('è·å–ä»ªè¡¨æ¿ç»Ÿè®¡å¤±è´¥:', err)
+    return {
+      success: false,
+      message: 'è·å–ç»Ÿè®¡æ•°æ®å¤±è´¥',
+      error: err.message
+    }
+  }
+}
+
+/**
+ * è·å–æ’åè¶‹åŠ¿æ•°æ®
+ * @param {string} timeRange æ—¶é—´èŒƒå›´ï¼ˆweek, month, allï¼‰
+ */
+async function getRankingTrends(timeRange = 'week') {
+  try {
+    let dateFilter = {}
+    const now = new Date()
+    
+    // æ ¹æ®æ—¶é—´èŒƒå›´è®¾ç½®è¿‡æ»¤æ¡ä»¶
+    if (timeRange === 'week') {
+      const weekAgo = new Date(now)
+      weekAgo.setDate(weekAgo.getDate() - 7)
+      dateFilter = _.gte(weekAgo)
+    } else if (timeRange === 'month') {
+      const monthAgo = new Date(now)
+      monthAgo.setMonth(monthAgo.getMonth() - 1)
+      dateFilter = _.gte(monthAgo)
+    }
+
+    // è·å–æ’åå‰10çš„æ¡ç›®è¶‹åŠ¿
+    const topNominations = await db.collection('entries')
+      .orderBy('votes', 'desc')
+      .limit(10)
+      .get()
+
+    // è·å–æ¯ä¸ªæ¡ç›®çš„æŠ•ç¥¨å†å²
+    const trendsData = await Promise.all(
+      topNominations.data.map(async (nomination) => {
+        let query = db.collection('votes')
+          .where({
+            targetId: nomination._id
+          })
+        
+        // æ·»åŠ æ—¶é—´è¿‡æ»¤
+        if (Object.keys(dateFilter).length > 0) {
+          query = query.where({
+            createTime: dateFilter
+          })
+        }
+        
+        // æŒ‰æ—¥æœŸåˆ†ç»„ç»Ÿè®¡
+        const votesAgg = await db.collection('votes')
+          .aggregate()
+          .match({
+            targetId: nomination._id,
+            ...(Object.keys(dateFilter).length > 0 ? { createTime: dateFilter } : {})
+          })
+          .group({
+            _id: {
+              year: $.dateToString({
+                date: '$createTime',
+                format: '%Y'
+              }),
+              month: $.dateToString({
+                date: '$createTime',
+                format: '%m'
+              }),
+              day: $.dateToString({
+                date: '$createTime',
+                format: '%d'
+              })
+            },
+            count: $.sum(1)
+          })
+          .sort({
+            '_id.year': 1,
+            '_id.month': 1,
+            '_id.day': 1
+          })
+          .end()
+
+        // æ„é€ è¶‹åŠ¿æ•°æ®
+        return {
+          id: nomination._id,
+          name: nomination.name,
+          currentVotes: nomination.votes,
+          trend: nomination.trend || 'stable',
+          dailyVotes: votesAgg.list.map(item => ({
+            date: `${item._id.year}-${item._id.month}-${item._id.day}`,
+            votes: item.count
+          }))
+        }
+      })
+    )
+
+    return {
+      success: true,
+      data: trendsData
+    }
+  } catch (err) {
+    console.error('è·å–æ’åè¶‹åŠ¿å¤±è´¥:', err)
+    return {
+      success: false,
+      message: 'è·å–æ’åè¶‹åŠ¿å¤±è´¥',
+      error: err.message
+    }
+  }
+}
+
+/**
+ * è·å–ç”¨æˆ·ç»Ÿè®¡æ•°æ®
+ * @param {string} openid ç”¨æˆ·çš„openid
+ * @param {string} userId æŒ‡å®šæŸ¥è¯¢çš„ç”¨æˆ·ID (å¯é€‰)
+ */
+async function getUserStats(openid, userId) {
+  try {
+    // è·å–ç”¨æˆ·ä¿¡æ¯
+    let userQuery = {}
+    if (userId) {
+      userQuery._id = userId
+    } else {
+      userQuery.openid = openid
+    }
+    
+    const userRes = await db.collection('users').where(userQuery).get()
+    
+    if (!userRes.data || userRes.data.length === 0) {
+      return {
+        success: false,
+        message: 'ç”¨æˆ·ä¸å­˜åœ¨'
+      }
+    }
+    
+    const user = userRes.data[0]
+    
+    // è·å–ç”¨æˆ·æåæ•°é‡
+    const nominationsCount = await db.collection('entries')
+      .where({
+        createdBy: user._id
+      })
+      .count()
+    
+    // è·å–ç”¨æˆ·æŠ•ç¥¨æ•°é‡
+    const votesCount = await db.collection('votes')
+      .where({
+        userId: user._id
+      })
+      .count()
+    
+    // è·å–ç”¨æˆ·æ”¶åˆ°çš„æŠ•ç¥¨æ•°é‡ï¼ˆä½œä¸ºæåäººï¼‰
+    const receivedVotesCount = await db.collection('votes')
+      .aggregate()
+      .lookup({
+        from: 'entries',
+        localField: 'targetId',
+        foreignField: '_id',
+        as: 'entry'
+      })
+      .match({
+        'entry.createdBy': user._id
+      })
+      .count('total')
+      .end()
+    
+    return {
+      success: true,
+      data: {
+        userId: user._id,
+        nominationsCount: nominationsCount.total,
+        votesCount: votesCount.total,
+        receivedVotesCount: receivedVotesCount.list.length > 0 ? receivedVotesCount.list[0].total : 0
+      }
+    }
+  } catch (err) {
+    console.error('è·å–ç”¨æˆ·ç»Ÿè®¡å¤±è´¥:', err)
+    return {
+      success: false,
+      message: 'è·å–ç”¨æˆ·ç»Ÿè®¡å¤±è´¥',
+      error: err.message
+    }
+  }
+}
+
+/**
+ * è·å–åˆ†ç±»ç»Ÿè®¡æ•°æ®
+ */
+async function getCategoryStats() {
+  try {
+    // æŒ‰åˆ†ç±»ç»Ÿè®¡æåæ•°é‡
+    const categoriesAgg = await db.collection('entries')
+      .aggregate()
+      .group({
+        _id: '$category',
+        count: $.sum(1),
+        totalVotes: $.sum('$votes')
+      })
+      .sort({
+        count: -1
+      })
+      .end()
+
+    // å¤„ç†æ²¡æœ‰åˆ†ç±»çš„æƒ…å†µ
+    const result = categoriesAgg.list.map(item => ({
+      category: item._id || 'æœªåˆ†ç±»',
+      count: item.count,
+      totalVotes: item.totalVotes,
+      averageVotes: parseFloat((item.totalVotes / item.count).toFixed(1))
+    }))
+
+    return {
+      success: true,
+      data: result
+    }
+  } catch (err) {
+    console.error('è·å–åˆ†ç±»ç»Ÿè®¡å¤±è´¥:', err)
+    return {
+      success: false,
+      message: 'è·å–åˆ†ç±»ç»Ÿè®¡å¤±è´¥',
+      error: err.message
+    }
+  }
+}
+
+/**
+ * è·å–æ€»æŠ•ç¥¨æ•°
+ */
+async function getTotalVotes() {
+  try {
+    const result = await db.collection('entries')
+      .aggregate()
+      .group({
+        _id: null,
+        total: $.sum('$votes')
+      })
+      .end()
+    
+    return result.list.length > 0 ? result.list[0].total : 0
+  } catch (err) {
+    console.error('è·å–æ€»æŠ•ç¥¨æ•°å¤±è´¥:', err)
+    return 0
+  }
+}
+
+/**
+ * è·å–ä»Šæ—¥æŠ•ç¥¨æ•°
+ */
+async function getTodayVotes() {
+  try {
+    const today = new Date()
+    today.setHours(0, 0, 0, 0)
+    
+    return await db.collection('votes')
+      .where({
+        createTime: _.gte(today)
+      })
+      .count()
+  } catch (err) {
+    console.error('è·å–ä»Šæ—¥æŠ•ç¥¨æ•°å¤±è´¥:', err)
+    return { total: 0 }
+  }
+}
+
+/**
+ * è·å–æ˜¨æ—¥æŠ•ç¥¨æ•°
+ */
+async function getYesterdayVotes() {
+  try {
+    const yesterday = new Date()
+    yesterday.setDate(yesterday.getDate() - 1)
+    yesterday.setHours(0, 0, 0, 0)
+    
+    const today = new Date()
+    today.setHours(0, 0, 0, 0)
+    
+    const result = await db.collection('votes')
+      .where({
+        createTime: _.gte(yesterday).and(_.lt(today))
+      })
+      .count()
+    
+    return result.total
+  } catch (err) {
+    console.error('è·å–æ˜¨æ—¥æŠ•ç¥¨æ•°å¤±è´¥:', err)
+    return 0
+  }
 } 
\ No newline at end of file
diff --git a/cloudfunctions/statistics/package.json b/cloudfunctions/statistics/package.json
index 3be3944..e514342 100644
--- a/cloudfunctions/statistics/package.json
+++ b/cloudfunctions/statistics/package.json
@@ -1,14 +1,14 @@
-{
-  "name": "statistics",
-  "version": "1.0.0",
-  "description": "ç»Ÿè®¡æ•°æ®åˆ†æäº‘å‡½æ•°",
-  "main": "index.js",
-  "scripts": {
-    "test": "echo \"Error: no test specified\" && exit 1"
-  },
-  "author": "",
-  "license": "ISC",
-  "dependencies": {
-    "wx-server-sdk": "~2.6.3"
-  }
+{
+  "name": "statistics",
+  "version": "1.0.0",
+  "description": "ç»Ÿè®¡æ•°æ®åˆ†æäº‘å‡½æ•°",
+  "main": "index.js",
+  "scripts": {
+    "test": "echo \"Error: no test specified\" && exit 1"
+  },
+  "author": "",
+  "license": "ISC",
+  "dependencies": {
+    "wx-server-sdk": "~2.6.3"
+  }
 } 
\ No newline at end of file
diff --git a/code-review-report.md b/code-review-report.md
index 80309d2..1c52366 100644
--- a/code-review-report.md
+++ b/code-review-report.md
@@ -1,355 +1,355 @@
-# å¾®ä¿¡å°ç¨‹åºä»£ç å®¡æŸ¥æŠ¥å‘Š
-
-## é—®é¢˜æ€»è§ˆè¡¨
-
-| é—®é¢˜æ ‡é¢˜ | ä¸¥é‡çº§åˆ« | æ‰€åœ¨æ–‡ä»¶ | å¤§è‡´è¡Œå· | ç±»å‹ |
-|---------|---------|---------|---------|-----|
-| é¡µé¢æœªåœ¨ app.json æ³¨å†Œ | é«˜ | app.json | 2-12 | Blocker |
-| ç»„ä»¶æœªåœ¨é¡µé¢ JSON ä¸­æ³¨å†Œ | é«˜ | pages/index/index.json | - | Blocker |
-| è·¯å¾„é”™è¯¯å¼•ç”¨ | é«˜ | pages/index/index.wxml | 333-337 | Blocker |
-| ä¸å®‰å…¨çš„äº‘å¼€å‘ç¯å¢ƒ ID ç¡¬ç¼–ç  | ä¸­ | app.js | 97 | Bug |
-| æµ‹è¯•ä»£ç å’Œæ³¨é‡Šæ®‹ç•™ | ä¸­ | utils/cloudUtils.js | 192-222 | Bug |
-| æœªæˆæƒæ£€æŸ¥ç¼ºå¤± | ä¸­ | pages/index/index.js | 248-259 | Bug |
-| äº‘å‡½æ•°ç™»å½•é€»è¾‘ä¸ä¸€è‡´ | ä¸­ | cloudfunctions/userManage/index.js | 32-85 | Bug |
-| èµ„æºè·¯å¾„é”™è¯¯ | ä¸­ | pages/index/index.js | 333 | Bug |
-| æŸ¥è¯¢é™åˆ¶è¿‡å° | ä½ | app.js | 167 | Perf |
-| é‡å¤æ•°æ®è·å– | ä½ | pages/index/index.js | 43-56 | Perf |
-| é¢‘ç¹ setData è°ƒç”¨ | ä½ | components/auth-dialog/auth-dialog.js | 33-45 | Perf |
-| å¤§å¯¹è±¡ä¸€æ¬¡æ€§ setData | ä½ | pages/index/index.js | 124-129 | Perf |
-| å›¾ç‰‡æœªä½¿ç”¨æ‡’åŠ è½½ | ä½ | å¤šå¤„ | - | Perf |
-
-## è¯¦ç»†é—®é¢˜åˆ†æ
-
-### Blockersï¼ˆè‡´å‘½é—®é¢˜ï¼‰
-
-#### 1. é¡µé¢æœªåœ¨ app.json æ³¨å†Œ
-
-**æ‰€åœ¨æ–‡ä»¶**: app.json (è¡Œ 2-12)  
-**é—®é¢˜æè¿°**: é¡¹ç›®ä¸­å­˜åœ¨å¤šä¸ªé¡µé¢ç›®å½•ï¼ˆå¦‚ `pages/search`ã€`pages/report-deed`ã€`pages/deeds-wall`ï¼‰ä½†æœªåœ¨ app.json çš„ pages æ•°ç»„ä¸­æ³¨å†Œã€‚æœªæ³¨å†Œçš„é¡µé¢æ— æ³•åœ¨å°ç¨‹åºä¸­è®¿é—®ã€‚
-
-**æ ¹å› åˆ†æ**: å¯èƒ½æ˜¯å¼€å‘è¿‡ç¨‹ä¸­åˆ›å»ºäº†æ–°é¡µé¢ä½†å¿˜è®°åœ¨ app.json ä¸­æ³¨å†Œï¼Œæˆ–è€…è¿™äº›é¡µé¢æš‚æ—¶æœªæŠ•å…¥ä½¿ç”¨ã€‚åœ¨ project.config.json ä¸­ `pages/search` è¢«æ˜ç¡®æ ‡è®°ä¸ºå¿½ç•¥ï¼Œä½†ä»£ç ä»ä¿ç•™åœ¨é¡¹ç›®ä¸­ã€‚
-
-**ä¿®å¤æ–¹æ¡ˆ**: 
-```json
-// app.json
-{
-  "pages": [
-    "pages/index/index",
-    "pages/detail/detail",
-    "pages/create/create",
-    "pages/add/add",
-    "pages/about/about",
-    "pages/orders/orders",
-    "pages/my-nominations/my-nominations",
-    "pages/my-votes/my-votes",
-    "pages/sound-settings/sound-settings",
-    "pages/search/search",
-    "pages/report-deed/report-deed",
-    "pages/deeds-wall/deeds-wall"
-  ],
-  ...
-}
-```
-
-**å½±å“èŒƒå›´**: è¿™äº›é¡µé¢å½“å‰æ— æ³•é€šè¿‡å°ç¨‹åºå¯¼èˆªè®¿é—®ï¼Œå¯èƒ½å¯¼è‡´åŠŸèƒ½ä¸å®Œæ•´æˆ–ç‰¹å®šè·¯å¾„è·³è½¬å¤±è´¥ã€‚
-
-#### 2. ç»„ä»¶æœªåœ¨é¡µé¢ JSON ä¸­æ³¨å†Œ
-
-**æ‰€åœ¨æ–‡ä»¶**: pages/index/index.json  
-**é—®é¢˜æè¿°**: index.wxml ä¸­ä½¿ç”¨äº† `<user-center-drawer>` ç»„ä»¶ï¼Œä½†è¯¥ç»„ä»¶æœªåœ¨å¯¹åº”çš„ index.json ä¸­é€šè¿‡ usingComponents æ³¨å†Œã€‚
-
-**æ ¹å› åˆ†æ**: ç»„ä»¶åœ¨å…¨å±€ app.json ä¸­åªæ³¨å†Œäº† auth-dialog ç»„ä»¶ï¼Œä½†å…¶ä»–è‡ªå®šä¹‰ç»„ä»¶æœªæ³¨å†Œã€‚å¾®ä¿¡å°ç¨‹åºè§„å®šï¼Œä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶å¿…é¡»å…ˆåœ¨ JSON æ–‡ä»¶çš„ usingComponents å­—æ®µä¸­æ³¨å†Œã€‚
-
-**ä¿®å¤æ–¹æ¡ˆ**:
-```json
-// pages/index/index.json
-{
-  "usingComponents": {
-    "user-center-drawer": "/components/user-center-drawer/user-center-drawer"
-  }
-}
-```
-
-**å½±å“èŒƒå›´**: æœªæ³¨å†Œçš„ç»„ä»¶å°†å¯¼è‡´é¡µé¢æ¸²æŸ“å¤±è´¥æˆ–ç™½å±ã€‚è¿™æ˜¯ä¸€ä¸ªä¸¥é‡çš„é˜»å¡æ€§é—®é¢˜ã€‚
-
-#### 3. è·¯å¾„é”™è¯¯å¼•ç”¨
-
-**æ‰€åœ¨æ–‡ä»¶**: pages/index/index.wxml (è¡Œ 333-337)  
-**é—®é¢˜æè¿°**: ä½¿ç”¨äº†å›¾ç‰‡è·¯å¾„ `/public/placeholder.jpg`ï¼Œä½†åœ¨é¡¹ç›®ç»“æ„ä¸­å¯èƒ½ä¸æ­£ç¡®ï¼Œå¯èƒ½å¯¼è‡´å›¾ç‰‡æ— æ³•åŠ è½½ã€‚
-
-**æ ¹å› åˆ†æ**: å¾®ä¿¡å°ç¨‹åºçš„è·¯å¾„è§„åˆ™è¦æ±‚ä»¥ `/` å¼€å¤´çš„ä¸ºç»å¯¹è·¯å¾„ï¼ˆä»é¡¹ç›®æ ¹ç›®å½•ç®—èµ·ï¼‰ï¼Œä½†é¡¹ç›®ä¸­çš„é™æ€èµ„æºå¯èƒ½ä½äº `/images/` æˆ–å…¶ä»–ç›®å½•ã€‚
-
-**ä¿®å¤æ–¹æ¡ˆ**: æ£€æŸ¥å›¾ç‰‡å®é™…ä½ç½®å¹¶ä¿®æ­£è·¯å¾„ï¼Œä¾‹å¦‚ï¼š
-```javascript
-// ä¿®æ­£ä¸º
-const imageUrl = '/images/placeholder.jpg'; 
-// æˆ–
-const imageUrl = '../images/placeholder.jpg';
-```
-
-**å½±å“èŒƒå›´**: åˆ†äº«åŠŸèƒ½ä¸­çš„é»˜è®¤å›¾ç‰‡æ— æ³•æ˜¾ç¤ºï¼Œå¯èƒ½å½±å“åˆ†äº«çš„è§†è§‰æ•ˆæœå’Œç”¨æˆ·ä½“éªŒã€‚
-
-### Bugsï¼ˆé€»è¾‘é”™è¯¯ï¼‰
-
-#### 4. ä¸å®‰å…¨çš„äº‘å¼€å‘ç¯å¢ƒ ID ç¡¬ç¼–ç 
-
-**æ‰€åœ¨æ–‡ä»¶**: app.js (è¡Œ 97)  
-**é—®é¢˜æè¿°**: äº‘å¼€å‘ç¯å¢ƒ ID ç›´æ¥ç¡¬ç¼–ç åœ¨æºç ä¸­ï¼š`env: 'cloud1-2g2sby6z920b76cb'`ã€‚
-
-**æ ¹å› åˆ†æ**: å¼€å‘æ—¶ç›´æ¥å°†ç¯å¢ƒ ID å†™å…¥ä»£ç ï¼Œæ²¡æœ‰ä½¿ç”¨é…ç½®æ–‡ä»¶æˆ–ç¯å¢ƒå˜é‡è¿›è¡Œç®¡ç†ã€‚è¿™ä¸ä»…ä¸å®‰å…¨ï¼Œä¹Ÿä¸ä¾¿äºç¯å¢ƒåˆ‡æ¢ï¼ˆå¦‚å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒã€ç”Ÿäº§ç¯å¢ƒï¼‰ã€‚
-
-**ä¿®å¤æ–¹æ¡ˆ**: åˆ›å»ºé…ç½®æ–‡ä»¶ç®¡ç†ç¯å¢ƒç›¸å…³å‚æ•°ï¼š
-```javascript
-// config.js
-module.exports = {
-  envId: 'cloud1-2g2sby6z920b76cb'
-}
-
-// app.js ä¸­å¼•ç”¨
-const config = require('./config.js');
-wx.cloud.init({
-  traceUser: true,
-  env: config.envId
-})
-```
-
-**å½±å“èŒƒå›´**: å½“éœ€è¦åˆ‡æ¢äº‘ç¯å¢ƒæ—¶ï¼Œéœ€è¦æ‰‹åŠ¨ä¿®æ”¹å¤šä¸ªæ–‡ä»¶ä¸­çš„ç¡¬ç¼–ç å€¼ï¼Œå¢åŠ å‡ºé”™é£é™©å’Œç»´æŠ¤æˆæœ¬ã€‚
-
-#### 5. æµ‹è¯•ä»£ç å’Œæ³¨é‡Šæ®‹ç•™
-
-**æ‰€åœ¨æ–‡ä»¶**: utils/cloudUtils.js (è¡Œ 192-222)  
-**é—®é¢˜æè¿°**: ä»£ç ä¸­åŒ…å«æ˜æ˜¾çš„è°ƒè¯•ä»£ç å’Œå…³äº monkey patch çš„æ³¨é‡Šï¼Œè¿™äº›ä¸åº”è¯¥å‡ºç°åœ¨ç”Ÿäº§ä»£ç ä¸­ã€‚
-
-**æ ¹å› åˆ†æ**: å¼€å‘è¿‡ç¨‹ä¸­çš„ä¸´æ—¶è§£å†³æ–¹æ¡ˆæœªè¢«æ¸…ç†ï¼Œä¿ç•™äº†æµ‹è¯•å’Œè°ƒè¯•ä»£ç ã€‚
-
-**ä¿®å¤æ–¹æ¡ˆ**: æ¸…ç†æµ‹è¯•ä»£ç ï¼Œä½¿ç”¨æ›´ç®€æ´å’Œæ ‡å‡†çš„å®ç°ï¼š
-```javascript
-const getSystemInfo = () => {
-  try {
-    // ä¼˜å…ˆä½¿ç”¨æ–°API
-    if (typeof wx.getSystemSetting === 'function') {
-      const systemSetting = wx.getSystemSetting();
-      const deviceInfo = wx.getDeviceInfo();
-      const windowInfo = wx.getWindowInfo();
-      const appBaseInfo = wx.getAppBaseInfo();
-      
-      return { ...systemSetting, ...deviceInfo, ...windowInfo, ...appBaseInfo };
-    } else {
-      // å…¼å®¹æ—§ç‰ˆæœ¬
-      return wx.getSystemInfoSync();
-    }
-  } catch (error) {
-    console.error('è·å–ç³»ç»Ÿä¿¡æ¯å‡ºé”™:', error);
-    return {};
-  }
-};
-```
-
-**å½±å“èŒƒå›´**: å¯èƒ½å¯¼è‡´æ½œåœ¨çš„ä»£ç æ‰§è¡Œé—®é¢˜ï¼Œç‰¹åˆ«æ˜¯åœ¨æŸäº›ç‰¹å®šæ¡ä»¶ä¸‹ï¼Œæµ‹è¯•ä»£ç å¯èƒ½è¢«æ„å¤–è§¦å‘ã€‚
-
-#### 6. æœªæˆæƒæ£€æŸ¥ç¼ºå¤±
-
-**æ‰€åœ¨æ–‡ä»¶**: pages/index/index.js (è¡Œ 248-259)  
-**é—®é¢˜æè¿°**: ç”¨æˆ·ä¸­å¿ƒå¼¹çª—é€»è¾‘ä¸­ï¼Œ`authDialog.showDialog()` å¤„ç†æµç¨‹ä¸å®Œæ•´ï¼Œå¦‚æœæˆæƒå¤±è´¥åç”¨æˆ·å†æ¬¡ç‚¹å‡»ï¼Œä¼šå†æ¬¡è§¦å‘ç›¸åŒæµç¨‹ã€‚
-
-**æ ¹å› åˆ†æ**: æœªå¦¥å–„å¤„ç†æˆæƒå¤±è´¥åçš„çŠ¶æ€è®°å½•å’Œåç»­è¡Œä¸ºæ§åˆ¶ã€‚
-
-**ä¿®å¤æ–¹æ¡ˆ**:
-```javascript
-this.authDialog.showDialog({
-  success: (userInfo) => {
-    console.log('æˆæƒç™»å½•æˆåŠŸ:', userInfo);
-    this.setData({ userInfo: userInfo });
-    wx.setStorageSync('authFailed', false); // è®°å½•æˆåŠŸçŠ¶æ€
-    openDrawerAction();
-  },
-  fail: (err) => {
-    console.error('æˆæƒç™»å½•å¤±è´¥:', err);
-    wx.setStorageSync('authFailed', true); // è®°å½•å¤±è´¥çŠ¶æ€
-    wx.showToast({
-      title: 'éœ€è¦æˆæƒæ‰èƒ½ç»§ç»­',
-      icon: 'none'
-    });
-  }
-});
-```
-
-**å½±å“èŒƒå›´**: ç”¨æˆ·æ‹’ç»æˆæƒåä½“éªŒä¸ä½³ï¼Œå¯èƒ½å¯¼è‡´é‡å¤æ˜¾ç¤ºæˆæƒå¼¹çª—ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚
-
-#### 7. äº‘å‡½æ•°ç™»å½•é€»è¾‘ä¸ä¸€è‡´
-
-**æ‰€åœ¨æ–‡ä»¶**: cloudfunctions/userManage/index.js (è¡Œ 32-85)  
-**é—®é¢˜æè¿°**: äº‘å‡½æ•°è¿”å›çš„æ•°æ®ç»“æ„åœ¨æˆåŠŸæ—¶ä¸º `{success: true, data: finalUserInfo, message: 'ç™»å½•æˆåŠŸ'}`ï¼Œä½†åœ¨ app.js ä¸­æ¥æ”¶æ—¶ä½¿ç”¨äº† `res.result.user`ã€‚
-
-**æ ¹å› åˆ†æ**: äº‘å‡½æ•°å’Œå®¢æˆ·ç«¯çš„æ•°æ®å¥‘çº¦ä¸ä¸€è‡´ï¼Œå¯èƒ½æ˜¯ç”±äºå†å²ä»£ç ä¿®æ”¹å¯¼è‡´çš„ä¸åŒ¹é…ã€‚
-
-**ä¿®å¤æ–¹æ¡ˆ**:
-```javascript
-// ä¿®æ”¹äº‘å‡½æ•°è¿”å›ç»“æ„
-return {
-  success: true,
-  user: finalUserInfo, // æ”¹ä¸º user å­—æ®µä»¥åŒ¹é…å®¢æˆ·ç«¯
-  message: 'ç™»å½•æˆåŠŸ'
-};
-
-// æˆ–è€…ä¿®æ”¹å®¢æˆ·ç«¯ä½¿ç”¨æ–¹å¼
-if (loginResult.result && loginResult.result.success) {
-  wx.setStorageSync('userInfo', loginResult.result.data); // ä½¿ç”¨ data è€Œé user
-  app.globalData.userInfo = loginResult.result.data;
-  // ...
-}
-```
-
-**å½±å“èŒƒå›´**: ç™»å½•åŠŸèƒ½å¯èƒ½å¤±è´¥ï¼Œç”¨æˆ·ä¿¡æ¯æ— æ³•æ­£ç¡®å­˜å‚¨å’Œæ˜¾ç¤ºã€‚
-
-#### 8. èµ„æºè·¯å¾„é”™è¯¯
-
-**æ‰€åœ¨æ–‡ä»¶**: pages/index/index.js (è¡Œ 333)  
-**é—®é¢˜æè¿°**: åˆ†äº«åŠŸèƒ½ä¸­ä½¿ç”¨äº†å¯èƒ½ä¸å­˜åœ¨çš„å›¾ç‰‡è·¯å¾„ `/public/placeholder.jpg`ã€‚
-
-**æ ¹å› åˆ†æ**: ä»£ç ä¸­ä½¿ç”¨äº†ç›¸å¯¹è·¯å¾„å¼•ç”¨é™æ€èµ„æºï¼Œä½†è·¯å¾„å¯èƒ½æœ‰è¯¯æˆ–èµ„æºä¸å­˜åœ¨ã€‚
-
-**ä¿®å¤æ–¹æ¡ˆ**: éªŒè¯èµ„æºè·¯å¾„å¹¶ä¿®æ­£ï¼š
-```javascript
-// æ£€æŸ¥é¡¹ç›®ä¸­æ˜¯å¦æœ‰æ­¤å›¾ç‰‡ï¼Œå¦‚æœæ²¡æœ‰ï¼Œä½¿ç”¨å…¶ä»–å­˜åœ¨çš„å›¾ç‰‡
-const imageUrl = '/images/share-cover.jpg'; // ä¿®æ­£ä¸ºå®é™…å­˜åœ¨çš„å›¾ç‰‡è·¯å¾„
-```
-
-**å½±å“èŒƒå›´**: åˆ†äº«åŠŸèƒ½çš„ç¼©ç•¥å›¾æ— æ³•æ˜¾ç¤ºï¼Œé™ä½åˆ†äº«å¸å¼•åŠ›ã€‚
-
-### Performance/Smellsï¼ˆæ€§èƒ½é—®é¢˜ï¼‰
-
-#### 9. æŸ¥è¯¢é™åˆ¶è¿‡å°
-
-**æ‰€åœ¨æ–‡ä»¶**: app.js (è¡Œ 167)  
-**é—®é¢˜æè¿°**: `db.collection('entries').limit(20)` é™åˆ¶äº†æ’è¡Œæ¦œæ•°æ®çš„æœ€å¤§è¿”å›æ•°é‡ï¼Œä½†å®é™…ä¸Šå¯èƒ½éœ€è¦æ›´å¤šæ•°æ®æ¥æ»¡è¶³ä¸šåŠ¡éœ€æ±‚ã€‚
-
-**æ ¹å› åˆ†æ**: æŸ¥è¯¢é™åˆ¶è®¾ç½®å¯èƒ½æœªå……åˆ†è€ƒè™‘å®é™…æ•°æ®é‡å’Œä¸šåŠ¡éœ€æ±‚ï¼Œå¾®ä¿¡å°ç¨‹åºäº‘æ•°æ®åº“å•æ¬¡æŸ¥è¯¢ä¸Šé™ä¸º 100 æ¡ã€‚
-
-**ä¿®å¤æ–¹æ¡ˆ**: æ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´æŸ¥è¯¢é™åˆ¶ï¼Œå¦‚æœéœ€è¦æ›´å¤šæ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨åˆ†é¡µæŸ¥è¯¢ï¼š
-```javascript
-// å¦‚æœç¡®å®éœ€è¦æ›´å¤šæ•°æ®
-db.collection('entries')
-  .orderBy('votes', 'desc')
-  .limit(50) // é€‚å½“å¢åŠ é™åˆ¶
-  .get()
-```
-
-**å½±å“èŒƒå›´**: å¯èƒ½å¯¼è‡´éƒ¨åˆ†æ’è¡Œæ•°æ®æ— æ³•æ˜¾ç¤ºï¼Œç‰¹åˆ«æ˜¯åœ¨æ•°æ®é‡å¢é•¿åã€‚
-
-#### 10. é‡å¤æ•°æ®è·å–
-
-**æ‰€åœ¨æ–‡ä»¶**: pages/index/index.js (è¡Œ 43-56)  
-**é—®é¢˜æè¿°**: åœ¨ `loadData` å‡½æ•°ä¸­ï¼Œå½“ `rankings` ä¸ºç©ºæ—¶ä¼šè°ƒç”¨ `refreshData`ï¼Œè€Œ `refreshData` å‡½æ•°åˆä¼šé‡æ–°è·å–æ•°æ®ï¼Œé€ æˆé‡å¤è¯·æ±‚ã€‚
-
-**æ ¹å› åˆ†æ**: æ•°æ®åŠ è½½é€»è¾‘è®¾è®¡ä¸å½“ï¼Œç¼ºä¹æœ‰æ•ˆçš„ç¼“å­˜ç­–ç•¥å’Œåˆ¤æ–­æœºåˆ¶ã€‚
-
-**ä¿®å¤æ–¹æ¡ˆ**: ç®€åŒ–æ•°æ®åŠ è½½é€»è¾‘ï¼š
-```javascript
-loadData() {
-  // æ£€æŸ¥æ˜¯å¦æœ‰ç¼“å­˜æ•°æ®
-  const app = getApp();
-  const rankings = app.globalData.rankings || [];
-  
-  // å¦‚æœæ²¡æœ‰æ•°æ®ï¼Œåˆ™åˆ·æ–°
-  if (!rankings || rankings.length === 0) {
-    this.refreshData();
-    return;
-  }
-  
-  // æœ‰ç¼“å­˜æ•°æ®ï¼Œç›´æ¥ä½¿ç”¨
-  this.setData({
-    rankings,
-    totalVotes: this.calculateTotalVotes(rankings),
-    totalUsers: this.calculatePopularUsers(rankings),
-    isLoading: false
-  });
-}
-```
-
-**å½±å“èŒƒå›´**: å¯èƒ½å¯¼è‡´ä¸å¿…è¦çš„ç½‘ç»œè¯·æ±‚ï¼Œå¢åŠ ç”¨æˆ·ç­‰å¾…æ—¶é—´å’ŒæœåŠ¡å™¨è´Ÿè½½ã€‚
-
-#### 11. é¢‘ç¹ setData è°ƒç”¨
-
-**æ‰€åœ¨æ–‡ä»¶**: components/auth-dialog/auth-dialog.js (è¡Œ 33-45)  
-**é—®é¢˜æè¿°**: `onChooseAvatar` å’Œ `onNicknameInput` å‡½æ•°ä¸­åˆ†åˆ«è°ƒç”¨ setDataï¼Œå¯èƒ½å¯¼è‡´é¢‘ç¹çš„è§†å›¾æ›´æ–°ã€‚
-
-**æ ¹å› åˆ†æ**: æœªåˆå¹¶ setData è°ƒç”¨ï¼Œæ¯æ¬¡ç”¨æˆ·è¾“å…¥æˆ–é€‰æ‹©éƒ½ä¼šè§¦å‘ä¸€æ¬¡è§†å›¾æ›´æ–°ã€‚
-
-**ä¿®å¤æ–¹æ¡ˆ**: å¯¹äºé¢‘ç¹å˜åŒ–çš„æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨èŠ‚æµæˆ–é˜²æŠ–æŠ€æœ¯ï¼š
-```javascript
-onNicknameInput(e) {
-  // ä½¿ç”¨é˜²æŠ–æˆ–ç›´æ¥èµ‹å€¼ï¼Œé¿å…é¢‘ç¹ setData
-  this.nickname = e.detail.value;
-  
-  // ä½¿ç”¨è®¡æ—¶å™¨å»¶è¿Ÿæ›´æ–°ï¼Œå‡å°‘ setData é¢‘ç‡
-  if (this.nicknameTimer) clearTimeout(this.nicknameTimer);
-  this.nicknameTimer = setTimeout(() => {
-    this.setData({
-      nickname: this.nickname
-    });
-  }, 300);
-}
-```
-
-**å½±å“èŒƒå›´**: åœ¨è¾“å…¥æ˜µç§°æ—¶å¯èƒ½å¯¼è‡´æ€§èƒ½ä¸‹é™ï¼Œç‰¹åˆ«æ˜¯åœ¨ä½ç«¯è®¾å¤‡ä¸Šã€‚
-
-#### 12. å¤§å¯¹è±¡ä¸€æ¬¡æ€§ setData
-
-**æ‰€åœ¨æ–‡ä»¶**: pages/index/index.js (è¡Œ 124-129)  
-**é—®é¢˜æè¿°**: åœ¨ `refreshData` ä¸­ä¸€æ¬¡æ€§æ›´æ–°äº†åŒ…å«å¯èƒ½è¾ƒå¤§çš„ rankings æ•°ç»„çš„æ•°æ®ï¼Œå¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚
-
-**æ ¹å› åˆ†æ**: æœªè€ƒè™‘æ•°æ®é‡å¢é•¿å¯¹æ€§èƒ½çš„å½±å“ï¼Œå°†å¤§å‹æ•°æ®ç»“æ„ä¸€æ¬¡æ€§ä¼ é€’ç»™ setDataã€‚
-
-**ä¿®å¤æ–¹æ¡ˆ**: åˆ†æ‹†å¤§å¯¹è±¡æ›´æ–°æˆ–ä½¿ç”¨åˆ†é¡µæ¸²æŸ“ï¼š
-```javascript
-// å…ˆæ›´æ–°å…³é”®æ•°æ®
-this.setData({
-  totalVotes: totalVotes,
-  totalUsers: totalPopular,
-  isLoading: false
-});
-
-// å†æ›´æ–°å¤§æ•°ç»„
-this.setData({
-  rankings: validRankings
-});
-
-// æˆ–è€ƒè™‘åˆ†é¡µæ˜¾ç¤º
-this.setData({
-  visibleRankings: validRankings.slice(0, 10), // å…ˆæ˜¾ç¤ºå‰10æ¡
-  rankings: validRankings,
-  hasMoreData: validRankings.length > 10
-});
-```
-
-**å½±å“èŒƒå›´**: éšç€æ’è¡Œæ¦œæ•°æ®å¢é•¿ï¼Œé¡µé¢æ¸²æŸ“æ€§èƒ½å¯èƒ½ä¸‹é™ï¼Œç‰¹åˆ«æ˜¯åœ¨ä½ç«¯è®¾å¤‡ä¸Šã€‚
-
-#### 13. å›¾ç‰‡æœªä½¿ç”¨æ‡’åŠ è½½
-
-**æ‰€åœ¨æ–‡ä»¶**: å¤šå¤„  
-**é—®é¢˜æè¿°**: åœ¨ pages/index/index.wxml ä¸­çš„æ’è¡Œæ¦œå›¾ç‰‡ä½¿ç”¨äº† lazy-loadï¼Œä½†å…¶ä»–é¡µé¢ä¸­çš„å›¾ç‰‡å¯èƒ½æ²¡æœ‰ä½¿ç”¨æ­¤å±æ€§ã€‚
-
-**æ ¹å› åˆ†æ**: æœªç»Ÿä¸€ä½¿ç”¨å›¾ç‰‡æ‡’åŠ è½½ç­–ç•¥ï¼Œå¯èƒ½å¯¼è‡´é¡µé¢åˆå§‹åŠ è½½æ€§èƒ½ä¸‹é™ã€‚
-
-**ä¿®å¤æ–¹æ¡ˆ**: ä¸ºæ‰€æœ‰åˆ—è¡¨ä¸­çš„å›¾ç‰‡æ·»åŠ æ‡’åŠ è½½å±æ€§ï¼š
-```html
-<image lazy-load="true" src="{{item.avatar}}" mode="aspectFill"></image>
-```
-
-**å½±å“èŒƒå›´**: å¯èƒ½å¯¼è‡´é¡µé¢åˆå§‹åŠ è½½æ—¶é—´å»¶é•¿ï¼Œå°¤å…¶æ˜¯åœ¨æœ‰å¤§é‡å›¾ç‰‡çš„é¡µé¢ã€‚
-
-## Top 10 ä¿®å¤ä¼˜å…ˆé˜Ÿåˆ—
-
-1. **é¡µé¢æœªåœ¨ app.json æ³¨å†Œ** - é«˜ä¼˜å…ˆçº§ï¼Œé˜»å¡åŠŸèƒ½è®¿é—®ï¼Œä¿®å¤ç®€å•æ”¶ç›Šå¤§
-2. **ç»„ä»¶æœªåœ¨é¡µé¢ JSON ä¸­æ³¨å†Œ** - é«˜ä¼˜å…ˆçº§ï¼Œå¯èƒ½å¯¼è‡´é¡µé¢æ— æ³•æ¸²æŸ“
-3. **è·¯å¾„é”™è¯¯å¼•ç”¨** - é«˜ä¼˜å…ˆçº§ï¼Œå½±å“åŠŸèƒ½å¯ç”¨æ€§
-4. **äº‘å‡½æ•°ç™»å½•é€»è¾‘ä¸ä¸€è‡´** - ä¸­ä¼˜å…ˆçº§ï¼Œå½±å“æ ¸å¿ƒç™»å½•æµç¨‹
-5. **æœªæˆæƒæ£€æŸ¥ç¼ºå¤±** - ä¸­ä¼˜å…ˆçº§ï¼Œå½±å“ç”¨æˆ·ä½“éªŒ
-6. **èµ„æºè·¯å¾„é”™è¯¯** - ä¸­ä¼˜å…ˆçº§ï¼Œå½±å“åˆ†äº«åŠŸèƒ½
-7. **ä¸å®‰å…¨çš„äº‘å¼€å‘ç¯å¢ƒ ID ç¡¬ç¼–ç ** - ä¸­ä¼˜å…ˆçº§ï¼Œå®‰å…¨å’Œå¯ç»´æŠ¤æ€§é—®é¢˜
-8. **æµ‹è¯•ä»£ç å’Œæ³¨é‡Šæ®‹ç•™** - ä¸­ä¼˜å…ˆçº§ï¼Œä»£ç è´¨é‡é—®é¢˜
-9. **é‡å¤æ•°æ®è·å–** - ä½ä¼˜å…ˆçº§ï¼Œæ€§èƒ½ä¼˜åŒ–
-10. **å¤§å¯¹è±¡ä¸€æ¬¡æ€§ setData** - ä½ä¼˜å…ˆçº§ï¼Œæ€§èƒ½ä¼˜åŒ–
-
+# å¾®ä¿¡å°ç¨‹åºä»£ç å®¡æŸ¥æŠ¥å‘Š
+
+## é—®é¢˜æ€»è§ˆè¡¨
+
+| é—®é¢˜æ ‡é¢˜ | ä¸¥é‡çº§åˆ« | æ‰€åœ¨æ–‡ä»¶ | å¤§è‡´è¡Œå· | ç±»å‹ |
+|---------|---------|---------|---------|-----|
+| é¡µé¢æœªåœ¨ app.json æ³¨å†Œ | é«˜ | app.json | 2-12 | Blocker |
+| ç»„ä»¶æœªåœ¨é¡µé¢ JSON ä¸­æ³¨å†Œ | é«˜ | pages/index/index.json | - | Blocker |
+| è·¯å¾„é”™è¯¯å¼•ç”¨ | é«˜ | pages/index/index.wxml | 333-337 | Blocker |
+| ä¸å®‰å…¨çš„äº‘å¼€å‘ç¯å¢ƒ ID ç¡¬ç¼–ç  | ä¸­ | app.js | 97 | Bug |
+| æµ‹è¯•ä»£ç å’Œæ³¨é‡Šæ®‹ç•™ | ä¸­ | utils/cloudUtils.js | 192-222 | Bug |
+| æœªæˆæƒæ£€æŸ¥ç¼ºå¤± | ä¸­ | pages/index/index.js | 248-259 | Bug |
+| äº‘å‡½æ•°ç™»å½•é€»è¾‘ä¸ä¸€è‡´ | ä¸­ | cloudfunctions/userManage/index.js | 32-85 | Bug |
+| èµ„æºè·¯å¾„é”™è¯¯ | ä¸­ | pages/index/index.js | 333 | Bug |
+| æŸ¥è¯¢é™åˆ¶è¿‡å° | ä½ | app.js | 167 | Perf |
+| é‡å¤æ•°æ®è·å– | ä½ | pages/index/index.js | 43-56 | Perf |
+| é¢‘ç¹ setData è°ƒç”¨ | ä½ | components/auth-dialog/auth-dialog.js | 33-45 | Perf |
+| å¤§å¯¹è±¡ä¸€æ¬¡æ€§ setData | ä½ | pages/index/index.js | 124-129 | Perf |
+| å›¾ç‰‡æœªä½¿ç”¨æ‡’åŠ è½½ | ä½ | å¤šå¤„ | - | Perf |
+
+## è¯¦ç»†é—®é¢˜åˆ†æ
+
+### Blockersï¼ˆè‡´å‘½é—®é¢˜ï¼‰
+
+#### 1. é¡µé¢æœªåœ¨ app.json æ³¨å†Œ
+
+**æ‰€åœ¨æ–‡ä»¶**: app.json (è¡Œ 2-12)  
+**é—®é¢˜æè¿°**: é¡¹ç›®ä¸­å­˜åœ¨å¤šä¸ªé¡µé¢ç›®å½•ï¼ˆå¦‚ `pages/search`ã€`pages/report-deed`ã€`pages/deeds-wall`ï¼‰ä½†æœªåœ¨ app.json çš„ pages æ•°ç»„ä¸­æ³¨å†Œã€‚æœªæ³¨å†Œçš„é¡µé¢æ— æ³•åœ¨å°ç¨‹åºä¸­è®¿é—®ã€‚
+
+**æ ¹å› åˆ†æ**: å¯èƒ½æ˜¯å¼€å‘è¿‡ç¨‹ä¸­åˆ›å»ºäº†æ–°é¡µé¢ä½†å¿˜è®°åœ¨ app.json ä¸­æ³¨å†Œï¼Œæˆ–è€…è¿™äº›é¡µé¢æš‚æ—¶æœªæŠ•å…¥ä½¿ç”¨ã€‚åœ¨ project.config.json ä¸­ `pages/search` è¢«æ˜ç¡®æ ‡è®°ä¸ºå¿½ç•¥ï¼Œä½†ä»£ç ä»ä¿ç•™åœ¨é¡¹ç›®ä¸­ã€‚
+
+**ä¿®å¤æ–¹æ¡ˆ**: 
+```json
+// app.json
+{
+  "pages": [
+    "pages/index/index",
+    "pages/detail/detail",
+    "pages/create/create",
+    "pages/add/add",
+    "pages/about/about",
+    "pages/orders/orders",
+    "pages/my-nominations/my-nominations",
+    "pages/my-votes/my-votes",
+    "pages/sound-settings/sound-settings",
+    "pages/search/search",
+    "pages/report-deed/report-deed",
+    "pages/deeds-wall/deeds-wall"
+  ],
+  ...
+}
+```
+
+**å½±å“èŒƒå›´**: è¿™äº›é¡µé¢å½“å‰æ— æ³•é€šè¿‡å°ç¨‹åºå¯¼èˆªè®¿é—®ï¼Œå¯èƒ½å¯¼è‡´åŠŸèƒ½ä¸å®Œæ•´æˆ–ç‰¹å®šè·¯å¾„è·³è½¬å¤±è´¥ã€‚
+
+#### 2. ç»„ä»¶æœªåœ¨é¡µé¢ JSON ä¸­æ³¨å†Œ
+
+**æ‰€åœ¨æ–‡ä»¶**: pages/index/index.json  
+**é—®é¢˜æè¿°**: index.wxml ä¸­ä½¿ç”¨äº† `<user-center-drawer>` ç»„ä»¶ï¼Œä½†è¯¥ç»„ä»¶æœªåœ¨å¯¹åº”çš„ index.json ä¸­é€šè¿‡ usingComponents æ³¨å†Œã€‚
+
+**æ ¹å› åˆ†æ**: ç»„ä»¶åœ¨å…¨å±€ app.json ä¸­åªæ³¨å†Œäº† auth-dialog ç»„ä»¶ï¼Œä½†å…¶ä»–è‡ªå®šä¹‰ç»„ä»¶æœªæ³¨å†Œã€‚å¾®ä¿¡å°ç¨‹åºè§„å®šï¼Œä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶å¿…é¡»å…ˆåœ¨ JSON æ–‡ä»¶çš„ usingComponents å­—æ®µä¸­æ³¨å†Œã€‚
+
+**ä¿®å¤æ–¹æ¡ˆ**:
+```json
+// pages/index/index.json
+{
+  "usingComponents": {
+    "user-center-drawer": "/components/user-center-drawer/user-center-drawer"
+  }
+}
+```
+
+**å½±å“èŒƒå›´**: æœªæ³¨å†Œçš„ç»„ä»¶å°†å¯¼è‡´é¡µé¢æ¸²æŸ“å¤±è´¥æˆ–ç™½å±ã€‚è¿™æ˜¯ä¸€ä¸ªä¸¥é‡çš„é˜»å¡æ€§é—®é¢˜ã€‚
+
+#### 3. è·¯å¾„é”™è¯¯å¼•ç”¨
+
+**æ‰€åœ¨æ–‡ä»¶**: pages/index/index.wxml (è¡Œ 333-337)  
+**é—®é¢˜æè¿°**: ä½¿ç”¨äº†å›¾ç‰‡è·¯å¾„ `/public/placeholder.jpg`ï¼Œä½†åœ¨é¡¹ç›®ç»“æ„ä¸­å¯èƒ½ä¸æ­£ç¡®ï¼Œå¯èƒ½å¯¼è‡´å›¾ç‰‡æ— æ³•åŠ è½½ã€‚
+
+**æ ¹å› åˆ†æ**: å¾®ä¿¡å°ç¨‹åºçš„è·¯å¾„è§„åˆ™è¦æ±‚ä»¥ `/` å¼€å¤´çš„ä¸ºç»å¯¹è·¯å¾„ï¼ˆä»é¡¹ç›®æ ¹ç›®å½•ç®—èµ·ï¼‰ï¼Œä½†é¡¹ç›®ä¸­çš„é™æ€èµ„æºå¯èƒ½ä½äº `/images/` æˆ–å…¶ä»–ç›®å½•ã€‚
+
+**ä¿®å¤æ–¹æ¡ˆ**: æ£€æŸ¥å›¾ç‰‡å®é™…ä½ç½®å¹¶ä¿®æ­£è·¯å¾„ï¼Œä¾‹å¦‚ï¼š
+```javascript
+// ä¿®æ­£ä¸º
+const imageUrl = '/images/placeholder.jpg'; 
+// æˆ–
+const imageUrl = '../images/placeholder.jpg';
+```
+
+**å½±å“èŒƒå›´**: åˆ†äº«åŠŸèƒ½ä¸­çš„é»˜è®¤å›¾ç‰‡æ— æ³•æ˜¾ç¤ºï¼Œå¯èƒ½å½±å“åˆ†äº«çš„è§†è§‰æ•ˆæœå’Œç”¨æˆ·ä½“éªŒã€‚
+
+### Bugsï¼ˆé€»è¾‘é”™è¯¯ï¼‰
+
+#### 4. ä¸å®‰å…¨çš„äº‘å¼€å‘ç¯å¢ƒ ID ç¡¬ç¼–ç 
+
+**æ‰€åœ¨æ–‡ä»¶**: app.js (è¡Œ 97)  
+**é—®é¢˜æè¿°**: äº‘å¼€å‘ç¯å¢ƒ ID ç›´æ¥ç¡¬ç¼–ç åœ¨æºç ä¸­ï¼š`env: 'cloud1-2g2sby6z920b76cb'`ã€‚
+
+**æ ¹å› åˆ†æ**: å¼€å‘æ—¶ç›´æ¥å°†ç¯å¢ƒ ID å†™å…¥ä»£ç ï¼Œæ²¡æœ‰ä½¿ç”¨é…ç½®æ–‡ä»¶æˆ–ç¯å¢ƒå˜é‡è¿›è¡Œç®¡ç†ã€‚è¿™ä¸ä»…ä¸å®‰å…¨ï¼Œä¹Ÿä¸ä¾¿äºç¯å¢ƒåˆ‡æ¢ï¼ˆå¦‚å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒã€ç”Ÿäº§ç¯å¢ƒï¼‰ã€‚
+
+**ä¿®å¤æ–¹æ¡ˆ**: åˆ›å»ºé…ç½®æ–‡ä»¶ç®¡ç†ç¯å¢ƒç›¸å…³å‚æ•°ï¼š
+```javascript
+// config.js
+module.exports = {
+  envId: 'cloud1-2g2sby6z920b76cb'
+}
+
+// app.js ä¸­å¼•ç”¨
+const config = require('./config.js');
+wx.cloud.init({
+  traceUser: true,
+  env: config.envId
+})
+```
+
+**å½±å“èŒƒå›´**: å½“éœ€è¦åˆ‡æ¢äº‘ç¯å¢ƒæ—¶ï¼Œéœ€è¦æ‰‹åŠ¨ä¿®æ”¹å¤šä¸ªæ–‡ä»¶ä¸­çš„ç¡¬ç¼–ç å€¼ï¼Œå¢åŠ å‡ºé”™é£é™©å’Œç»´æŠ¤æˆæœ¬ã€‚
+
+#### 5. æµ‹è¯•ä»£ç å’Œæ³¨é‡Šæ®‹ç•™
+
+**æ‰€åœ¨æ–‡ä»¶**: utils/cloudUtils.js (è¡Œ 192-222)  
+**é—®é¢˜æè¿°**: ä»£ç ä¸­åŒ…å«æ˜æ˜¾çš„è°ƒè¯•ä»£ç å’Œå…³äº monkey patch çš„æ³¨é‡Šï¼Œè¿™äº›ä¸åº”è¯¥å‡ºç°åœ¨ç”Ÿäº§ä»£ç ä¸­ã€‚
+
+**æ ¹å› åˆ†æ**: å¼€å‘è¿‡ç¨‹ä¸­çš„ä¸´æ—¶è§£å†³æ–¹æ¡ˆæœªè¢«æ¸…ç†ï¼Œä¿ç•™äº†æµ‹è¯•å’Œè°ƒè¯•ä»£ç ã€‚
+
+**ä¿®å¤æ–¹æ¡ˆ**: æ¸…ç†æµ‹è¯•ä»£ç ï¼Œä½¿ç”¨æ›´ç®€æ´å’Œæ ‡å‡†çš„å®ç°ï¼š
+```javascript
+const getSystemInfo = () => {
+  try {
+    // ä¼˜å…ˆä½¿ç”¨æ–°API
+    if (typeof wx.getSystemSetting === 'function') {
+      const systemSetting = wx.getSystemSetting();
+      const deviceInfo = wx.getDeviceInfo();
+      const windowInfo = wx.getWindowInfo();
+      const appBaseInfo = wx.getAppBaseInfo();
+      
+      return { ...systemSetting, ...deviceInfo, ...windowInfo, ...appBaseInfo };
+    } else {
+      // å…¼å®¹æ—§ç‰ˆæœ¬
+      return wx.getSystemInfoSync();
+    }
+  } catch (error) {
+    console.error('è·å–ç³»ç»Ÿä¿¡æ¯å‡ºé”™:', error);
+    return {};
+  }
+};
+```
+
+**å½±å“èŒƒå›´**: å¯èƒ½å¯¼è‡´æ½œåœ¨çš„ä»£ç æ‰§è¡Œé—®é¢˜ï¼Œç‰¹åˆ«æ˜¯åœ¨æŸäº›ç‰¹å®šæ¡ä»¶ä¸‹ï¼Œæµ‹è¯•ä»£ç å¯èƒ½è¢«æ„å¤–è§¦å‘ã€‚
+
+#### 6. æœªæˆæƒæ£€æŸ¥ç¼ºå¤±
+
+**æ‰€åœ¨æ–‡ä»¶**: pages/index/index.js (è¡Œ 248-259)  
+**é—®é¢˜æè¿°**: ç”¨æˆ·ä¸­å¿ƒå¼¹çª—é€»è¾‘ä¸­ï¼Œ`authDialog.showDialog()` å¤„ç†æµç¨‹ä¸å®Œæ•´ï¼Œå¦‚æœæˆæƒå¤±è´¥åç”¨æˆ·å†æ¬¡ç‚¹å‡»ï¼Œä¼šå†æ¬¡è§¦å‘ç›¸åŒæµç¨‹ã€‚
+
+**æ ¹å› åˆ†æ**: æœªå¦¥å–„å¤„ç†æˆæƒå¤±è´¥åçš„çŠ¶æ€è®°å½•å’Œåç»­è¡Œä¸ºæ§åˆ¶ã€‚
+
+**ä¿®å¤æ–¹æ¡ˆ**:
+```javascript
+this.authDialog.showDialog({
+  success: (userInfo) => {
+    console.log('æˆæƒç™»å½•æˆåŠŸ:', userInfo);
+    this.setData({ userInfo: userInfo });
+    wx.setStorageSync('authFailed', false); // è®°å½•æˆåŠŸçŠ¶æ€
+    openDrawerAction();
+  },
+  fail: (err) => {
+    console.error('æˆæƒç™»å½•å¤±è´¥:', err);
+    wx.setStorageSync('authFailed', true); // è®°å½•å¤±è´¥çŠ¶æ€
+    wx.showToast({
+      title: 'éœ€è¦æˆæƒæ‰èƒ½ç»§ç»­',
+      icon: 'none'
+    });
+  }
+});
+```
+
+**å½±å“èŒƒå›´**: ç”¨æˆ·æ‹’ç»æˆæƒåä½“éªŒä¸ä½³ï¼Œå¯èƒ½å¯¼è‡´é‡å¤æ˜¾ç¤ºæˆæƒå¼¹çª—ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚
+
+#### 7. äº‘å‡½æ•°ç™»å½•é€»è¾‘ä¸ä¸€è‡´
+
+**æ‰€åœ¨æ–‡ä»¶**: cloudfunctions/userManage/index.js (è¡Œ 32-85)  
+**é—®é¢˜æè¿°**: äº‘å‡½æ•°è¿”å›çš„æ•°æ®ç»“æ„åœ¨æˆåŠŸæ—¶ä¸º `{success: true, data: finalUserInfo, message: 'ç™»å½•æˆåŠŸ'}`ï¼Œä½†åœ¨ app.js ä¸­æ¥æ”¶æ—¶ä½¿ç”¨äº† `res.result.user`ã€‚
+
+**æ ¹å› åˆ†æ**: äº‘å‡½æ•°å’Œå®¢æˆ·ç«¯çš„æ•°æ®å¥‘çº¦ä¸ä¸€è‡´ï¼Œå¯èƒ½æ˜¯ç”±äºå†å²ä»£ç ä¿®æ”¹å¯¼è‡´çš„ä¸åŒ¹é…ã€‚
+
+**ä¿®å¤æ–¹æ¡ˆ**:
+```javascript
+// ä¿®æ”¹äº‘å‡½æ•°è¿”å›ç»“æ„
+return {
+  success: true,
+  user: finalUserInfo, // æ”¹ä¸º user å­—æ®µä»¥åŒ¹é…å®¢æˆ·ç«¯
+  message: 'ç™»å½•æˆåŠŸ'
+};
+
+// æˆ–è€…ä¿®æ”¹å®¢æˆ·ç«¯ä½¿ç”¨æ–¹å¼
+if (loginResult.result && loginResult.result.success) {
+  wx.setStorageSync('userInfo', loginResult.result.data); // ä½¿ç”¨ data è€Œé user
+  app.globalData.userInfo = loginResult.result.data;
+  // ...
+}
+```
+
+**å½±å“èŒƒå›´**: ç™»å½•åŠŸèƒ½å¯èƒ½å¤±è´¥ï¼Œç”¨æˆ·ä¿¡æ¯æ— æ³•æ­£ç¡®å­˜å‚¨å’Œæ˜¾ç¤ºã€‚
+
+#### 8. èµ„æºè·¯å¾„é”™è¯¯
+
+**æ‰€åœ¨æ–‡ä»¶**: pages/index/index.js (è¡Œ 333)  
+**é—®é¢˜æè¿°**: åˆ†äº«åŠŸèƒ½ä¸­ä½¿ç”¨äº†å¯èƒ½ä¸å­˜åœ¨çš„å›¾ç‰‡è·¯å¾„ `/public/placeholder.jpg`ã€‚
+
+**æ ¹å› åˆ†æ**: ä»£ç ä¸­ä½¿ç”¨äº†ç›¸å¯¹è·¯å¾„å¼•ç”¨é™æ€èµ„æºï¼Œä½†è·¯å¾„å¯èƒ½æœ‰è¯¯æˆ–èµ„æºä¸å­˜åœ¨ã€‚
+
+**ä¿®å¤æ–¹æ¡ˆ**: éªŒè¯èµ„æºè·¯å¾„å¹¶ä¿®æ­£ï¼š
+```javascript
+// æ£€æŸ¥é¡¹ç›®ä¸­æ˜¯å¦æœ‰æ­¤å›¾ç‰‡ï¼Œå¦‚æœæ²¡æœ‰ï¼Œä½¿ç”¨å…¶ä»–å­˜åœ¨çš„å›¾ç‰‡
+const imageUrl = '/images/share-cover.jpg'; // ä¿®æ­£ä¸ºå®é™…å­˜åœ¨çš„å›¾ç‰‡è·¯å¾„
+```
+
+**å½±å“èŒƒå›´**: åˆ†äº«åŠŸèƒ½çš„ç¼©ç•¥å›¾æ— æ³•æ˜¾ç¤ºï¼Œé™ä½åˆ†äº«å¸å¼•åŠ›ã€‚
+
+### Performance/Smellsï¼ˆæ€§èƒ½é—®é¢˜ï¼‰
+
+#### 9. æŸ¥è¯¢é™åˆ¶è¿‡å°
+
+**æ‰€åœ¨æ–‡ä»¶**: app.js (è¡Œ 167)  
+**é—®é¢˜æè¿°**: `db.collection('entries').limit(20)` é™åˆ¶äº†æ’è¡Œæ¦œæ•°æ®çš„æœ€å¤§è¿”å›æ•°é‡ï¼Œä½†å®é™…ä¸Šå¯èƒ½éœ€è¦æ›´å¤šæ•°æ®æ¥æ»¡è¶³ä¸šåŠ¡éœ€æ±‚ã€‚
+
+**æ ¹å› åˆ†æ**: æŸ¥è¯¢é™åˆ¶è®¾ç½®å¯èƒ½æœªå……åˆ†è€ƒè™‘å®é™…æ•°æ®é‡å’Œä¸šåŠ¡éœ€æ±‚ï¼Œå¾®ä¿¡å°ç¨‹åºäº‘æ•°æ®åº“å•æ¬¡æŸ¥è¯¢ä¸Šé™ä¸º 100 æ¡ã€‚
+
+**ä¿®å¤æ–¹æ¡ˆ**: æ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´æŸ¥è¯¢é™åˆ¶ï¼Œå¦‚æœéœ€è¦æ›´å¤šæ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨åˆ†é¡µæŸ¥è¯¢ï¼š
+```javascript
+// å¦‚æœç¡®å®éœ€è¦æ›´å¤šæ•°æ®
+db.collection('entries')
+  .orderBy('votes', 'desc')
+  .limit(50) // é€‚å½“å¢åŠ é™åˆ¶
+  .get()
+```
+
+**å½±å“èŒƒå›´**: å¯èƒ½å¯¼è‡´éƒ¨åˆ†æ’è¡Œæ•°æ®æ— æ³•æ˜¾ç¤ºï¼Œç‰¹åˆ«æ˜¯åœ¨æ•°æ®é‡å¢é•¿åã€‚
+
+#### 10. é‡å¤æ•°æ®è·å–
+
+**æ‰€åœ¨æ–‡ä»¶**: pages/index/index.js (è¡Œ 43-56)  
+**é—®é¢˜æè¿°**: åœ¨ `loadData` å‡½æ•°ä¸­ï¼Œå½“ `rankings` ä¸ºç©ºæ—¶ä¼šè°ƒç”¨ `refreshData`ï¼Œè€Œ `refreshData` å‡½æ•°åˆä¼šé‡æ–°è·å–æ•°æ®ï¼Œé€ æˆé‡å¤è¯·æ±‚ã€‚
+
+**æ ¹å› åˆ†æ**: æ•°æ®åŠ è½½é€»è¾‘è®¾è®¡ä¸å½“ï¼Œç¼ºä¹æœ‰æ•ˆçš„ç¼“å­˜ç­–ç•¥å’Œåˆ¤æ–­æœºåˆ¶ã€‚
+
+**ä¿®å¤æ–¹æ¡ˆ**: ç®€åŒ–æ•°æ®åŠ è½½é€»è¾‘ï¼š
+```javascript
+loadData() {
+  // æ£€æŸ¥æ˜¯å¦æœ‰ç¼“å­˜æ•°æ®
+  const app = getApp();
+  const rankings = app.globalData.rankings || [];
+  
+  // å¦‚æœæ²¡æœ‰æ•°æ®ï¼Œåˆ™åˆ·æ–°
+  if (!rankings || rankings.length === 0) {
+    this.refreshData();
+    return;
+  }
+  
+  // æœ‰ç¼“å­˜æ•°æ®ï¼Œç›´æ¥ä½¿ç”¨
+  this.setData({
+    rankings,
+    totalVotes: this.calculateTotalVotes(rankings),
+    totalUsers: this.calculatePopularUsers(rankings),
+    isLoading: false
+  });
+}
+```
+
+**å½±å“èŒƒå›´**: å¯èƒ½å¯¼è‡´ä¸å¿…è¦çš„ç½‘ç»œè¯·æ±‚ï¼Œå¢åŠ ç”¨æˆ·ç­‰å¾…æ—¶é—´å’ŒæœåŠ¡å™¨è´Ÿè½½ã€‚
+
+#### 11. é¢‘ç¹ setData è°ƒç”¨
+
+**æ‰€åœ¨æ–‡ä»¶**: components/auth-dialog/auth-dialog.js (è¡Œ 33-45)  
+**é—®é¢˜æè¿°**: `onChooseAvatar` å’Œ `onNicknameInput` å‡½æ•°ä¸­åˆ†åˆ«è°ƒç”¨ setDataï¼Œå¯èƒ½å¯¼è‡´é¢‘ç¹çš„è§†å›¾æ›´æ–°ã€‚
+
+**æ ¹å› åˆ†æ**: æœªåˆå¹¶ setData è°ƒç”¨ï¼Œæ¯æ¬¡ç”¨æˆ·è¾“å…¥æˆ–é€‰æ‹©éƒ½ä¼šè§¦å‘ä¸€æ¬¡è§†å›¾æ›´æ–°ã€‚
+
+**ä¿®å¤æ–¹æ¡ˆ**: å¯¹äºé¢‘ç¹å˜åŒ–çš„æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨èŠ‚æµæˆ–é˜²æŠ–æŠ€æœ¯ï¼š
+```javascript
+onNicknameInput(e) {
+  // ä½¿ç”¨é˜²æŠ–æˆ–ç›´æ¥èµ‹å€¼ï¼Œé¿å…é¢‘ç¹ setData
+  this.nickname = e.detail.value;
+  
+  // ä½¿ç”¨è®¡æ—¶å™¨å»¶è¿Ÿæ›´æ–°ï¼Œå‡å°‘ setData é¢‘ç‡
+  if (this.nicknameTimer) clearTimeout(this.nicknameTimer);
+  this.nicknameTimer = setTimeout(() => {
+    this.setData({
+      nickname: this.nickname
+    });
+  }, 300);
+}
+```
+
+**å½±å“èŒƒå›´**: åœ¨è¾“å…¥æ˜µç§°æ—¶å¯èƒ½å¯¼è‡´æ€§èƒ½ä¸‹é™ï¼Œç‰¹åˆ«æ˜¯åœ¨ä½ç«¯è®¾å¤‡ä¸Šã€‚
+
+#### 12. å¤§å¯¹è±¡ä¸€æ¬¡æ€§ setData
+
+**æ‰€åœ¨æ–‡ä»¶**: pages/index/index.js (è¡Œ 124-129)  
+**é—®é¢˜æè¿°**: åœ¨ `refreshData` ä¸­ä¸€æ¬¡æ€§æ›´æ–°äº†åŒ…å«å¯èƒ½è¾ƒå¤§çš„ rankings æ•°ç»„çš„æ•°æ®ï¼Œå¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚
+
+**æ ¹å› åˆ†æ**: æœªè€ƒè™‘æ•°æ®é‡å¢é•¿å¯¹æ€§èƒ½çš„å½±å“ï¼Œå°†å¤§å‹æ•°æ®ç»“æ„ä¸€æ¬¡æ€§ä¼ é€’ç»™ setDataã€‚
+
+**ä¿®å¤æ–¹æ¡ˆ**: åˆ†æ‹†å¤§å¯¹è±¡æ›´æ–°æˆ–ä½¿ç”¨åˆ†é¡µæ¸²æŸ“ï¼š
+```javascript
+// å…ˆæ›´æ–°å…³é”®æ•°æ®
+this.setData({
+  totalVotes: totalVotes,
+  totalUsers: totalPopular,
+  isLoading: false
+});
+
+// å†æ›´æ–°å¤§æ•°ç»„
+this.setData({
+  rankings: validRankings
+});
+
+// æˆ–è€ƒè™‘åˆ†é¡µæ˜¾ç¤º
+this.setData({
+  visibleRankings: validRankings.slice(0, 10), // å…ˆæ˜¾ç¤ºå‰10æ¡
+  rankings: validRankings,
+  hasMoreData: validRankings.length > 10
+});
+```
+
+**å½±å“èŒƒå›´**: éšç€æ’è¡Œæ¦œæ•°æ®å¢é•¿ï¼Œé¡µé¢æ¸²æŸ“æ€§èƒ½å¯èƒ½ä¸‹é™ï¼Œç‰¹åˆ«æ˜¯åœ¨ä½ç«¯è®¾å¤‡ä¸Šã€‚
+
+#### 13. å›¾ç‰‡æœªä½¿ç”¨æ‡’åŠ è½½
+
+**æ‰€åœ¨æ–‡ä»¶**: å¤šå¤„  
+**é—®é¢˜æè¿°**: åœ¨ pages/index/index.wxml ä¸­çš„æ’è¡Œæ¦œå›¾ç‰‡ä½¿ç”¨äº† lazy-loadï¼Œä½†å…¶ä»–é¡µé¢ä¸­çš„å›¾ç‰‡å¯èƒ½æ²¡æœ‰ä½¿ç”¨æ­¤å±æ€§ã€‚
+
+**æ ¹å› åˆ†æ**: æœªç»Ÿä¸€ä½¿ç”¨å›¾ç‰‡æ‡’åŠ è½½ç­–ç•¥ï¼Œå¯èƒ½å¯¼è‡´é¡µé¢åˆå§‹åŠ è½½æ€§èƒ½ä¸‹é™ã€‚
+
+**ä¿®å¤æ–¹æ¡ˆ**: ä¸ºæ‰€æœ‰åˆ—è¡¨ä¸­çš„å›¾ç‰‡æ·»åŠ æ‡’åŠ è½½å±æ€§ï¼š
+```html
+<image lazy-load="true" src="{{item.avatar}}" mode="aspectFill"></image>
+```
+
+**å½±å“èŒƒå›´**: å¯èƒ½å¯¼è‡´é¡µé¢åˆå§‹åŠ è½½æ—¶é—´å»¶é•¿ï¼Œå°¤å…¶æ˜¯åœ¨æœ‰å¤§é‡å›¾ç‰‡çš„é¡µé¢ã€‚
+
+## Top 10 ä¿®å¤ä¼˜å…ˆé˜Ÿåˆ—
+
+1. **é¡µé¢æœªåœ¨ app.json æ³¨å†Œ** - é«˜ä¼˜å…ˆçº§ï¼Œé˜»å¡åŠŸèƒ½è®¿é—®ï¼Œä¿®å¤ç®€å•æ”¶ç›Šå¤§
+2. **ç»„ä»¶æœªåœ¨é¡µé¢ JSON ä¸­æ³¨å†Œ** - é«˜ä¼˜å…ˆçº§ï¼Œå¯èƒ½å¯¼è‡´é¡µé¢æ— æ³•æ¸²æŸ“
+3. **è·¯å¾„é”™è¯¯å¼•ç”¨** - é«˜ä¼˜å…ˆçº§ï¼Œå½±å“åŠŸèƒ½å¯ç”¨æ€§
+4. **äº‘å‡½æ•°ç™»å½•é€»è¾‘ä¸ä¸€è‡´** - ä¸­ä¼˜å…ˆçº§ï¼Œå½±å“æ ¸å¿ƒç™»å½•æµç¨‹
+5. **æœªæˆæƒæ£€æŸ¥ç¼ºå¤±** - ä¸­ä¼˜å…ˆçº§ï¼Œå½±å“ç”¨æˆ·ä½“éªŒ
+6. **èµ„æºè·¯å¾„é”™è¯¯** - ä¸­ä¼˜å…ˆçº§ï¼Œå½±å“åˆ†äº«åŠŸèƒ½
+7. **ä¸å®‰å…¨çš„äº‘å¼€å‘ç¯å¢ƒ ID ç¡¬ç¼–ç ** - ä¸­ä¼˜å…ˆçº§ï¼Œå®‰å…¨å’Œå¯ç»´æŠ¤æ€§é—®é¢˜
+8. **æµ‹è¯•ä»£ç å’Œæ³¨é‡Šæ®‹ç•™** - ä¸­ä¼˜å…ˆçº§ï¼Œä»£ç è´¨é‡é—®é¢˜
+9. **é‡å¤æ•°æ®è·å–** - ä½ä¼˜å…ˆçº§ï¼Œæ€§èƒ½ä¼˜åŒ–
+10. **å¤§å¯¹è±¡ä¸€æ¬¡æ€§ setData** - ä½ä¼˜å…ˆçº§ï¼Œæ€§èƒ½ä¼˜åŒ–
+
 ä»¥ä¸Šé—®é¢˜ä¿®å¤åï¼Œå»ºè®®è¿›è¡Œå…¨é¢æµ‹è¯•ï¼Œç‰¹åˆ«æ˜¯é¡µé¢è·³è½¬ã€ç»„ä»¶æ¸²æŸ“ã€å’Œç”¨æˆ·è®¤è¯æµç¨‹ï¼Œç¡®ä¿åº”ç”¨æ­£å¸¸è¿è¡Œã€‚ 
\ No newline at end of file
diff --git a/components/.DS_Store b/components/.DS_Store
new file mode 100644
index 0000000000000000000000000000000000000000..4310ff92c8718998fdd9c3f411b9bd8d673c4643
GIT binary patch
literal 6148
zcmeHKyGjH>5Ukb<4lcRSaDKqRKNybl3;Y2e3o0yZpqFptcll{nKM<BZ6Tw8Pp}S^!
zyLOlgwzmP;;WXR;djMOyBR)K=&7Zrk?4mM8r1Kru81RY*jF?u{=M&D|k#WL1UKaf4
z;q7UBoTl+SQCTS<1*Cu!kOETRR|<IVrEPbKic&xdNP%w!{QJ=8j=gYBj86wci~z(9
z(_vi4EJ19ZAojvJkr|pLm6%kk5yO(se5<-%I433@R>OzY$yO7J#p!&1i*i^`RFncz
zV5z`mZuj2*Z|OhG|4Wi~Qa}p)D+O$GygMFvrRuG#%XzPD^n1G3eA3;x4hloGV`8*p
hZoC~|MN!r@U-Nk{oD+l2e9(#d8E{=>QsA!@_yVi&6>tCm

literal 0
HcmV?d00001

diff --git a/components/auth-dialog/auth-dialog.js b/components/auth-dialog/auth-dialog.js
new file mode 100644
index 0000000..dba1ed7
--- /dev/null
+++ b/components/auth-dialog/auth-dialog.js
@@ -0,0 +1,112 @@
+// components/auth-dialog/auth-dialog.js
+const app = getApp();
+
+Component({
+  data: {
+    show: false,
+    avatarUrl: '',
+    nickname: '',
+    callbacks: {},
+    isSaving: false // ç”¨äºé˜²æ­¢é‡å¤æäº¤
+  },
+  methods: {
+    preventBubble: function() {
+      // é˜»æ­¢äº‹ä»¶å†’æ³¡
+    },
+    showDialog(callbacks = {}) {
+      this.setData({
+        show: true,
+        avatarUrl: '',
+        nickname: '',
+        callbacks: callbacks
+      });
+    },
+
+    hideDialog() {
+      this.setData({ show: false });
+    },
+
+    preventClose() {
+      // é˜»æ­¢ç‚¹å‡»é®ç½©å…³é—­
+    },
+    
+    onChooseAvatar(e) {
+      if (this.data.isSaving) return;
+      const { avatarUrl } = e.detail;
+      this.setData({
+        avatarUrl: avatarUrl,
+        tempAvatarPath: avatarUrl
+      });
+    },
+
+    onNicknameInput(e) {
+      this.setData({
+        nickname: e.detail.value
+      });
+    },
+
+    async handleSaveAndLogin() {
+      if (!this.data.tempAvatarPath || !this.data.nickname.trim()) {
+        wx.showToast({
+          title: 'è¯·é€‰æ‹©å¤´åƒå¹¶è¾“å…¥æ˜µç§°',
+          icon: 'none'
+        });
+        return;
+      }
+      
+      if (this.data.isSaving) return;
+      this.setData({ isSaving: true });
+
+      wx.showLoading({
+        title: 'æ­£åœ¨ç™»å½•...',
+        mask: true
+      });
+      
+      try {
+        // 1. ä¸Šä¼ å¤´åƒåˆ°äº‘å­˜å‚¨
+        const uploadResult = await wx.cloud.uploadFile({
+          cloudPath: `user_avatars/${Date.now()}-${Math.floor(Math.random() * 1000)}.png`,
+          filePath: this.data.tempAvatarPath,
+        });
+        const fileID = uploadResult.fileID;
+
+        // è°ƒç”¨äº‘å‡½æ•°è¿›è¡Œç™»å½•/æ³¨å†Œ
+        const loginResult = await wx.cloud.callFunction({
+          name: 'userManage',
+          data: {
+            action: 'login',
+            userData: {
+              nickname: this.data.nickname,
+              avatarUrl: fileID // ä½¿ç”¨äº‘å­˜å‚¨æ–‡ä»¶ID
+            }
+          }
+        });
+
+        if (loginResult.result.success) {
+          wx.setStorageSync('userInfo', loginResult.result.user);
+          app.globalData.userInfo = loginResult.result.user;
+          this.hideDialog();
+          
+          wx.showToast({
+            title: 'ç™»å½•æˆåŠŸ',
+            icon: 'success'
+          });
+
+          // è§¦å‘ç™»å½•æˆåŠŸäº‹ä»¶
+          this.triggerEvent('loginsuccess');
+        } else {
+          throw new Error(loginResult.result.message);
+        }
+      } catch (err) {
+        console.error('ç™»å½•æˆ–ä¸Šä¼ å¤±è´¥', err);
+        wx.showToast({
+          title: err.message || 'ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•',
+          icon: 'none'
+        });
+      } finally {
+        wx.hideLoading();
+        this.setData({ isSaving: false });
+      }
+    }
+  }
+}); 
\ No newline at end of file
diff --git a/components/auth-dialog/auth-dialog.wxml b/components/auth-dialog/auth-dialog.wxml
new file mode 100644
index 0000000..0a3104a
--- /dev/null
+++ b/components/auth-dialog/auth-dialog.wxml
@@ -0,0 +1,31 @@
+<!--components/auth-dialog/auth-dialog.wxml-->
+<view class="dialog-mask" wx:if="{{show}}" bindtap="hideDialog">
+  <view class="dialog-container" catchtap="preventBubble">
+    <view class="dialog-header">
+      <view class="dialog-title">æˆæƒç™»å½•</view>
+      <text class="dialog-subtitle">ä¸ºäº†æä¾›æ›´å¥½çš„æœåŠ¡ï¼Œæˆ‘ä»¬éœ€è¦æ‚¨çš„æˆæƒ</text>
+    </view>
+    <view class="dialog-content">
+      <button class="avatar-wrapper" open-type="chooseAvatar" bind:chooseavatar="onChooseAvatar" disabled="{{isSaving}}">
+        <image class="avatar-image" src="{{avatarUrl}}"></image>
+        <view class="avatar-edit-icon">+</view>
+      </button>
+      <input 
+        class="nickname-input" 
+        type="nickname" 
+        placeholder="è¯·è¾“å…¥æ˜µç§°" 
+        bindinput="onNicknameInput"
+        value="{{nickname}}"
+        disabled="{{isSaving}}"
+      />
+    </view>
+    <view class="dialog-footer">
+      <button class="dialog-btn btn-primary" bindtap="handleSaveAndLogin" loading="{{isSaving}}" disabled="{{!tempAvatarPath || !nickname.trim()}}">
+        ä¿å­˜å¹¶ç™»å½•
+      </button>
+      <button class="dialog-btn btn-secondary" bindtap="hideDialog" disabled="{{isSaving}}">
+        æš‚ä¸ç™»å½•
+      </button>
+    </view>
+  </view>
+</view> 
\ No newline at end of file
diff --git a/components/auth-dialog/auth-dialog.wxss b/components/auth-dialog/auth-dialog.wxss
new file mode 100644
index 0000000..cb827e6
--- /dev/null
+++ b/components/auth-dialog/auth-dialog.wxss
@@ -0,0 +1,111 @@
+/* components/auth-dialog/auth-dialog.wxss */
+.dialog-mask {
+  position: fixed;
+  top: 0;
+  left: 0;
+  right: 0;
+  bottom: 0;
+  background-color: rgba(0, 0, 0, 0.6);
+  z-index: 1000;
+}
+
+.dialog-container {
+  position: fixed;
+  left: 50%;
+  top: 50%;
+  transform: translate(-50%, -50%);
+  width: 85vw;
+  max-width: 600rpx;
+  background-color: #ffffff;
+  border-radius: 24rpx;
+  z-index: 1001;
+  overflow: hidden;
+  padding: 40rpx;
+  box-sizing: border-box;
+  display: flex;
+  flex-direction: column;
+  align-items: center;
+}
+
+.dialog-title {
+  font-size: 38rpx;
+  font-weight: bold;
+  color: #333;
+  margin-bottom: 24rpx;
+}
+
+.dialog-content {
+  width: 100%;
+  font-size: 28rpx;
+  color: #666;
+  margin-bottom: 40rpx;
+}
+
+.auth-tip {
+  text-align: center;
+  margin-bottom: 40rpx;
+  color: #888;
+  font-size: 26rpx;
+}
+
+.avatar-section {
+  display: flex;
+  flex-direction: column;
+  align-items: center;
+  margin-bottom: 40rpx;
+}
+
+.avatar-wrapper {
+  padding: 0;
+  border: none;
+  background: none;
+  width: 160rpx;
+  height: 160rpx;
+  border-radius: 50%;
+  overflow: hidden;
+  margin-bottom: 16rpx;
+  box-shadow: 0 4rpx 12rpx rgba(0,0,0,0.1);
+}
+
+.avatar-image {
+  width: 100%;
+  height: 100%;
+}
+
+.avatar-tip {
+  font-size: 24rpx;
+  color: #aaa;
+}
+
+.nickname-section {
+  width: 100%;
+}
+
+.nickname-label {
+  font-size: 28rpx;
+  margin-bottom: 12rpx;
+  color: #333;
+}
+
+.nickname-input {
+  width: 100%;
+  background-color: #f7f7f7;
+  border-radius: 12rpx;
+  padding: 16rpx 24rpx;
+  box-sizing: border-box;
+  font-size: 30rpx;
+}
+
+.dialog-footer {
+  width: 100%;
+}
+
+.login-button {
+  width: 100%;
+  background-color: #07c160;
+  color: white;
+  border-radius: 12rpx;
+  font-size: 32rpx;
+  height: 90rpx;
+  line-height: 90rpx;
+} 
\ No newline at end of file
diff --git a/components/login-dialog/login-dialog.json b/components/login-dialog/login-dialog.json
index b8c1f40..ba96044 100644
--- a/components/login-dialog/login-dialog.json
+++ b/components/login-dialog/login-dialog.json
@@ -1,4 +1,4 @@
-{
-  "component": true,
-  "usingComponents": {}
+{
+  "component": true,
+  "usingComponents": {}
 } 
\ No newline at end of file
diff --git a/database-schema/content_review_logs.md b/database-schema/content_review_logs.md
index d2c30a6..8a3e442 100644
--- a/database-schema/content_review_logs.md
+++ b/database-schema/content_review_logs.md
@@ -1,119 +1,119 @@
-# Content Review Logs Collection Structure
-
-## é›†åˆåç§°
-content_review_logs
-
-## æƒé™è®¾ç½®
-- è¯»å–ï¼šä»…ç®¡ç†å‘˜
-- å†™å…¥ï¼šä»…äº‘å‡½æ•°
-
-## å­—æ®µç»“æ„
-
-| å­—æ®µåç§° | ç±»å‹ | å¿…å¡« | æè¿° |
-| ------- | ---- | ---- | ---- |
-| _id | string | æ˜¯ | æ–‡æ¡£IDï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ |
-| type | string | æ˜¯ | å®¡æ ¸ç±»å‹ï¼š'text'(æ–‡æœ¬),'image'(å›¾ç‰‡) |
-| contentType | string | æ˜¯ | å†…å®¹ç±»å‹ï¼š'comment'(è¯„è®º),'nomination'(æå),'avatar'(å¤´åƒ),'unknown'(æœªçŸ¥) |
-| content | string | æ˜¯ | è¢«å®¡æ ¸çš„å†…å®¹ï¼ˆå›¾ç‰‡ä¸ºURLï¼Œæ–‡æœ¬ä¸ºå†…å®¹ç‰‡æ®µï¼‰ |
-| pass | boolean | æ˜¯ | æ˜¯å¦é€šè¿‡å®¡æ ¸ï¼štrue(é€šè¿‡),false(æœªé€šè¿‡) |
-| result | object | æ˜¯ | å®¡æ ¸ç»“æœè¯¦æƒ…ï¼ˆå¾®ä¿¡APIè¿”å›æˆ–é”™è¯¯ä¿¡æ¯ï¼‰ |
-| createTime | date | æ˜¯ | å®¡æ ¸è®°å½•åˆ›å»ºæ—¶é—´ |
-
-## ç´¢å¼•è®¾ç½®
-
-| ç´¢å¼•å­—æ®µ | æ’åºæ–¹å‘ | è¯´æ˜ |
-| ------- | ------- | ---- |
-| type | å‡åº | ç”¨äºæŸ¥è¯¢ä¸åŒç±»å‹çš„å®¡æ ¸è®°å½• |
-| pass | å‡åº | ç”¨äºæŸ¥è¯¢é€šè¿‡/æœªé€šè¿‡çš„è®°å½• |
-| contentType | å‡åº | ç”¨äºæŸ¥è¯¢ä¸åŒå†…å®¹ç±»å‹çš„è®°å½• |
-| createTime | é™åº | ç”¨äºæŒ‰æ—¶é—´æ’åº |
-
-## æŸ¥è¯¢ç¤ºä¾‹
-
-### 1. è·å–æœ€è¿‘å¤±è´¥çš„å®¡æ ¸è®°å½•
-```javascript
-db.collection('content_review_logs')
-  .where({
-    pass: false
-  })
-  .orderBy('createTime', 'desc')
-  .limit(20)
-  .get()
-```
-
-### 2. è·å–ç‰¹å®šç±»å‹å†…å®¹çš„å®¡æ ¸è®°å½•
-```javascript
-db.collection('content_review_logs')
-  .where({
-    contentType: 'nomination'
-  })
-  .orderBy('createTime', 'desc')
-  .get()
-```
-
-### 3. è·å–å®¡æ ¸å¤±è´¥ç‡ç»Ÿè®¡
-```javascript
-const db = cloud.database()
-const $ = db.command.aggregate
-db.collection('content_review_logs')
-  .aggregate()
-  .match({
-    createTime: db.command.gte(new Date(Date.now() - 7 * 24 * 60 * 60 * 1000)) // æœ€è¿‘7å¤©
-  })
-  .group({
-    _id: '$contentType',
-    total: $.sum(1),
-    passed: $.sum($.cond({ if: '$pass', then: 1, else: 0 })),
-    failed: $.sum($.cond({ if: '$pass', then: 0, else: 1 }))
-  })
-  .end()
-```
-
-## æ•°æ®åº“æƒé™è®¾ç½®ï¼ˆJSONæ ¼å¼ï¼‰
-
-```json
-{
-  "read": "auth.is_administrator == true",
-  "write": "auth.is_administrator == true"
-}
-```
-
-## è§¦å‘å™¨è®¾ç½®ï¼ˆå»ºè®®ï¼‰
-
-1. **å®šæœŸæ¸…ç†è§¦å‘å™¨**ï¼šæ¯æœˆè‡ªåŠ¨æ¸…ç†è¶…è¿‡3ä¸ªæœˆçš„æ—¥å¿—è®°å½•ï¼Œä»¥èŠ‚çœå­˜å‚¨ç©ºé—´ã€‚
-
-```javascript
-exports.main = async (event, context) => {
-  const db = cloud.database();
-  const threeMonthsAgo = new Date();
-  threeMonthsAgo.setMonth(threeMonthsAgo.getMonth() - 3);
-  
-  try {
-    const result = await db.collection('content_review_logs')
-      .where({
-        createTime: db.command.lt(threeMonthsAgo)
-      })
-      .remove();
-    
-    return {
-      success: true,
-      deleted: result.deleted
-    };
-  } catch (err) {
-    return {
-      success: false,
-      error: err.message
-    };
-  }
-};
-```
-
-## æ³¨æ„äº‹é¡¹
-
-1. å®¡æ ¸æ—¥å¿—åº”å½“ä»…è®°å½•å¿…è¦çš„ä¿¡æ¯ï¼Œé¿å…å­˜å‚¨å®Œæ•´çš„æ•æ„Ÿå†…å®¹ã€‚
-
-2. å¯¹äºæ–‡æœ¬å†…å®¹ï¼Œå»ºè®®åªå­˜å‚¨å‰100ä¸ªå­—ç¬¦ï¼Œè¶³å¤Ÿç”¨äºè°ƒè¯•å’Œåˆ†æã€‚
-
-3. æ—¥å¿—è®°å½•åº”å½“è®¾ç½®é€‚å½“çš„TTLï¼ˆTime-To-Liveï¼‰æˆ–å®šæœŸæ¸…ç†ï¼Œé¿å…è¿‡åº¦ç§¯ç´¯ã€‚
-
+# Content Review Logs Collection Structure
+
+## é›†åˆåç§°
+content_review_logs
+
+## æƒé™è®¾ç½®
+- è¯»å–ï¼šä»…ç®¡ç†å‘˜
+- å†™å…¥ï¼šä»…äº‘å‡½æ•°
+
+## å­—æ®µç»“æ„
+
+| å­—æ®µåç§° | ç±»å‹ | å¿…å¡« | æè¿° |
+| ------- | ---- | ---- | ---- |
+| _id | string | æ˜¯ | æ–‡æ¡£IDï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ |
+| type | string | æ˜¯ | å®¡æ ¸ç±»å‹ï¼š'text'(æ–‡æœ¬),'image'(å›¾ç‰‡) |
+| contentType | string | æ˜¯ | å†…å®¹ç±»å‹ï¼š'comment'(è¯„è®º),'nomination'(æå),'avatar'(å¤´åƒ),'unknown'(æœªçŸ¥) |
+| content | string | æ˜¯ | è¢«å®¡æ ¸çš„å†…å®¹ï¼ˆå›¾ç‰‡ä¸ºURLï¼Œæ–‡æœ¬ä¸ºå†…å®¹ç‰‡æ®µï¼‰ |
+| pass | boolean | æ˜¯ | æ˜¯å¦é€šè¿‡å®¡æ ¸ï¼štrue(é€šè¿‡),false(æœªé€šè¿‡) |
+| result | object | æ˜¯ | å®¡æ ¸ç»“æœè¯¦æƒ…ï¼ˆå¾®ä¿¡APIè¿”å›æˆ–é”™è¯¯ä¿¡æ¯ï¼‰ |
+| createTime | date | æ˜¯ | å®¡æ ¸è®°å½•åˆ›å»ºæ—¶é—´ |
+
+## ç´¢å¼•è®¾ç½®
+
+| ç´¢å¼•å­—æ®µ | æ’åºæ–¹å‘ | è¯´æ˜ |
+| ------- | ------- | ---- |
+| type | å‡åº | ç”¨äºæŸ¥è¯¢ä¸åŒç±»å‹çš„å®¡æ ¸è®°å½• |
+| pass | å‡åº | ç”¨äºæŸ¥è¯¢é€šè¿‡/æœªé€šè¿‡çš„è®°å½• |
+| contentType | å‡åº | ç”¨äºæŸ¥è¯¢ä¸åŒå†…å®¹ç±»å‹çš„è®°å½• |
+| createTime | é™åº | ç”¨äºæŒ‰æ—¶é—´æ’åº |
+
+## æŸ¥è¯¢ç¤ºä¾‹
+
+### 1. è·å–æœ€è¿‘å¤±è´¥çš„å®¡æ ¸è®°å½•
+```javascript
+db.collection('content_review_logs')
+  .where({
+    pass: false
+  })
+  .orderBy('createTime', 'desc')
+  .limit(20)
+  .get()
+```
+
+### 2. è·å–ç‰¹å®šç±»å‹å†…å®¹çš„å®¡æ ¸è®°å½•
+```javascript
+db.collection('content_review_logs')
+  .where({
+    contentType: 'nomination'
+  })
+  .orderBy('createTime', 'desc')
+  .get()
+```
+
+### 3. è·å–å®¡æ ¸å¤±è´¥ç‡ç»Ÿè®¡
+```javascript
+const db = cloud.database()
+const $ = db.command.aggregate
+db.collection('content_review_logs')
+  .aggregate()
+  .match({
+    createTime: db.command.gte(new Date(Date.now() - 7 * 24 * 60 * 60 * 1000)) // æœ€è¿‘7å¤©
+  })
+  .group({
+    _id: '$contentType',
+    total: $.sum(1),
+    passed: $.sum($.cond({ if: '$pass', then: 1, else: 0 })),
+    failed: $.sum($.cond({ if: '$pass', then: 0, else: 1 }))
+  })
+  .end()
+```
+
+## æ•°æ®åº“æƒé™è®¾ç½®ï¼ˆJSONæ ¼å¼ï¼‰
+
+```json
+{
+  "read": "auth.is_administrator == true",
+  "write": "auth.is_administrator == true"
+}
+```
+
+## è§¦å‘å™¨è®¾ç½®ï¼ˆå»ºè®®ï¼‰
+
+1. **å®šæœŸæ¸…ç†è§¦å‘å™¨**ï¼šæ¯æœˆè‡ªåŠ¨æ¸…ç†è¶…è¿‡3ä¸ªæœˆçš„æ—¥å¿—è®°å½•ï¼Œä»¥èŠ‚çœå­˜å‚¨ç©ºé—´ã€‚
+
+```javascript
+exports.main = async (event, context) => {
+  const db = cloud.database();
+  const threeMonthsAgo = new Date();
+  threeMonthsAgo.setMonth(threeMonthsAgo.getMonth() - 3);
+  
+  try {
+    const result = await db.collection('content_review_logs')
+      .where({
+        createTime: db.command.lt(threeMonthsAgo)
+      })
+      .remove();
+    
+    return {
+      success: true,
+      deleted: result.deleted
+    };
+  } catch (err) {
+    return {
+      success: false,
+      error: err.message
+    };
+  }
+};
+```
+
+## æ³¨æ„äº‹é¡¹
+
+1. å®¡æ ¸æ—¥å¿—åº”å½“ä»…è®°å½•å¿…è¦çš„ä¿¡æ¯ï¼Œé¿å…å­˜å‚¨å®Œæ•´çš„æ•æ„Ÿå†…å®¹ã€‚
+
+2. å¯¹äºæ–‡æœ¬å†…å®¹ï¼Œå»ºè®®åªå­˜å‚¨å‰100ä¸ªå­—ç¬¦ï¼Œè¶³å¤Ÿç”¨äºè°ƒè¯•å’Œåˆ†æã€‚
+
+3. æ—¥å¿—è®°å½•åº”å½“è®¾ç½®é€‚å½“çš„TTLï¼ˆTime-To-Liveï¼‰æˆ–å®šæœŸæ¸…ç†ï¼Œé¿å…è¿‡åº¦ç§¯ç´¯ã€‚
+
 4. å®¡æ ¸å¤±è´¥ç‡è¿‡é«˜æ—¶åº”å½“å‘å‡ºç³»ç»Ÿå‘Šè­¦ï¼Œå¯èƒ½æ˜¯å†…å®¹è´¨é‡é—®é¢˜æˆ–å®¡æ ¸ç³»ç»Ÿå¼‚å¸¸ã€‚ 
\ No newline at end of file
diff --git a/database-schema/messages.md b/database-schema/messages.md
index a22201c..260bfcc 100644
--- a/database-schema/messages.md
+++ b/database-schema/messages.md
@@ -1,102 +1,102 @@
-# Messages Collection Structure
-
-## é›†åˆåç§°
-messages
-
-## æƒé™è®¾ç½®
-- è¯»å–ï¼šä»…åˆ›å»ºè€…
-- å†™å…¥ï¼šä»…ç®¡ç†å‘˜å’Œåˆ›å»ºè€…
-
-## å­—æ®µç»“æ„
-
-| å­—æ®µåç§° | ç±»å‹ | å¿…å¡« | æè¿° |
-| ------- | ---- | ---- | ---- |
-| _id | string | æ˜¯ | æ–‡æ¡£IDï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ |
-| _openid | string | å¦ | åˆ›å»ºè€…çš„openidï¼Œä»…å‰ç«¯åˆ›å»ºæ—¶è‡ªåŠ¨ç”Ÿæˆ |
-| receiverId | string | æ˜¯ | æ¥æ”¶æ¶ˆæ¯çš„ç”¨æˆ·ID |
-| senderId | string | å¦ | å‘é€æ¶ˆæ¯çš„ç”¨æˆ·IDï¼Œè‹¥ä¸ºç³»ç»Ÿæ¶ˆæ¯åˆ™ä¸ºnull |
-| senderName | string | æ˜¯ | å‘é€è€…åç§°ï¼Œé»˜è®¤ä¸º"ç³»ç»Ÿ" |
-| senderAvatar | string | æ˜¯ | å‘é€è€…å¤´åƒURLï¼Œé»˜è®¤ä¸ºå ä½å›¾ç‰‡ |
-| type | string | æ˜¯ | æ¶ˆæ¯ç±»å‹ï¼š'system'(ç³»ç»Ÿ),'vote'(æŠ•ç¥¨),'comment'(è¯„è®º),'nomination'(æå) |
-| content | string | æ˜¯ | æ¶ˆæ¯å†…å®¹ |
-| read | boolean | æ˜¯ | æ˜¯å¦å·²è¯»ï¼šfalse(æœªè¯»),true(å·²è¯») |
-| nominationId | string | å¦ | ç›¸å…³æåçš„IDï¼ˆå¦‚æœæœ‰ï¼‰ |
-| nominationTitle | string | å¦ | ç›¸å…³æåçš„æ ‡é¢˜ï¼ˆå¦‚æœæœ‰ï¼‰ |
-| readTime | date | å¦ | æ¶ˆæ¯è¢«é˜…è¯»çš„æ—¶é—´ï¼ˆå¦‚æœå·²è¯»ï¼‰ |
-| createTime | date | æ˜¯ | æ¶ˆæ¯åˆ›å»ºæ—¶é—´ï¼ˆæœåŠ¡å™¨æ—¶é—´ï¼‰ |
-| _createTime | number | æ˜¯ | æ¶ˆæ¯åˆ›å»ºæ—¶é—´çš„æ—¶é—´æˆ³ï¼ˆç”¨äºæ’åºï¼‰ |
-
-## ç´¢å¼•è®¾ç½®
-
-| ç´¢å¼•å­—æ®µ | æ’åºæ–¹å‘ | è¯´æ˜ |
-| ------- | ------- | ---- |
-| receiverId | å‡åº | ç”¨äºæŸ¥è¯¢ç”¨æˆ·æ”¶åˆ°çš„æ¶ˆæ¯ |
-| read | å‡åº | ç”¨äºæŸ¥è¯¢æœªè¯»æ¶ˆæ¯ |
-| createTime | é™åº | ç”¨äºæŒ‰æ—¶é—´æ’åº |
-
-## æŸ¥è¯¢ç¤ºä¾‹
-
-### 1. è·å–ç”¨æˆ·æ‰€æœ‰æ¶ˆæ¯
-```javascript
-db.collection('messages')
-  .where({
-    receiverId: 'user123'
-  })
-  .orderBy('createTime', 'desc')
-  .get()
-```
-
-### 2. è·å–ç”¨æˆ·æœªè¯»æ¶ˆæ¯
-```javascript
-db.collection('messages')
-  .where({
-    receiverId: 'user123',
-    read: false
-  })
-  .orderBy('createTime', 'desc')
-  .get()
-```
-
-### 3. è·å–ç”¨æˆ·æœªè¯»æ¶ˆæ¯æ•°é‡
-```javascript
-db.collection('messages')
-  .where({
-    receiverId: 'user123',
-    read: false
-  })
-  .count()
-```
-
-### 4. æŒ‰ç±»å‹è·å–æ¶ˆæ¯
-```javascript
-db.collection('messages')
-  .where({
-    receiverId: 'user123',
-    type: 'vote'
-  })
-  .orderBy('createTime', 'desc')
-  .get()
-```
-
-## æ•°æ®åº“æƒé™è®¾ç½®ï¼ˆJSONæ ¼å¼ï¼‰
-
-```json
-{
-  "read": "doc._openid == auth.openid || doc.receiverId == auth.user_id",
-  "write": "doc._openid == auth.openid || auth.is_administrator == true"
-}
-```
-
-## è§¦å‘å™¨è®¾ç½®ï¼ˆå»ºè®®ï¼‰
-
-1. **æ–°æ¶ˆæ¯é€šçŸ¥è§¦å‘å™¨**ï¼šå½“æ–°æ¶ˆæ¯åˆ›å»ºæ—¶ï¼Œå¯ä»¥é€šè¿‡äº‘å‡½æ•°è§¦å‘å™¨å‘ç”¨æˆ·å‘é€è®¢é˜…æ¶ˆæ¯é€šçŸ¥ï¼ˆéœ€è¦ç”¨æˆ·äº‹å…ˆè®¢é˜…ï¼‰ã€‚
-
-2. **æ¶ˆæ¯æ¸…ç†è§¦å‘å™¨**ï¼šå®šæœŸï¼ˆå¦‚æ¯æœˆï¼‰æ¸…ç†è¿‡æœŸæ¶ˆæ¯ï¼ˆå¦‚å·²è¯»ä¸”è¶…è¿‡3ä¸ªæœˆçš„ç³»ç»Ÿæ¶ˆæ¯ï¼‰ã€‚
-
-## æ³¨æ„äº‹é¡¹
-
-1. ä¸ºä¿è¯æ¶ˆæ¯çš„å®‰å…¨æ€§ï¼Œæ¶ˆæ¯åº”å½“ç”±äº‘å‡½æ•°åˆ›å»ºå’Œç®¡ç†ï¼Œé¿å…ç›´æ¥åœ¨å°ç¨‹åºç«¯åˆ›å»ºæ¶ˆæ¯ã€‚
-
-2. æ¶ˆæ¯åº”å½“ä¸ç”¨æˆ·è´¦æˆ·ç³»ç»Ÿæ·±åº¦é›†æˆï¼Œç¡®ä¿ç”¨æˆ·IDçš„ä¸€è‡´æ€§ã€‚
-
+# Messages Collection Structure
+
+## é›†åˆåç§°
+messages
+
+## æƒé™è®¾ç½®
+- è¯»å–ï¼šä»…åˆ›å»ºè€…
+- å†™å…¥ï¼šä»…ç®¡ç†å‘˜å’Œåˆ›å»ºè€…
+
+## å­—æ®µç»“æ„
+
+| å­—æ®µåç§° | ç±»å‹ | å¿…å¡« | æè¿° |
+| ------- | ---- | ---- | ---- |
+| _id | string | æ˜¯ | æ–‡æ¡£IDï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ |
+| _openid | string | å¦ | åˆ›å»ºè€…çš„openidï¼Œä»…å‰ç«¯åˆ›å»ºæ—¶è‡ªåŠ¨ç”Ÿæˆ |
+| receiverId | string | æ˜¯ | æ¥æ”¶æ¶ˆæ¯çš„ç”¨æˆ·ID |
+| senderId | string | å¦ | å‘é€æ¶ˆæ¯çš„ç”¨æˆ·IDï¼Œè‹¥ä¸ºç³»ç»Ÿæ¶ˆæ¯åˆ™ä¸ºnull |
+| senderName | string | æ˜¯ | å‘é€è€…åç§°ï¼Œé»˜è®¤ä¸º"ç³»ç»Ÿ" |
+| senderAvatar | string | æ˜¯ | å‘é€è€…å¤´åƒURLï¼Œé»˜è®¤ä¸ºå ä½å›¾ç‰‡ |
+| type | string | æ˜¯ | æ¶ˆæ¯ç±»å‹ï¼š'system'(ç³»ç»Ÿ),'vote'(æŠ•ç¥¨),'comment'(è¯„è®º),'nomination'(æå) |
+| content | string | æ˜¯ | æ¶ˆæ¯å†…å®¹ |
+| read | boolean | æ˜¯ | æ˜¯å¦å·²è¯»ï¼šfalse(æœªè¯»),true(å·²è¯») |
+| nominationId | string | å¦ | ç›¸å…³æåçš„IDï¼ˆå¦‚æœæœ‰ï¼‰ |
+| nominationTitle | string | å¦ | ç›¸å…³æåçš„æ ‡é¢˜ï¼ˆå¦‚æœæœ‰ï¼‰ |
+| readTime | date | å¦ | æ¶ˆæ¯è¢«é˜…è¯»çš„æ—¶é—´ï¼ˆå¦‚æœå·²è¯»ï¼‰ |
+| createTime | date | æ˜¯ | æ¶ˆæ¯åˆ›å»ºæ—¶é—´ï¼ˆæœåŠ¡å™¨æ—¶é—´ï¼‰ |
+| _createTime | number | æ˜¯ | æ¶ˆæ¯åˆ›å»ºæ—¶é—´çš„æ—¶é—´æˆ³ï¼ˆç”¨äºæ’åºï¼‰ |
+
+## ç´¢å¼•è®¾ç½®
+
+| ç´¢å¼•å­—æ®µ | æ’åºæ–¹å‘ | è¯´æ˜ |
+| ------- | ------- | ---- |
+| receiverId | å‡åº | ç”¨äºæŸ¥è¯¢ç”¨æˆ·æ”¶åˆ°çš„æ¶ˆæ¯ |
+| read | å‡åº | ç”¨äºæŸ¥è¯¢æœªè¯»æ¶ˆæ¯ |
+| createTime | é™åº | ç”¨äºæŒ‰æ—¶é—´æ’åº |
+
+## æŸ¥è¯¢ç¤ºä¾‹
+
+### 1. è·å–ç”¨æˆ·æ‰€æœ‰æ¶ˆæ¯
+```javascript
+db.collection('messages')
+  .where({
+    receiverId: 'user123'
+  })
+  .orderBy('createTime', 'desc')
+  .get()
+```
+
+### 2. è·å–ç”¨æˆ·æœªè¯»æ¶ˆæ¯
+```javascript
+db.collection('messages')
+  .where({
+    receiverId: 'user123',
+    read: false
+  })
+  .orderBy('createTime', 'desc')
+  .get()
+```
+
+### 3. è·å–ç”¨æˆ·æœªè¯»æ¶ˆæ¯æ•°é‡
+```javascript
+db.collection('messages')
+  .where({
+    receiverId: 'user123',
+    read: false
+  })
+  .count()
+```
+
+### 4. æŒ‰ç±»å‹è·å–æ¶ˆæ¯
+```javascript
+db.collection('messages')
+  .where({
+    receiverId: 'user123',
+    type: 'vote'
+  })
+  .orderBy('createTime', 'desc')
+  .get()
+```
+
+## æ•°æ®åº“æƒé™è®¾ç½®ï¼ˆJSONæ ¼å¼ï¼‰
+
+```json
+{
+  "read": "doc._openid == auth.openid || doc.receiverId == auth.user_id",
+  "write": "doc._openid == auth.openid || auth.is_administrator == true"
+}
+```
+
+## è§¦å‘å™¨è®¾ç½®ï¼ˆå»ºè®®ï¼‰
+
+1. **æ–°æ¶ˆæ¯é€šçŸ¥è§¦å‘å™¨**ï¼šå½“æ–°æ¶ˆæ¯åˆ›å»ºæ—¶ï¼Œå¯ä»¥é€šè¿‡äº‘å‡½æ•°è§¦å‘å™¨å‘ç”¨æˆ·å‘é€è®¢é˜…æ¶ˆæ¯é€šçŸ¥ï¼ˆéœ€è¦ç”¨æˆ·äº‹å…ˆè®¢é˜…ï¼‰ã€‚
+
+2. **æ¶ˆæ¯æ¸…ç†è§¦å‘å™¨**ï¼šå®šæœŸï¼ˆå¦‚æ¯æœˆï¼‰æ¸…ç†è¿‡æœŸæ¶ˆæ¯ï¼ˆå¦‚å·²è¯»ä¸”è¶…è¿‡3ä¸ªæœˆçš„ç³»ç»Ÿæ¶ˆæ¯ï¼‰ã€‚
+
+## æ³¨æ„äº‹é¡¹
+
+1. ä¸ºä¿è¯æ¶ˆæ¯çš„å®‰å…¨æ€§ï¼Œæ¶ˆæ¯åº”å½“ç”±äº‘å‡½æ•°åˆ›å»ºå’Œç®¡ç†ï¼Œé¿å…ç›´æ¥åœ¨å°ç¨‹åºç«¯åˆ›å»ºæ¶ˆæ¯ã€‚
+
+2. æ¶ˆæ¯åº”å½“ä¸ç”¨æˆ·è´¦æˆ·ç³»ç»Ÿæ·±åº¦é›†æˆï¼Œç¡®ä¿ç”¨æˆ·IDçš„ä¸€è‡´æ€§ã€‚
+
 3. åœ¨æ˜¾ç¤ºæ¶ˆæ¯æ—¶ï¼Œåº”å½“æ£€æŸ¥ç›¸å…³çš„æåæˆ–è¯„è®ºæ˜¯å¦ä»ç„¶å­˜åœ¨ï¼Œé¿å…æ˜¾ç¤ºå·²åˆ é™¤å†…å®¹çš„ç›¸å…³æ¶ˆæ¯ã€‚ 
\ No newline at end of file
diff --git a/database-schema/search_logs.md b/database-schema/search_logs.md
new file mode 100644
index 0000000..f4c5215
--- /dev/null
+++ b/database-schema/search_logs.md
@@ -0,0 +1,138 @@
+# Search Logs Collection Structure
+
+## é›†åˆåç§°
+search_logs
+
+## æƒé™è®¾ç½®
+- è¯»å–ï¼šä»…ç®¡ç†å‘˜
+- å†™å…¥ï¼šä»…äº‘å‡½æ•°
+
+## å­—æ®µç»“æ„
+
+| å­—æ®µåç§° | ç±»å‹ | å¿…å¡« | æè¿° |
+| ------- | ---- | ---- | ---- |
+| _id | string | æ˜¯ | æ–‡æ¡£IDï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ |
+| keyword | string | æ˜¯ | æœç´¢å…³é”®è¯ï¼Œç»Ÿä¸€å°å†™å¤„ç† |
+| createTime | date | æ˜¯ | æœç´¢è®°å½•åˆ›å»ºæ—¶é—´ |
+
+## ç´¢å¼•è®¾ç½®
+
+| ç´¢å¼•å­—æ®µ | æ’åºæ–¹å‘ | è¯´æ˜ |
+| ------- | ------- | ---- |
+| keyword | å‡åº | ç”¨äºæŸ¥è¯¢ç‰¹å®šå…³é”®è¯çš„æœç´¢è®°å½• |
+| createTime | é™åº | ç”¨äºæŒ‰æ—¶é—´æ’åº |
+
+## æŸ¥è¯¢ç¤ºä¾‹
+
+### 1. è·å–æœ€è¿‘çš„æœç´¢è®°å½•
+```javascript
+db.collection('search_logs')
+  .orderBy('createTime', 'desc')
+  .limit(100)
+  .get()
+```
+
+### 2. è·å–çƒ­é—¨æœç´¢å…³é”®è¯
+```javascript
+const db = cloud.database()
+const $ = db.command.aggregate
+
+db.collection('search_logs')
+  .aggregate()
+  .group({
+    _id: '$keyword',
+    count: $.sum(1)
+  })
+  .sort({
+    count: -1
+  })
+  .limit(10)
+  .end()
+```
+
+### 3. è·å–ç‰¹å®šæ—¶é—´æ®µå†…çš„æœç´¢è¶‹åŠ¿
+```javascript
+const db = cloud.database()
+const $ = db.command.aggregate
+const _ = db.command
+const oneWeekAgo = new Date()
+oneWeekAgo.setDate(oneWeekAgo.getDate() - 7)
+
+db.collection('search_logs')
+  .aggregate()
+  .match({
+    createTime: _.gte(oneWeekAgo)
+  })
+  .group({
+    _id: {
+      keyword: '$keyword',
+      day: $.dateToString({
+        date: '$createTime',
+        format: '%Y-%m-%d'
+      })
+    },
+    count: $.sum(1)
+  })
+  .group({
+    _id: '$_id.keyword',
+    dailyCounts: $.push({
+      date: '$_id.day',
+      count: '$count'
+    }),
+    totalCount: $.sum('$count')
+  })
+  .sort({
+    totalCount: -1
+  })
+  .limit(10)
+  .end()
+```
+
+## æ•°æ®åº“æƒé™è®¾ç½®ï¼ˆJSONæ ¼å¼ï¼‰
+
+```json
+{
+  "read": "auth.is_administrator == true",
+  "write": "auth.is_administrator == true"
+}
+```
+
+## è§¦å‘å™¨è®¾ç½®ï¼ˆå»ºè®®ï¼‰
+
+1. **å®šæœŸæ¸…ç†è§¦å‘å™¨**ï¼šæ¯æœˆè‡ªåŠ¨æ¸…ç†è¶…è¿‡3ä¸ªæœˆçš„æœç´¢æ—¥å¿—è®°å½•ï¼Œä»¥èŠ‚çœå­˜å‚¨ç©ºé—´ã€‚
+
+```javascript
+exports.main = async (event, context) => {
+  const db = cloud.database();
+  const threeMonthsAgo = new Date();
+  threeMonthsAgo.setMonth(threeMonthsAgo.getMonth() - 3);
+  
+  try {
+    const result = await db.collection('search_logs')
+      .where({
+        createTime: db.command.lt(threeMonthsAgo)
+      })
+      .remove();
+    
+    return {
+      success: true,
+      deleted: result.deleted
+    };
+  } catch (err) {
+    return {
+      success: false,
+      error: err.message
+    };
+  }
+};
+```
+
+## æ³¨æ„äº‹é¡¹
+
+1. æœç´¢æ—¥å¿—ä»…è®°å½•æœ‰æ„ä¹‰çš„å…³é”®è¯ï¼ˆé•¿åº¦å¤§äº1çš„å…³é”®è¯ï¼‰ã€‚
+
+2. å…³é”®è¯ç»Ÿä¸€è½¬ä¸ºå°å†™å­˜å‚¨ï¼Œä¾¿äºç»Ÿè®¡å’Œåˆ†æã€‚
+
+3. æœç´¢æ—¥å¿—åº”å½“è®¾ç½®é€‚å½“çš„TTLï¼ˆTime-To-Liveï¼‰æˆ–å®šæœŸæ¸…ç†ï¼Œé¿å…è¿‡åº¦ç§¯ç´¯ã€‚
+
+4. æœç´¢æ—¥å¿—æ•°æ®å¯ç”¨äºæ”¹è¿›æœç´¢åŠŸèƒ½å’Œç”¨æˆ·ä½“éªŒï¼Œä¾‹å¦‚æä¾›çƒ­é—¨æœç´¢å»ºè®®ã€‚ 
\ No newline at end of file
diff --git a/database-schema/share_records.md b/database-schema/share_records.md
index 4fe0e9d..a45c517 100644
--- a/database-schema/share_records.md
+++ b/database-schema/share_records.md
@@ -1,145 +1,145 @@
-# Share Records Collection Structure
-
-## é›†åˆåç§°
-share_records
-
-## æƒé™è®¾ç½®
-- è¯»å–ï¼šä»…åˆ›å»ºè€…å’Œç®¡ç†å‘˜
-- å†™å…¥ï¼šä»…äº‘å‡½æ•°
-
-## å­—æ®µç»“æ„
-
-| å­—æ®µåç§° | ç±»å‹ | å¿…å¡« | æè¿° |
-| ------- | ---- | ---- | ---- |
-| _id | string | æ˜¯ | æ–‡æ¡£IDï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ |
-| userId | string | æ˜¯ | åˆ†äº«è€…çš„ç”¨æˆ·ID |
-| type | string | æ˜¯ | åˆ†äº«ç±»å‹ï¼š'nomination'(æå),'ranking'(æ’è¡Œæ¦œ),'profile'(ä¸ªäººèµ„æ–™) |
-| targetId | string | æ˜¯ | åˆ†äº«ç›®æ ‡IDï¼ˆå¦‚æåIDã€ç”¨æˆ·IDç­‰ï¼‰ |
-| platform | string | æ˜¯ | åˆ†äº«å¹³å°ï¼š'wechat'(å¾®ä¿¡),'moments'(æœ‹å‹åœˆ),'qq'(QQ)ç­‰ |
-| title | string | å¦ | åˆ†äº«æ ‡é¢˜ |
-| path | string | æ˜¯ | å°ç¨‹åºè·¯å¾„ï¼Œç”¨äºè·³è½¬ |
-| clicks | number | æ˜¯ | ç‚¹å‡»æ¬¡æ•° |
-| lastClickTime | date | å¦ | æœ€åç‚¹å‡»æ—¶é—´ |
-| createTime | date | æ˜¯ | åˆ†äº«è®°å½•åˆ›å»ºæ—¶é—´ |
-| _createTime | number | æ˜¯ | åˆ†äº«è®°å½•åˆ›å»ºæ—¶é—´æˆ³ï¼Œç”¨äºæ’åº |
-
-## ç´¢å¼•è®¾ç½®
-
-| ç´¢å¼•å­—æ®µ | æ’åºæ–¹å‘ | è¯´æ˜ |
-| ------- | ------- | ---- |
-| userId | å‡åº | ç”¨äºæŸ¥è¯¢ç”¨æˆ·çš„åˆ†äº«è®°å½• |
-| type, targetId | å‡åº, å‡åº | ç”¨äºæŸ¥è¯¢ç‰¹å®šç±»å‹å’Œç›®æ ‡çš„åˆ†äº«è®°å½• |
-| createTime | é™åº | ç”¨äºæŒ‰æ—¶é—´æ’åº |
-
-## æŸ¥è¯¢ç¤ºä¾‹
-
-### 1. è·å–ç”¨æˆ·åˆ†äº«è®°å½•
-```javascript
-db.collection('share_records')
-  .where({
-    userId: 'user123'
-  })
-  .orderBy('createTime', 'desc')
-  .get()
-```
-
-### 2. è·å–ç‰¹å®šæåçš„åˆ†äº«è®°å½•
-```javascript
-db.collection('share_records')
-  .where({
-    type: 'nomination',
-    targetId: 'nomination123'
-  })
-  .get()
-```
-
-### 3. æŒ‰åˆ†äº«å¹³å°ç»Ÿè®¡åˆ†äº«æ•°é‡
-```javascript
-const db = cloud.database()
-const $ = db.command.aggregate
-
-db.collection('share_records')
-  .aggregate()
-  .group({
-    _id: '$platform',
-    count: $.sum(1),
-    clicks: $.sum('$clicks')
-  })
-  .sort({
-    count: -1
-  })
-  .end()
-```
-
-### 4. è·å–åˆ†äº«æœ€å¤šçš„æå
-```javascript
-const db = cloud.database()
-const $ = db.command.aggregate
-
-db.collection('share_records')
-  .aggregate()
-  .match({
-    type: 'nomination'
-  })
-  .group({
-    _id: '$targetId',
-    count: $.sum(1),
-    clicks: $.sum('$clicks')
-  })
-  .sort({
-    count: -1
-  })
-  .limit(10)
-  .end()
-```
-
-## æ•°æ®åº“æƒé™è®¾ç½®ï¼ˆJSONæ ¼å¼ï¼‰
-
-```json
-{
-  "read": "doc.userId == auth.user_id || auth.is_administrator == true",
-  "write": "auth.is_administrator == true"
-}
-```
-
-## è§¦å‘å™¨è®¾ç½®ï¼ˆå»ºè®®ï¼‰
-
-1. **åˆ†äº«çƒ­åº¦è®¡ç®—è§¦å‘å™¨**ï¼šå½“åˆ†äº«è®°å½•è¢«ç‚¹å‡»ä¸€å®šæ¬¡æ•°ï¼ˆå¦‚10æ¬¡ï¼‰æ—¶ï¼Œè§¦å‘è®¡ç®—è¯¥æåçš„çƒ­åº¦å€¼å¹¶æ›´æ–°æåè®°å½•ã€‚
-
-```javascript
-exports.main = async (event, context) => {
-  const db = cloud.database();
-  const shareId = event.docId;
-  
-  try {
-    // è·å–åˆ†äº«è®°å½•
-    const shareRes = await db.collection('share_records').doc(shareId).get();
-    const share = shareRes.data;
-    
-    // å¦‚æœæ˜¯æååˆ†äº«ä¸”ç‚¹å‡»æ•°è¾¾åˆ°é˜ˆå€¼
-    if (share && share.type === 'nomination' && share.clicks >= 10) {
-      // æ›´æ–°æåçƒ­åº¦
-      await db.collection('entries').doc(share.targetId).update({
-        data: {
-          hotLevel: db.command.inc(1)
-        }
-      });
-    }
-    
-    return { success: true };
-  } catch (err) {
-    console.error('åˆ†äº«çƒ­åº¦è®¡ç®—å¤±è´¥:', err);
-    return { success: false, error: err.message };
-  }
-};
-```
-
-## æ³¨æ„äº‹é¡¹
-
-1. åˆ†äº«è®°å½•åº”å½“ä¸æåç³»ç»Ÿç´§å¯†é›†æˆï¼Œå½“åˆ†äº«å¸¦æ¥è½¬åŒ–ï¼ˆå¦‚æŠ•ç¥¨ï¼‰æ—¶åº”å½“æœ‰é¢å¤–å¥–åŠ±æœºåˆ¶ã€‚
-
-2. åˆ†äº«ç‚¹å‡»ç»Ÿè®¡éœ€è¦é˜²èŒƒåˆ·ç‚¹å‡»è¡Œä¸ºï¼Œå¯ä»¥è€ƒè™‘æ·»åŠ IPé™åˆ¶æˆ–ç”¨æˆ·é™åˆ¶ã€‚
-
-3. åˆ†äº«é“¾æ¥åº”å½“æ”¯æŒå‚æ•°æºå¸¦ï¼Œä»¥ä¾¿äºè·Ÿè¸ªåˆ†äº«æ¥æºå’Œè®¡ç®—è½¬åŒ–ç‡ã€‚
-
+# Share Records Collection Structure
+
+## é›†åˆåç§°
+share_records
+
+## æƒé™è®¾ç½®
+- è¯»å–ï¼šä»…åˆ›å»ºè€…å’Œç®¡ç†å‘˜
+- å†™å…¥ï¼šä»…äº‘å‡½æ•°
+
+## å­—æ®µç»“æ„
+
+| å­—æ®µåç§° | ç±»å‹ | å¿…å¡« | æè¿° |
+| ------- | ---- | ---- | ---- |
+| _id | string | æ˜¯ | æ–‡æ¡£IDï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ |
+| userId | string | æ˜¯ | åˆ†äº«è€…çš„ç”¨æˆ·ID |
+| type | string | æ˜¯ | åˆ†äº«ç±»å‹ï¼š'nomination'(æå),'ranking'(æ’è¡Œæ¦œ),'profile'(ä¸ªäººèµ„æ–™) |
+| targetId | string | æ˜¯ | åˆ†äº«ç›®æ ‡IDï¼ˆå¦‚æåIDã€ç”¨æˆ·IDç­‰ï¼‰ |
+| platform | string | æ˜¯ | åˆ†äº«å¹³å°ï¼š'wechat'(å¾®ä¿¡),'moments'(æœ‹å‹åœˆ),'qq'(QQ)ç­‰ |
+| title | string | å¦ | åˆ†äº«æ ‡é¢˜ |
+| path | string | æ˜¯ | å°ç¨‹åºè·¯å¾„ï¼Œç”¨äºè·³è½¬ |
+| clicks | number | æ˜¯ | ç‚¹å‡»æ¬¡æ•° |
+| lastClickTime | date | å¦ | æœ€åç‚¹å‡»æ—¶é—´ |
+| createTime | date | æ˜¯ | åˆ†äº«è®°å½•åˆ›å»ºæ—¶é—´ |
+| _createTime | number | æ˜¯ | åˆ†äº«è®°å½•åˆ›å»ºæ—¶é—´æˆ³ï¼Œç”¨äºæ’åº |
+
+## ç´¢å¼•è®¾ç½®
+
+| ç´¢å¼•å­—æ®µ | æ’åºæ–¹å‘ | è¯´æ˜ |
+| ------- | ------- | ---- |
+| userId | å‡åº | ç”¨äºæŸ¥è¯¢ç”¨æˆ·çš„åˆ†äº«è®°å½• |
+| type, targetId | å‡åº, å‡åº | ç”¨äºæŸ¥è¯¢ç‰¹å®šç±»å‹å’Œç›®æ ‡çš„åˆ†äº«è®°å½• |
+| createTime | é™åº | ç”¨äºæŒ‰æ—¶é—´æ’åº |
+
+## æŸ¥è¯¢ç¤ºä¾‹
+
+### 1. è·å–ç”¨æˆ·åˆ†äº«è®°å½•
+```javascript
+db.collection('share_records')
+  .where({
+    userId: 'user123'
+  })
+  .orderBy('createTime', 'desc')
+  .get()
+```
+
+### 2. è·å–ç‰¹å®šæåçš„åˆ†äº«è®°å½•
+```javascript
+db.collection('share_records')
+  .where({
+    type: 'nomination',
+    targetId: 'nomination123'
+  })
+  .get()
+```
+
+### 3. æŒ‰åˆ†äº«å¹³å°ç»Ÿè®¡åˆ†äº«æ•°é‡
+```javascript
+const db = cloud.database()
+const $ = db.command.aggregate
+
+db.collection('share_records')
+  .aggregate()
+  .group({
+    _id: '$platform',
+    count: $.sum(1),
+    clicks: $.sum('$clicks')
+  })
+  .sort({
+    count: -1
+  })
+  .end()
+```
+
+### 4. è·å–åˆ†äº«æœ€å¤šçš„æå
+```javascript
+const db = cloud.database()
+const $ = db.command.aggregate
+
+db.collection('share_records')
+  .aggregate()
+  .match({
+    type: 'nomination'
+  })
+  .group({
+    _id: '$targetId',
+    count: $.sum(1),
+    clicks: $.sum('$clicks')
+  })
+  .sort({
+    count: -1
+  })
+  .limit(10)
+  .end()
+```
+
+## æ•°æ®åº“æƒé™è®¾ç½®ï¼ˆJSONæ ¼å¼ï¼‰
+
+```json
+{
+  "read": "doc.userId == auth.user_id || auth.is_administrator == true",
+  "write": "auth.is_administrator == true"
+}
+```
+
+## è§¦å‘å™¨è®¾ç½®ï¼ˆå»ºè®®ï¼‰
+
+1. **åˆ†äº«çƒ­åº¦è®¡ç®—è§¦å‘å™¨**ï¼šå½“åˆ†äº«è®°å½•è¢«ç‚¹å‡»ä¸€å®šæ¬¡æ•°ï¼ˆå¦‚10æ¬¡ï¼‰æ—¶ï¼Œè§¦å‘è®¡ç®—è¯¥æåçš„çƒ­åº¦å€¼å¹¶æ›´æ–°æåè®°å½•ã€‚
+
+```javascript
+exports.main = async (event, context) => {
+  const db = cloud.database();
+  const shareId = event.docId;
+  
+  try {
+    // è·å–åˆ†äº«è®°å½•
+    const shareRes = await db.collection('share_records').doc(shareId).get();
+    const share = shareRes.data;
+    
+    // å¦‚æœæ˜¯æååˆ†äº«ä¸”ç‚¹å‡»æ•°è¾¾åˆ°é˜ˆå€¼
+    if (share && share.type === 'nomination' && share.clicks >= 10) {
+      // æ›´æ–°æåçƒ­åº¦
+      await db.collection('entries').doc(share.targetId).update({
+        data: {
+          hotLevel: db.command.inc(1)
+        }
+      });
+    }
+    
+    return { success: true };
+  } catch (err) {
+    console.error('åˆ†äº«çƒ­åº¦è®¡ç®—å¤±è´¥:', err);
+    return { success: false, error: err.message };
+  }
+};
+```
+
+## æ³¨æ„äº‹é¡¹
+
+1. åˆ†äº«è®°å½•åº”å½“ä¸æåç³»ç»Ÿç´§å¯†é›†æˆï¼Œå½“åˆ†äº«å¸¦æ¥è½¬åŒ–ï¼ˆå¦‚æŠ•ç¥¨ï¼‰æ—¶åº”å½“æœ‰é¢å¤–å¥–åŠ±æœºåˆ¶ã€‚
+
+2. åˆ†äº«ç‚¹å‡»ç»Ÿè®¡éœ€è¦é˜²èŒƒåˆ·ç‚¹å‡»è¡Œä¸ºï¼Œå¯ä»¥è€ƒè™‘æ·»åŠ IPé™åˆ¶æˆ–ç”¨æˆ·é™åˆ¶ã€‚
+
+3. åˆ†äº«é“¾æ¥åº”å½“æ”¯æŒå‚æ•°æºå¸¦ï¼Œä»¥ä¾¿äºè·Ÿè¸ªåˆ†äº«æ¥æºå’Œè®¡ç®—è½¬åŒ–ç‡ã€‚
+
 4. ä¸ºé¿å…æ•°æ®åº“è¿‡å¤§ï¼Œå¯ä»¥å®šæœŸå½’æ¡£è¾ƒæ—©çš„åˆ†äº«è®°å½•æˆ–è®¾ç½®TTLã€‚ 
\ No newline at end of file
diff --git a/open-project.sh b/open-project.sh
new file mode 100644
index 0000000..5ce697f
--- /dev/null
+++ b/open-project.sh
@@ -0,0 +1,26 @@
+#!/bin/bash
+# å¿«é€Ÿæ‰“å¼€é¡¹ç›®è„šæœ¬
+
+echo "ğŸš€ æ­£åœ¨å¯åŠ¨ä¼¦æ•¦å¿…åƒæ¦œå°ç¨‹åº..."
+
+# æ£€æŸ¥å¾®ä¿¡å¼€å‘è€…å·¥å…·æ˜¯å¦å®‰è£…
+if [ -d "/Applications/wechatwebdevtools.app" ]; then
+    echo "âœ… æ£€æµ‹åˆ°å¾®ä¿¡å¼€å‘è€…å·¥å…·"
+    
+    # ä½¿ç”¨å‘½ä»¤è¡Œæ‰“å¼€é¡¹ç›®
+    /Applications/wechatwebdevtools.app/Contents/MacOS/cli open --project /Users/jimmu/vdogo.com/ä¼¦æ•¦å¿…åƒæ¦œ
+    
+    echo "âœ… é¡¹ç›®å·²åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­æ‰“å¼€"
+else
+    echo "âŒ æœªæ£€æµ‹åˆ°å¾®ä¿¡å¼€å‘è€…å·¥å…·"
+    echo "è¯·å…ˆä¸‹è½½å®‰è£…ï¼šhttps://developers.weixin.qq.com/miniprogram/dev/devtools/download.html"
+    
+    # å°è¯•æ‰“å¼€ä¸‹è½½é¡µé¢
+    open "https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html"
+fi
+
+echo ""
+echo "ğŸ“‹ é¡¹ç›®ä¿¡æ¯ï¼š"
+echo "- é¡¹ç›®è·¯å¾„: /Users/jimmu/vdogo.com/ä¼¦æ•¦å¿…åƒæ¦œ"
+echo "- AppID: wx29cb754190a5c042"
+echo "- äº‘å¼€å‘ç¯å¢ƒ: cloud1-2g2sby6z920b76cb"
\ No newline at end of file
diff --git a/pages/.DS_Store b/pages/.DS_Store
new file mode 100644
index 0000000000000000000000000000000000000000..4870729310f8e021c956c2a905539ecd985c8094
GIT binary patch
literal 6148
zcmeHKJ5EDE474GjNHi%a_X^x#6(uL&0(>3?(i15FDdnp;7e~vCZ6Sph3JMxDmb|m;
z_3Ub=cz!lBU%wAGW-BvW!io05VQ$=~&+M!sM2|C`Z5&=7$A{f+oMoR5kb7x^J=vSx
z+c*9N0xz+-|K+i#FH=+sNC7Dz1*Cu!V9lm2uM#y%0VyB_z7*j1p}~p0a7v6%2Zm??
zfD44fFppjW*cbrz!YL6Em?ssORIe7pla6?+yk0mZCfz)4#yNGfSBK(pJK`<U&3mFo
zDIf)o6*$l3iuHdB|DpdsCTS%Fq`<#Yz!#g_%^FXt+B$n2Yi)zy!I|?3r(qrx3{j4O
iQI4@-Ilhjh%xj!uzZXu4K}S63K>Z9*7nv0JYXuIhZyNCc

literal 0
HcmV?d00001

diff --git a/pages/deeds-wall/deeds-wall.js b/pages/deeds-wall/deeds-wall.js
index f6d0f15..ec446e2 100644
--- a/pages/deeds-wall/deeds-wall.js
+++ b/pages/deeds-wall/deeds-wall.js
@@ -1,189 +1,189 @@
-// pages/deeds-wall/deeds-wall.js
-Page({
-  /**
-   * é¡µé¢çš„åˆå§‹æ•°æ®
-   */
-  data: {
-    deedsList: [],
-    loading: true,
-    hasMore: true,
-    pageSize: 10,
-    currentPage: 0
-  },
-
-  /**
-   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åŠ è½½
-   */
-  onLoad: function (options) {
-    this.loadDeeds();
-    
-    // å¯ç”¨åˆ†äº«èœå•
-    wx.showShareMenu({
-      withShareTicket: true,
-      menus: ['shareAppMessage', 'shareTimeline']
-    });
-  },
-
-  /**
-   * é¡µé¢ç›¸å…³äº‹ä»¶å¤„ç†å‡½æ•°--ç›‘å¬ç”¨æˆ·ä¸‹æ‹‰åŠ¨ä½œ
-   */
-  onPullDownRefresh: function () {
-    this.setData({
-      deedsList: [],
-      currentPage: 0,
-      hasMore: true
-    });
-    this.loadDeeds().then(() => {
-      wx.stopPullDownRefresh();
-    });
-  },
-
-  /**
-   * é¡µé¢ä¸Šæ‹‰è§¦åº•äº‹ä»¶çš„å¤„ç†å‡½æ•°
-   */
-  onReachBottom: function () {
-    if (this.data.hasMore && !this.data.loading) {
-      this.loadDeeds();
-    }
-  },
-
-  /**
-   * ç”¨æˆ·ç‚¹å‡»å³ä¸Šè§’åˆ†äº«
-   */
-  onShareAppMessage: function () {
-    return {
-      title: 'æˆ˜ç»©å¢™ - ä¼¦æ•¦å¿…åƒæ¦œ',
-      path: '/pages/deeds-wall/deeds-wall'
-    };
-  },
-
-  /**
-   * åˆ†äº«åˆ°æœ‹å‹åœˆ
-   */
-  onShareTimeline: function () {
-    return {
-      title: 'æˆ˜ç»©å¢™ - ä¼¦æ•¦å¿…åƒæ¦œ',
-      query: ''
-    };
-  },
-
-  /**
-   * åŠ è½½äº‹è¿¹æ•°æ®
-   */
-  loadDeeds: async function () {
-    if (this.data.loading || !this.data.hasMore) return;
-    
-    try {
-      this.setData({ loading: true });
-      wx.showLoading({ title: 'åŠ è½½ä¸­...' });
-      
-      // æ¨¡æ‹Ÿæ•°æ®ï¼Œå®é™…é¡¹ç›®ä¸­åº”è¯¥è°ƒç”¨äº‘å‡½æ•°è·å–æ•°æ®
-      const mockData = this.getMockData();
-      
-      // æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ
-      await new Promise(resolve => setTimeout(resolve, 800));
-      
-      // è®¡ç®—åˆ†é¡µ
-      const start = this.data.currentPage * this.data.pageSize;
-      const end = start + this.data.pageSize;
-      const pageData = mockData.slice(start, end);
-      
-      // æ›´æ–°æ•°æ®
-      this.setData({
-        deedsList: [...this.data.deedsList, ...pageData],
-        currentPage: this.data.currentPage + 1,
-        hasMore: end < mockData.length,
-        loading: false
-      });
-      
-      wx.hideLoading();
-    } catch (error) {
-      console.error('åŠ è½½äº‹è¿¹å¤±è´¥:', error);
-      this.setData({ loading: false });
-      wx.hideLoading();
-      wx.showToast({
-        title: 'åŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•',
-        icon: 'none'
-      });
-    }
-  },
-
-  /**
-   * è·å–æ¨¡æ‹Ÿæ•°æ®
-   */
-  getMockData: function () {
-    return [
-      {
-        id: '1',
-        nickname: 'å¼ ä¸‰',
-        avatarUrl: 'https://placekitten.com/80/80',
-        content: 'å¼ ä¸‰è·¯è¿‡Sohoï¼Œ12å¯¹æƒ…ä¾£å½“åœºæ”¹å£å–Šä»–è€å…¬',
-        location: 'ä¼¦æ•¦ Soho',
-        createTime: '2024-07-12'
-      },
-      {
-        id: '2',
-        nickname: 'æå››',
-        avatarUrl: 'https://placekitten.com/81/81',
-        content: 'æ›¾ç»Hyde Parkå¤©é¹…å›´ä½å¼ ä¸‰è·³æ±‚å¶èˆï¼Œæˆ‘å…¨ç¨‹ç›´æ’­',
-        location: 'ä¼¦æ•¦ Hyde Park',
-        createTime: '2024-07-05'
-      },
-      {
-        id: '3',
-        nickname: 'ç‹äº”',
-        avatarUrl: 'https://placekitten.com/82/82',
-        content: 'å¼ ä¸‰åœ¨Covent Gardenè¯·æ•´æ¡è¡—å…è´¹å–é…’',
-        location: 'ä¼¦æ•¦ Covent Garden',
-        createTime: '2024-06-28'
-      },
-      {
-        id: '4',
-        nickname: 'èµµå…­',
-        avatarUrl: 'https://placekitten.com/83/83',
-        content: 'å¼ ä¸‰çº¦ä¼šè·¯è¿‡æ³°æ™¤å£«æ²³ï¼ŒThe Shardå¤–å¢™è‡ªè¡Œäº®èµ·"çº¦å—"éœ“è™¹å­—æ¯',
-        location: 'ä¼¦æ•¦ æ³°æ™¤å£«æ²³',
-        createTime: '2024-06-03'
-      },
-      {
-        id: '5',
-        nickname: 'å°æ˜',
-        avatarUrl: 'https://placekitten.com/84/84',
-        content: 'ä¸Šå‘¨åœ¨Camden Marketçœ‹åˆ°å¼ ä¸‰ï¼Œç»“æœæ‰€æœ‰æ‘Šä¸»éƒ½äº‰ç€é€ä»–ä¸œè¥¿',
-        location: 'ä¼¦æ•¦ Camden Market',
-        createTime: '2024-05-25'
-      }
-    ];
-  },
-
-  /**
-   * "çˆ†æ–™æ–°äº‹è¿¹"æŒ‰é’®ç‚¹å‡»äº‹ä»¶
-   */
-  onReportNewDeed: function() {
-    const app = getApp();
-    
-    // æ£€æŸ¥ç™»å½•çŠ¶æ€
-    if (!app.checkUserLogin) {
-      wx.showToast({
-        title: 'è¯·å…ˆç™»å½•',
-        icon: 'none'
-      });
-      return;
-    }
-    
-    // è·³è½¬åˆ°äº‹è¿¹æäº¤é¡µé¢
-    wx.navigateTo({
-      url: '/pages/report-deed/report-deed',
-      fail: function(err) {
-        console.error("è·³è½¬å¤±è´¥:", err);
-        
-        // å¦‚æœé¡µé¢ä¸å­˜åœ¨ï¼Œæ˜¾ç¤ºæç¤º
-        wx.showModal({
-          title: 'åŠŸèƒ½å¼€å‘ä¸­',
-          content: 'çˆ†æ–™æ–°äº‹è¿¹åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…ï¼',
-          showCancel: false
-        });
-      }
-    });
-  }
+// pages/deeds-wall/deeds-wall.js
+Page({
+  /**
+   * é¡µé¢çš„åˆå§‹æ•°æ®
+   */
+  data: {
+    deedsList: [],
+    loading: true,
+    hasMore: true,
+    pageSize: 10,
+    currentPage: 0
+  },
+
+  /**
+   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åŠ è½½
+   */
+  onLoad: function (options) {
+    this.loadDeeds();
+    
+    // å¯ç”¨åˆ†äº«èœå•
+    wx.showShareMenu({
+      withShareTicket: true,
+      menus: ['shareAppMessage', 'shareTimeline']
+    });
+  },
+
+  /**
+   * é¡µé¢ç›¸å…³äº‹ä»¶å¤„ç†å‡½æ•°--ç›‘å¬ç”¨æˆ·ä¸‹æ‹‰åŠ¨ä½œ
+   */
+  onPullDownRefresh: function () {
+    this.setData({
+      deedsList: [],
+      currentPage: 0,
+      hasMore: true
+    });
+    this.loadDeeds().then(() => {
+      wx.stopPullDownRefresh();
+    });
+  },
+
+  /**
+   * é¡µé¢ä¸Šæ‹‰è§¦åº•äº‹ä»¶çš„å¤„ç†å‡½æ•°
+   */
+  onReachBottom: function () {
+    if (this.data.hasMore && !this.data.loading) {
+      this.loadDeeds();
+    }
+  },
+
+  /**
+   * ç”¨æˆ·ç‚¹å‡»å³ä¸Šè§’åˆ†äº«
+   */
+  onShareAppMessage: function () {
+    return {
+      title: 'æˆ˜ç»©å¢™ - ä¼¦æ•¦å¿…åƒæ¦œ',
+      path: '/pages/deeds-wall/deeds-wall'
+    };
+  },
+
+  /**
+   * åˆ†äº«åˆ°æœ‹å‹åœˆ
+   */
+  onShareTimeline: function () {
+    return {
+      title: 'æˆ˜ç»©å¢™ - ä¼¦æ•¦å¿…åƒæ¦œ',
+      query: ''
+    };
+  },
+
+  /**
+   * åŠ è½½äº‹è¿¹æ•°æ®
+   */
+  loadDeeds: async function () {
+    if (this.data.loading || !this.data.hasMore) return;
+    
+    try {
+      this.setData({ loading: true });
+      wx.showLoading({ title: 'åŠ è½½ä¸­...' });
+      
+      // æ¨¡æ‹Ÿæ•°æ®ï¼Œå®é™…é¡¹ç›®ä¸­åº”è¯¥è°ƒç”¨äº‘å‡½æ•°è·å–æ•°æ®
+      const mockData = this.getMockData();
+      
+      // æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ
+      await new Promise(resolve => setTimeout(resolve, 800));
+      
+      // è®¡ç®—åˆ†é¡µ
+      const start = this.data.currentPage * this.data.pageSize;
+      const end = start + this.data.pageSize;
+      const pageData = mockData.slice(start, end);
+      
+      // æ›´æ–°æ•°æ®
+      this.setData({
+        deedsList: [...this.data.deedsList, ...pageData],
+        currentPage: this.data.currentPage + 1,
+        hasMore: end < mockData.length,
+        loading: false
+      });
+      
+      wx.hideLoading();
+    } catch (error) {
+      console.error('åŠ è½½äº‹è¿¹å¤±è´¥:', error);
+      this.setData({ loading: false });
+      wx.hideLoading();
+      wx.showToast({
+        title: 'åŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•',
+        icon: 'none'
+      });
+    }
+  },
+
+  /**
+   * è·å–æ¨¡æ‹Ÿæ•°æ®
+   */
+  getMockData: function () {
+    return [
+      {
+        id: '1',
+        nickname: 'å¼ ä¸‰',
+        avatarUrl: 'https://placekitten.com/80/80',
+        content: 'å¼ ä¸‰è·¯è¿‡Sohoï¼Œ12å¯¹æƒ…ä¾£å½“åœºæ”¹å£å–Šä»–è€å…¬',
+        location: 'ä¼¦æ•¦ Soho',
+        createTime: '2024-07-12'
+      },
+      {
+        id: '2',
+        nickname: 'æå››',
+        avatarUrl: 'https://placekitten.com/81/81',
+        content: 'æ›¾ç»Hyde Parkå¤©é¹…å›´ä½å¼ ä¸‰è·³æ±‚å¶èˆï¼Œæˆ‘å…¨ç¨‹ç›´æ’­',
+        location: 'ä¼¦æ•¦ Hyde Park',
+        createTime: '2024-07-05'
+      },
+      {
+        id: '3',
+        nickname: 'ç‹äº”',
+        avatarUrl: 'https://placekitten.com/82/82',
+        content: 'å¼ ä¸‰åœ¨Covent Gardenè¯·æ•´æ¡è¡—å…è´¹å–é…’',
+        location: 'ä¼¦æ•¦ Covent Garden',
+        createTime: '2024-06-28'
+      },
+      {
+        id: '4',
+        nickname: 'èµµå…­',
+        avatarUrl: 'https://placekitten.com/83/83',
+        content: 'å¼ ä¸‰çº¦ä¼šè·¯è¿‡æ³°æ™¤å£«æ²³ï¼ŒThe Shardå¤–å¢™è‡ªè¡Œäº®èµ·"çº¦å—"éœ“è™¹å­—æ¯',
+        location: 'ä¼¦æ•¦ æ³°æ™¤å£«æ²³',
+        createTime: '2024-06-03'
+      },
+      {
+        id: '5',
+        nickname: 'å°æ˜',
+        avatarUrl: 'https://placekitten.com/84/84',
+        content: 'ä¸Šå‘¨åœ¨Camden Marketçœ‹åˆ°å¼ ä¸‰ï¼Œç»“æœæ‰€æœ‰æ‘Šä¸»éƒ½äº‰ç€é€ä»–ä¸œè¥¿',
+        location: 'ä¼¦æ•¦ Camden Market',
+        createTime: '2024-05-25'
+      }
+    ];
+  },
+
+  /**
+   * "çˆ†æ–™æ–°äº‹è¿¹"æŒ‰é’®ç‚¹å‡»äº‹ä»¶
+   */
+  onReportNewDeed: function() {
+    const app = getApp();
+    
+    // æ£€æŸ¥ç™»å½•çŠ¶æ€
+    if (!app.checkUserLogin) {
+      wx.showToast({
+        title: 'è¯·å…ˆç™»å½•',
+        icon: 'none'
+      });
+      return;
+    }
+    
+    // è·³è½¬åˆ°äº‹è¿¹æäº¤é¡µé¢
+    wx.navigateTo({
+      url: '/pages/report-deed/report-deed',
+      fail: function(err) {
+        console.error("è·³è½¬å¤±è´¥:", err);
+        
+        // å¦‚æœé¡µé¢ä¸å­˜åœ¨ï¼Œæ˜¾ç¤ºæç¤º
+        wx.showModal({
+          title: 'åŠŸèƒ½å¼€å‘ä¸­',
+          content: 'çˆ†æ–™æ–°äº‹è¿¹åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…ï¼',
+          showCancel: false
+        });
+      }
+    });
+  }
 }) 
\ No newline at end of file
diff --git a/pages/deeds-wall/deeds-wall.json b/pages/deeds-wall/deeds-wall.json
index de29ce9..f4bdc45 100644
--- a/pages/deeds-wall/deeds-wall.json
+++ b/pages/deeds-wall/deeds-wall.json
@@ -1,7 +1,7 @@
-{
-  "navigationBarTitleText": "æˆ˜ç»©å¢™",
-  "enablePullDownRefresh": true,
-  "backgroundColor": "#F7F8FA",
-  "backgroundTextStyle": "dark",
-  "usingComponents": {}
+{
+  "navigationBarTitleText": "æˆ˜ç»©å¢™",
+  "enablePullDownRefresh": true,
+  "backgroundColor": "#F7F8FA",
+  "backgroundTextStyle": "dark",
+  "usingComponents": {}
 } 
\ No newline at end of file
diff --git a/pages/deeds-wall/deeds-wall.wxml b/pages/deeds-wall/deeds-wall.wxml
index 2060e9a..68d2d13 100644
--- a/pages/deeds-wall/deeds-wall.wxml
+++ b/pages/deeds-wall/deeds-wall.wxml
@@ -1,33 +1,33 @@
-<view class="container">
-  <view class="header">
-    <text class="header-title">æˆ˜ç»©å¢™</text>
-    <text class="header-subtitle">è®°å½•ç²¾å½©äº‹è¿¹ï¼Œåˆ†äº«æ¬¢ä¹æ—¶åˆ»</text>
-  </view>
-
-  <scroll-view scroll-y="true" class="deeds-container">
-    <block wx:for="{{ deedsList }}" wx:key="id">
-      <view class="deed-card">
-        <view class="card-header">
-          <image class="avatar" src="{{ item.avatarUrl }}" mode="aspectFill"></image>
-          <view class="user-info">
-            <text class="nickname">{{ item.nickname }}</text>
-            <text class="timestamp">{{ item.createTime }}</text>
-          </view>
-        </view>
-        <view class="card-body">
-          <text class="content">{{ item.content }}</text>
-        </view>
-        <view wx:if="{{ item.location }}" class="card-footer">
-          <view class="location">
-            <text class="location-icon">ğŸ“</text>
-            <text class="location-text">{{ item.location }}</text>
-          </view>
-        </view>
-      </view>
-    </block>
-  </scroll-view>
-
-  <view class="action-container">
-    <button class="report-button" bindtap="onReportNewDeed">çˆ†æ–™æ–°äº‹è¿¹</button>
-  </view>
+<view class="container">
+  <view class="header">
+    <text class="header-title">æˆ˜ç»©å¢™</text>
+    <text class="header-subtitle">è®°å½•ç²¾å½©äº‹è¿¹ï¼Œåˆ†äº«æ¬¢ä¹æ—¶åˆ»</text>
+  </view>
+
+  <scroll-view scroll-y="true" class="deeds-container">
+    <block wx:for="{{ deedsList }}" wx:key="id">
+      <view class="deed-card">
+        <view class="card-header">
+          <image class="avatar" src="{{ item.avatarUrl }}" mode="aspectFill"></image>
+          <view class="user-info">
+            <text class="nickname">{{ item.nickname }}</text>
+            <text class="timestamp">{{ item.createTime }}</text>
+          </view>
+        </view>
+        <view class="card-body">
+          <text class="content">{{ item.content }}</text>
+        </view>
+        <view wx:if="{{ item.location }}" class="card-footer">
+          <view class="location">
+            <text class="location-icon">ğŸ“</text>
+            <text class="location-text">{{ item.location }}</text>
+          </view>
+        </view>
+      </view>
+    </block>
+  </scroll-view>
+
+  <view class="action-container">
+    <button class="report-button" bindtap="onReportNewDeed">çˆ†æ–™æ–°äº‹è¿¹</button>
+  </view>
 </view> 
\ No newline at end of file
diff --git a/pages/deeds-wall/deeds-wall.wxss b/pages/deeds-wall/deeds-wall.wxss
index 5825f7e..b36a3d1 100644
--- a/pages/deeds-wall/deeds-wall.wxss
+++ b/pages/deeds-wall/deeds-wall.wxss
@@ -1,141 +1,141 @@
-/* pages/deeds-wall/deeds-wall.wxss */
-.container {
-  min-height: 100vh;
-  background-color: #F7F8FA;
-  padding-bottom: 120rpx; /* ä¸ºåº•éƒ¨æŒ‰é’®ç•™å‡ºç©ºé—´ */
-}
-
-/* å¤´éƒ¨æ ·å¼ */
-.header {
-  padding: 40rpx 40rpx 20rpx;
-  background-color: #FFFFFF;
-  text-align: center;
-  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);
-  margin-bottom: 24rpx;
-}
-
-.header-title {
-  font-size: 48rpx;
-  font-weight: 700;
-  color: #1F2937;
-  margin-bottom: 12rpx;
-  display: block;
-}
-
-.header-subtitle {
-  font-size: 28rpx;
-  color: #6B7280;
-  display: block;
-}
-
-/* äº‹è¿¹åˆ—è¡¨å®¹å™¨ */
-.deeds-container {
-  padding: 0 32rpx;
-}
-
-/* äº‹è¿¹å¡ç‰‡æ ·å¼ */
-.deed-card {
-  background-color: #FFFFFF;
-  border-radius: 24rpx;
-  margin-bottom: 32rpx;
-  padding: 32rpx;
-  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.08);
-}
-
-/* å¡ç‰‡å¤´éƒ¨ï¼šç”¨æˆ·ä¿¡æ¯ */
-.card-header {
-  display: flex;
-  align-items: center;
-  margin-bottom: 24rpx;
-}
-
-.avatar {
-  width: 80rpx;
-  height: 80rpx;
-  border-radius: 50%;
-  margin-right: 24rpx;
-  background-color: #F3F4F6;
-}
-
-.user-info {
-  flex: 1;
-}
-
-.nickname {
-  font-size: 32rpx;
-  font-weight: 600;
-  color: #1F2937;
-  display: block;
-  margin-bottom: 4rpx;
-}
-
-.timestamp {
-  font-size: 24rpx;
-  color: #9CA3AF;
-  display: block;
-}
-
-/* å¡ç‰‡å†…å®¹ */
-.card-body {
-  margin-bottom: 24rpx;
-}
-
-.content {
-  font-size: 30rpx;
-  color: #374151;
-  line-height: 1.6;
-}
-
-/* å¡ç‰‡åº•éƒ¨ï¼šä½ç½®ä¿¡æ¯ */
-.card-footer {
-  padding-top: 16rpx;
-  border-top: 1rpx solid #F3F4F6;
-}
-
-.location {
-  display: flex;
-  align-items: center;
-}
-
-.location-icon {
-  font-size: 28rpx;
-  margin-right: 8rpx;
-}
-
-.location-text {
-  font-size: 26rpx;
-  color: #6B7280;
-}
-
-/* åº•éƒ¨æ“ä½œåŒº */
-.action-container {
-  position: fixed;
-  bottom: 0;
-  left: 0;
-  right: 0;
-  padding: 24rpx 32rpx;
-  background-color: #FFFFFF;
-  box-shadow: 0 -4rpx 12rpx rgba(0, 0, 0, 0.05);
-  z-index: 100;
-  display: flex;
-  justify-content: center;
-}
-
-.report-button {
-  background-color: #10B981;
-  color: #FFFFFF;
-  font-size: 32rpx;
-  font-weight: 600;
-  padding: 20rpx 0;
-  width: 90%;
-  border-radius: 999rpx; /* èƒ¶å›Šå½¢çŠ¶ */
-  display: flex;
-  align-items: center;
-  justify-content: center;
-}
-
-.report-button::before {
-  content: "â•";
-  margin-right: 12rpx;
-  font-size: 32rpx;
+/* pages/deeds-wall/deeds-wall.wxss */
+.container {
+  min-height: 100vh;
+  background-color: #F7F8FA;
+  padding-bottom: 120rpx; /* ä¸ºåº•éƒ¨æŒ‰é’®ç•™å‡ºç©ºé—´ */
+}
+
+/* å¤´éƒ¨æ ·å¼ */
+.header {
+  padding: 40rpx 40rpx 20rpx;
+  background-color: #FFFFFF;
+  text-align: center;
+  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);
+  margin-bottom: 24rpx;
+}
+
+.header-title {
+  font-size: 48rpx;
+  font-weight: 700;
+  color: #1F2937;
+  margin-bottom: 12rpx;
+  display: block;
+}
+
+.header-subtitle {
+  font-size: 28rpx;
+  color: #6B7280;
+  display: block;
+}
+
+/* äº‹è¿¹åˆ—è¡¨å®¹å™¨ */
+.deeds-container {
+  padding: 0 32rpx;
+}
+
+/* äº‹è¿¹å¡ç‰‡æ ·å¼ */
+.deed-card {
+  background-color: #FFFFFF;
+  border-radius: 24rpx;
+  margin-bottom: 32rpx;
+  padding: 32rpx;
+  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.08);
+}
+
+/* å¡ç‰‡å¤´éƒ¨ï¼šç”¨æˆ·ä¿¡æ¯ */
+.card-header {
+  display: flex;
+  align-items: center;
+  margin-bottom: 24rpx;
+}
+
+.avatar {
+  width: 80rpx;
+  height: 80rpx;
+  border-radius: 50%;
+  margin-right: 24rpx;
+  background-color: #F3F4F6;
+}
+
+.user-info {
+  flex: 1;
+}
+
+.nickname {
+  font-size: 32rpx;
+  font-weight: 600;
+  color: #1F2937;
+  display: block;
+  margin-bottom: 4rpx;
+}
+
+.timestamp {
+  font-size: 24rpx;
+  color: #9CA3AF;
+  display: block;
+}
+
+/* å¡ç‰‡å†…å®¹ */
+.card-body {
+  margin-bottom: 24rpx;
+}
+
+.content {
+  font-size: 30rpx;
+  color: #374151;
+  line-height: 1.6;
+}
+
+/* å¡ç‰‡åº•éƒ¨ï¼šä½ç½®ä¿¡æ¯ */
+.card-footer {
+  padding-top: 16rpx;
+  border-top: 1rpx solid #F3F4F6;
+}
+
+.location {
+  display: flex;
+  align-items: center;
+}
+
+.location-icon {
+  font-size: 28rpx;
+  margin-right: 8rpx;
+}
+
+.location-text {
+  font-size: 26rpx;
+  color: #6B7280;
+}
+
+/* åº•éƒ¨æ“ä½œåŒº */
+.action-container {
+  position: fixed;
+  bottom: 0;
+  left: 0;
+  right: 0;
+  padding: 24rpx 32rpx;
+  background-color: #FFFFFF;
+  box-shadow: 0 -4rpx 12rpx rgba(0, 0, 0, 0.05);
+  z-index: 100;
+  display: flex;
+  justify-content: center;
+}
+
+.report-button {
+  background-color: #10B981;
+  color: #FFFFFF;
+  font-size: 32rpx;
+  font-weight: 600;
+  padding: 20rpx 0;
+  width: 90%;
+  border-radius: 999rpx; /* èƒ¶å›Šå½¢çŠ¶ */
+  display: flex;
+  align-items: center;
+  justify-content: center;
+}
+
+.report-button::before {
+  content: "â•";
+  margin-right: 12rpx;
+  font-size: 32rpx;
 } 
\ No newline at end of file
diff --git a/pages/detail/detail.wxml b/pages/detail/detail.wxml
index 48a0c61..4b6a373 100644
--- a/pages/detail/detail.wxml
+++ b/pages/detail/detail.wxml
@@ -240,5 +240,4 @@
   
   <!-- ç™»å½•æˆæƒå¼¹çª— -->
   <auth-dialog id="authDialog"></auth-dialog>
-</view>
-
+</view>
\ No newline at end of file
diff --git a/pages/index/index.js b/pages/index/index.js
index 332f40c..0f5e03d 100644
--- a/pages/index/index.js
+++ b/pages/index/index.js
@@ -16,10 +16,18 @@ Page({
     shareSupport: {
       canShareTimeline: false,
       canShowShareMenu: false
-    }
+    },
+    isRefreshing: false, // é˜²æ­¢é‡å¤åˆ·æ–°
+    hasInitialized: false // æ ‡è®°æ˜¯å¦å·²åˆå§‹åŒ–
   },
 
   onLoad() {
+    // æ£€æŸ¥ç”¨æˆ·ç™»å½•çŠ¶æ€
+    const userInfo = wx.getStorageSync('userInfo');
+    if (userInfo && userInfo._id) {
+      this.setData({ userInfo });
+    }
+    
     // é¦–æ¬¡åŠ è½½æ—¶å¼ºåˆ¶åˆ·æ–°æ•°æ®ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å¯èƒ½ä¸ºç©ºçš„ç¼“å­˜æ•°æ®
     this.refreshData();
     
@@ -29,13 +37,11 @@ Page({
   },
   
   onShow() {
-    // é¡µé¢æ˜¾ç¤ºæ—¶æ£€æŸ¥æ˜¯å¦æœ‰æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰åˆ™åˆ·æ–°
-    if (!this.data.rankings || this.data.rankings.length === 0) {
-      this.refreshData();
-    } else {
-      // å¦åˆ™ä½¿ç”¨å¸¸è§„åŠ è½½
+    // å¦‚æœå·²ç»åˆå§‹åŒ–è¿‡ï¼Œä½¿ç”¨å¸¸è§„åŠ è½½
+    if (this.data.hasInitialized) {
       this.loadData();
     }
+    // å¦åˆ™ç­‰å¾… onLoad ä¸­çš„åˆå§‹åŒ–å®Œæˆ
   },
 
   // åŠ è½½æ•°æ®
@@ -47,12 +53,7 @@ Page({
     const app = getApp();
     const rankings = app.globalData.rankings || [];
     
-    // å¦‚æœrankingsä¸ºç©ºï¼Œåˆ™å¼ºåˆ¶åˆ·æ–°æ•°æ®
-    if (!rankings || rankings.length === 0) {
-      wx.hideLoading();
-      this.refreshData();
-      return;
-    }
+    // ç§»é™¤è‡ªåŠ¨åˆ·æ–°é€»è¾‘ï¼Œé¿å…æ­»å¾ªç¯
     
     // è®¡ç®—æ€»æŠ•ç¥¨æ•°
     const totalVotes = this.calculateTotalVotes(rankings);
@@ -105,8 +106,14 @@ Page({
 
   // åˆ·æ–°æ•°æ®
   refreshData() {
+    // é˜²æ­¢é‡å¤åˆ·æ–°
+    if (this.data.isRefreshing) {
+      console.log('æ­£åœ¨åˆ·æ–°ä¸­ï¼Œè·³è¿‡é‡å¤è¯·æ±‚');
+      return;
+    }
+    
     const app = getApp();
-    this.setData({ isLoading: true, loadError: false });
+    this.setData({ isLoading: true, loadError: false, isRefreshing: true });
     wx.showLoading({ title: 'åˆ·æ–°ä¸­...', mask: true });
 
     // åˆ·æ–°æ’è¡Œæ¦œæ•°æ®
@@ -125,7 +132,9 @@ Page({
           rankings: validRankings,
           totalVotes: totalVotes, // æ˜ç¡®è®¾ç½®è®¡ç®—å‡ºçš„æ€»æŠ•ç¥¨æ•°
           totalUsers: totalPopular, // æ›´æ–°ä¸ºè¶…è¿‡ç™¾äººæƒ³åƒçš„äººæ•°
-          isLoading: false
+          isLoading: false,
+          isRefreshing: false, // åˆ·æ–°å®Œæˆ
+          hasInitialized: true // æ ‡è®°å·²åˆå§‹åŒ–
         });
 
         // åˆ·æ–°ç»Ÿè®¡æ•°æ®
@@ -150,7 +159,9 @@ Page({
           totalVotes: totalVotes, // æ˜ç¡®è®¾ç½®è®¡ç®—å‡ºçš„æ€»æŠ•ç¥¨æ•°
           totalUsers: totalPopular, // æ›´æ–°ä¸ºè¶…è¿‡ç™¾äººæƒ³åƒçš„äººæ•°
           isLoading: false,
-          loadError: true // æ˜¾ç¤ºé”™è¯¯çŠ¶æ€
+          loadError: true, // æ˜¾ç¤ºé”™è¯¯çŠ¶æ€
+          isRefreshing: false, // é”™è¯¯æ—¶ä¹Ÿè¦é‡ç½®åˆ·æ–°çŠ¶æ€
+          hasInitialized: true // é”™è¯¯æ—¶ä¹Ÿæ ‡è®°å·²åˆå§‹åŒ–
         });
         
         wx.hideLoading();
diff --git a/pages/orders/orders.wxml b/pages/orders/orders.wxml
index fc96996..aa7dd5f 100644
--- a/pages/orders/orders.wxml
+++ b/pages/orders/orders.wxml
@@ -1,2 +1,2 @@
-<!--pages/orders/orders.wxml-->
+<!--pages/orders/orders.wxml-->
 <text>pages/orders/orders.wxml</text>
\ No newline at end of file
diff --git a/pages/report-deed/report-deed.js b/pages/report-deed/report-deed.js
index 6cd5ba7..505a37f 100644
--- a/pages/report-deed/report-deed.js
+++ b/pages/report-deed/report-deed.js
@@ -1,165 +1,165 @@
-// pages/report-deed/report-deed.js
-Page({
-  /**
-   * é¡µé¢çš„åˆå§‹æ•°æ®
-   */
-  data: {
-    users: [],
-    selectedUser: null,
-    content: '',
-    location: '',
-    date: '',
-    type: 'success', // é»˜è®¤ä¸ºæˆåŠŸäº‹è¿¹
-    isFormValid: false
-  },
-
-  /**
-   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åŠ è½½
-   */
-  onLoad: function (options) {
-    // åŠ è½½ç”¨æˆ·åˆ—è¡¨
-    this.loadUsers();
-    
-    // è®¾ç½®é»˜è®¤æ—¥æœŸä¸ºä»Šå¤©
-    const today = new Date();
-    const year = today.getFullYear();
-    const month = String(today.getMonth() + 1).padStart(2, '0');
-    const day = String(today.getDate()).padStart(2, '0');
-    this.setData({
-      date: `${year}-${month}-${day}`
-    });
-    
-    // æ£€æŸ¥è¡¨å•æœ‰æ•ˆæ€§
-    this.checkFormValidity();
-  },
-
-  /**
-   * åŠ è½½ç”¨æˆ·åˆ—è¡¨
-   */
-  loadUsers: function () {
-    // è¿™é‡Œåº”è¯¥è°ƒç”¨äº‘å‡½æ•°è·å–ç”¨æˆ·åˆ—è¡¨
-    // ä¸ºäº†æ¼”ç¤ºï¼Œä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
-    const mockUsers = [
-      { id: '1', name: 'å¼ ä¸‰', avatar: 'https://placekitten.com/80/80' },
-      { id: '2', name: 'æå››', avatar: 'https://placekitten.com/81/81' },
-      { id: '3', name: 'ç‹äº”', avatar: 'https://placekitten.com/82/82' },
-      { id: '4', name: 'èµµå…­', avatar: 'https://placekitten.com/83/83' }
-    ];
-    
-    this.setData({
-      users: mockUsers
-    });
-  },
-
-  /**
-   * ç”¨æˆ·é€‰æ‹©å˜æ›´
-   */
-  onUserChange: function (e) {
-    const index = e.detail.value;
-    this.setData({
-      selectedUser: this.data.users[index]
-    });
-    this.checkFormValidity();
-  },
-
-  /**
-   * å†…å®¹è¾“å…¥å˜æ›´
-   */
-  onContentInput: function (e) {
-    this.setData({
-      content: e.detail.value
-    });
-    this.checkFormValidity();
-  },
-
-  /**
-   * åœ°ç‚¹è¾“å…¥å˜æ›´
-   */
-  onLocationInput: function (e) {
-    this.setData({
-      location: e.detail.value
-    });
-    this.checkFormValidity();
-  },
-
-  /**
-   * æ—¥æœŸé€‰æ‹©å˜æ›´
-   */
-  onDateChange: function (e) {
-    this.setData({
-      date: e.detail.value
-    });
-    this.checkFormValidity();
-  },
-
-  /**
-   * ç±»å‹é€‰æ‹©å˜æ›´
-   */
-  onTypeChange: function (e) {
-    this.setData({
-      type: e.detail.value
-    });
-    this.checkFormValidity();
-  },
-
-  /**
-   * æ£€æŸ¥è¡¨å•æœ‰æ•ˆæ€§
-   */
-  checkFormValidity: function () {
-    const { selectedUser, content, date } = this.data;
-    const isValid = selectedUser && content.trim().length > 0 && date;
-    
-    this.setData({
-      isFormValid: isValid
-    });
-  },
-
-  /**
-   * å–æ¶ˆæŒ‰é’®ç‚¹å‡»äº‹ä»¶
-   */
-  onCancel: function () {
-    wx.navigateBack();
-  },
-
-  /**
-   * æäº¤æŒ‰é’®ç‚¹å‡»äº‹ä»¶
-   */
-  onSubmit: function () {
-    if (!this.data.isFormValid) return;
-    
-    // æ˜¾ç¤ºåŠ è½½æç¤º
-    wx.showLoading({
-      title: 'æäº¤ä¸­...',
-      mask: true
-    });
-    
-    // æ„å»ºäº‹è¿¹æ•°æ®
-    const deedData = {
-      userId: this.data.selectedUser.id,
-      nickname: this.data.selectedUser.name,
-      avatarUrl: this.data.selectedUser.avatar,
-      content: this.data.content,
-      location: this.data.location,
-      date: this.data.date,
-      type: this.data.type,
-      createTime: new Date().getTime()
-    };
-    
-    // è¿™é‡Œåº”è¯¥è°ƒç”¨äº‘å‡½æ•°ä¿å­˜äº‹è¿¹
-    // ä¸ºäº†æ¼”ç¤ºï¼Œä½¿ç”¨setTimeoutæ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚
-    setTimeout(() => {
-      wx.hideLoading();
-      
-      wx.showToast({
-        title: 'æäº¤æˆåŠŸ',
-        icon: 'success',
-        duration: 2000
-      });
-      
-      // å»¶è¿Ÿè¿”å›ä¸Šä¸€é¡µ
-      setTimeout(() => {
-        wx.navigateBack();
-      }, 1500);
-    }, 1000);
-  }
+// pages/report-deed/report-deed.js
+Page({
+  /**
+   * é¡µé¢çš„åˆå§‹æ•°æ®
+   */
+  data: {
+    users: [],
+    selectedUser: null,
+    content: '',
+    location: '',
+    date: '',
+    type: 'success', // é»˜è®¤ä¸ºæˆåŠŸäº‹è¿¹
+    isFormValid: false
+  },
+
+  /**
+   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åŠ è½½
+   */
+  onLoad: function (options) {
+    // åŠ è½½ç”¨æˆ·åˆ—è¡¨
+    this.loadUsers();
+    
+    // è®¾ç½®é»˜è®¤æ—¥æœŸä¸ºä»Šå¤©
+    const today = new Date();
+    const year = today.getFullYear();
+    const month = String(today.getMonth() + 1).padStart(2, '0');
+    const day = String(today.getDate()).padStart(2, '0');
+    this.setData({
+      date: `${year}-${month}-${day}`
+    });
+    
+    // æ£€æŸ¥è¡¨å•æœ‰æ•ˆæ€§
+    this.checkFormValidity();
+  },
+
+  /**
+   * åŠ è½½ç”¨æˆ·åˆ—è¡¨
+   */
+  loadUsers: function () {
+    // è¿™é‡Œåº”è¯¥è°ƒç”¨äº‘å‡½æ•°è·å–ç”¨æˆ·åˆ—è¡¨
+    // ä¸ºäº†æ¼”ç¤ºï¼Œä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
+    const mockUsers = [
+      { id: '1', name: 'å¼ ä¸‰', avatar: 'https://placekitten.com/80/80' },
+      { id: '2', name: 'æå››', avatar: 'https://placekitten.com/81/81' },
+      { id: '3', name: 'ç‹äº”', avatar: 'https://placekitten.com/82/82' },
+      { id: '4', name: 'èµµå…­', avatar: 'https://placekitten.com/83/83' }
+    ];
+    
+    this.setData({
+      users: mockUsers
+    });
+  },
+
+  /**
+   * ç”¨æˆ·é€‰æ‹©å˜æ›´
+   */
+  onUserChange: function (e) {
+    const index = e.detail.value;
+    this.setData({
+      selectedUser: this.data.users[index]
+    });
+    this.checkFormValidity();
+  },
+
+  /**
+   * å†…å®¹è¾“å…¥å˜æ›´
+   */
+  onContentInput: function (e) {
+    this.setData({
+      content: e.detail.value
+    });
+    this.checkFormValidity();
+  },
+
+  /**
+   * åœ°ç‚¹è¾“å…¥å˜æ›´
+   */
+  onLocationInput: function (e) {
+    this.setData({
+      location: e.detail.value
+    });
+    this.checkFormValidity();
+  },
+
+  /**
+   * æ—¥æœŸé€‰æ‹©å˜æ›´
+   */
+  onDateChange: function (e) {
+    this.setData({
+      date: e.detail.value
+    });
+    this.checkFormValidity();
+  },
+
+  /**
+   * ç±»å‹é€‰æ‹©å˜æ›´
+   */
+  onTypeChange: function (e) {
+    this.setData({
+      type: e.detail.value
+    });
+    this.checkFormValidity();
+  },
+
+  /**
+   * æ£€æŸ¥è¡¨å•æœ‰æ•ˆæ€§
+   */
+  checkFormValidity: function () {
+    const { selectedUser, content, date } = this.data;
+    const isValid = selectedUser && content.trim().length > 0 && date;
+    
+    this.setData({
+      isFormValid: isValid
+    });
+  },
+
+  /**
+   * å–æ¶ˆæŒ‰é’®ç‚¹å‡»äº‹ä»¶
+   */
+  onCancel: function () {
+    wx.navigateBack();
+  },
+
+  /**
+   * æäº¤æŒ‰é’®ç‚¹å‡»äº‹ä»¶
+   */
+  onSubmit: function () {
+    if (!this.data.isFormValid) return;
+    
+    // æ˜¾ç¤ºåŠ è½½æç¤º
+    wx.showLoading({
+      title: 'æäº¤ä¸­...',
+      mask: true
+    });
+    
+    // æ„å»ºäº‹è¿¹æ•°æ®
+    const deedData = {
+      userId: this.data.selectedUser.id,
+      nickname: this.data.selectedUser.name,
+      avatarUrl: this.data.selectedUser.avatar,
+      content: this.data.content,
+      location: this.data.location,
+      date: this.data.date,
+      type: this.data.type,
+      createTime: new Date().getTime()
+    };
+    
+    // è¿™é‡Œåº”è¯¥è°ƒç”¨äº‘å‡½æ•°ä¿å­˜äº‹è¿¹
+    // ä¸ºäº†æ¼”ç¤ºï¼Œä½¿ç”¨setTimeoutæ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚
+    setTimeout(() => {
+      wx.hideLoading();
+      
+      wx.showToast({
+        title: 'æäº¤æˆåŠŸ',
+        icon: 'success',
+        duration: 2000
+      });
+      
+      // å»¶è¿Ÿè¿”å›ä¸Šä¸€é¡µ
+      setTimeout(() => {
+        wx.navigateBack();
+      }, 1500);
+    }, 1000);
+  }
 }) 
\ No newline at end of file
diff --git a/pages/report-deed/report-deed.json b/pages/report-deed/report-deed.json
index 46c1f15..4cc37ae 100644
--- a/pages/report-deed/report-deed.json
+++ b/pages/report-deed/report-deed.json
@@ -1,6 +1,6 @@
-{
-  "navigationBarTitleText": "çˆ†æ–™æ–°äº‹è¿¹",
-  "backgroundColor": "#F7F8FA",
-  "backgroundTextStyle": "dark",
-  "usingComponents": {}
+{
+  "navigationBarTitleText": "çˆ†æ–™æ–°äº‹è¿¹",
+  "backgroundColor": "#F7F8FA",
+  "backgroundTextStyle": "dark",
+  "usingComponents": {}
 } 
\ No newline at end of file
diff --git a/pages/report-deed/report-deed.wxml b/pages/report-deed/report-deed.wxml
index 262b66a..5b4b004 100644
--- a/pages/report-deed/report-deed.wxml
+++ b/pages/report-deed/report-deed.wxml
@@ -1,73 +1,73 @@
-<view class="container">
-  <view class="header">
-    <text class="header-title">çˆ†æ–™æ–°äº‹è¿¹</text>
-    <text class="header-subtitle">åˆ†äº«æœ‰è¶£çš„æ•…äº‹å’Œç²¾å½©ç¬é—´</text>
-  </view>
-  
-  <view class="form-container">
-    <view class="form-group">
-      <view class="form-label">é€‰æ‹©ç”¨æˆ·</view>
-      <picker bindchange="onUserChange" range="{{users}}" range-key="name">
-        <view class="picker">
-          <view class="picker-value">{{selectedUser ? selectedUser.name : 'è¯·é€‰æ‹©ç”¨æˆ·'}}</view>
-          <view class="picker-arrow">â–¼</view>
-        </view>
-      </picker>
-    </view>
-    
-    <view class="form-group">
-      <view class="form-label">äº‹è¿¹å†…å®¹</view>
-      <textarea 
-        class="content-textarea" 
-        placeholder="æè¿°ä¸€ä¸‹å‘ç”Ÿçš„æœ‰è¶£äº‹æƒ…..." 
-        bindinput="onContentInput"
-        value="{{content}}"
-        maxlength="200"
-      ></textarea>
-      <view class="character-count">{{content.length}}/200</view>
-    </view>
-    
-    <view class="form-group">
-      <view class="form-label">å‘ç”Ÿåœ°ç‚¹</view>
-      <input 
-        class="location-input" 
-        placeholder="ä¾‹å¦‚ï¼šä¼¦æ•¦ Soho" 
-        bindinput="onLocationInput"
-        value="{{location}}"
-      />
-    </view>
-    
-    <view class="form-group">
-      <view class="form-label">å‘ç”Ÿæ—¥æœŸ</view>
-      <picker mode="date" bindchange="onDateChange" value="{{date}}">
-        <view class="picker">
-          <view class="picker-value">{{date || 'è¯·é€‰æ‹©æ—¥æœŸ'}}</view>
-          <view class="picker-arrow">â–¼</view>
-        </view>
-      </picker>
-    </view>
-    
-    <view class="form-group">
-      <view class="form-label">äº‹è¿¹ç±»å‹</view>
-      <radio-group class="type-group" bindchange="onTypeChange">
-        <label class="type-item">
-          <radio value="success" checked="{{type === 'success'}}" />
-          <text class="type-label">æˆåŠŸäº‹è¿¹</text>
-        </label>
-        <label class="type-item">
-          <radio value="neutral" checked="{{type === 'neutral'}}" />
-          <text class="type-label">æ™®é€šäº‹è¿¹</text>
-        </label>
-        <label class="type-item">
-          <radio value="fail" checked="{{type === 'fail'}}" />
-          <text class="type-label">å¤±è´¥äº‹è¿¹</text>
-        </label>
-      </radio-group>
-    </view>
-  </view>
-  
-  <view class="action-container">
-    <button class="cancel-button" bindtap="onCancel">å–æ¶ˆ</button>
-    <button class="submit-button" bindtap="onSubmit" disabled="{{!isFormValid}}">æäº¤çˆ†æ–™</button>
-  </view>
+<view class="container">
+  <view class="header">
+    <text class="header-title">çˆ†æ–™æ–°äº‹è¿¹</text>
+    <text class="header-subtitle">åˆ†äº«æœ‰è¶£çš„æ•…äº‹å’Œç²¾å½©ç¬é—´</text>
+  </view>
+  
+  <view class="form-container">
+    <view class="form-group">
+      <view class="form-label">é€‰æ‹©ç”¨æˆ·</view>
+      <picker bindchange="onUserChange" range="{{users}}" range-key="name">
+        <view class="picker">
+          <view class="picker-value">{{selectedUser ? selectedUser.name : 'è¯·é€‰æ‹©ç”¨æˆ·'}}</view>
+          <view class="picker-arrow">â–¼</view>
+        </view>
+      </picker>
+    </view>
+    
+    <view class="form-group">
+      <view class="form-label">äº‹è¿¹å†…å®¹</view>
+      <textarea 
+        class="content-textarea" 
+        placeholder="æè¿°ä¸€ä¸‹å‘ç”Ÿçš„æœ‰è¶£äº‹æƒ…..." 
+        bindinput="onContentInput"
+        value="{{content}}"
+        maxlength="200"
+      ></textarea>
+      <view class="character-count">{{content.length}}/200</view>
+    </view>
+    
+    <view class="form-group">
+      <view class="form-label">å‘ç”Ÿåœ°ç‚¹</view>
+      <input 
+        class="location-input" 
+        placeholder="ä¾‹å¦‚ï¼šä¼¦æ•¦ Soho" 
+        bindinput="onLocationInput"
+        value="{{location}}"
+      />
+    </view>
+    
+    <view class="form-group">
+      <view class="form-label">å‘ç”Ÿæ—¥æœŸ</view>
+      <picker mode="date" bindchange="onDateChange" value="{{date}}">
+        <view class="picker">
+          <view class="picker-value">{{date || 'è¯·é€‰æ‹©æ—¥æœŸ'}}</view>
+          <view class="picker-arrow">â–¼</view>
+        </view>
+      </picker>
+    </view>
+    
+    <view class="form-group">
+      <view class="form-label">äº‹è¿¹ç±»å‹</view>
+      <radio-group class="type-group" bindchange="onTypeChange">
+        <label class="type-item">
+          <radio value="success" checked="{{type === 'success'}}" />
+          <text class="type-label">æˆåŠŸäº‹è¿¹</text>
+        </label>
+        <label class="type-item">
+          <radio value="neutral" checked="{{type === 'neutral'}}" />
+          <text class="type-label">æ™®é€šäº‹è¿¹</text>
+        </label>
+        <label class="type-item">
+          <radio value="fail" checked="{{type === 'fail'}}" />
+          <text class="type-label">å¤±è´¥äº‹è¿¹</text>
+        </label>
+      </radio-group>
+    </view>
+  </view>
+  
+  <view class="action-container">
+    <button class="cancel-button" bindtap="onCancel">å–æ¶ˆ</button>
+    <button class="submit-button" bindtap="onSubmit" disabled="{{!isFormValid}}">æäº¤çˆ†æ–™</button>
+  </view>
 </view> 
\ No newline at end of file
diff --git a/pages/report-deed/report-deed.wxss b/pages/report-deed/report-deed.wxss
index fc308bc..812c9a0 100644
--- a/pages/report-deed/report-deed.wxss
+++ b/pages/report-deed/report-deed.wxss
@@ -1,160 +1,160 @@
-/* pages/report-deed/report-deed.wxss */
-.container {
-  min-height: 100vh;
-  background-color: #F7F8FA;
-  padding-bottom: 120rpx; /* ä¸ºåº•éƒ¨æŒ‰é’®ç•™å‡ºç©ºé—´ */
-}
-
-/* å¤´éƒ¨æ ·å¼ */
-.header {
-  padding: 40rpx 40rpx 20rpx;
-  background-color: #FFFFFF;
-  text-align: center;
-  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);
-  margin-bottom: 24rpx;
-}
-
-.header-title {
-  font-size: 48rpx;
-  font-weight: 700;
-  color: #1F2937;
-  margin-bottom: 12rpx;
-  display: block;
-}
-
-.header-subtitle {
-  font-size: 28rpx;
-  color: #6B7280;
-  display: block;
-}
-
-/* è¡¨å•å®¹å™¨ */
-.form-container {
-  padding: 32rpx;
-}
-
-/* è¡¨å•ç»„ */
-.form-group {
-  margin-bottom: 32rpx;
-}
-
-.form-label {
-  font-size: 28rpx;
-  font-weight: 600;
-  color: #1F2937;
-  margin-bottom: 16rpx;
-}
-
-/* é€‰æ‹©å™¨æ ·å¼ */
-.picker {
-  background-color: #FFFFFF;
-  border-radius: 999rpx; /* èƒ¶å›Šå½¢çŠ¶ */
-  padding: 24rpx 32rpx;
-  display: flex;
-  justify-content: space-between;
-  align-items: center;
-  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);
-}
-
-.picker-value {
-  color: #374151;
-  font-size: 28rpx;
-}
-
-.picker-arrow {
-  color: #9CA3AF;
-  font-size: 24rpx;
-}
-
-/* æ–‡æœ¬åŸŸæ ·å¼ */
-.content-textarea {
-  background-color: #FFFFFF;
-  border-radius: 24rpx;
-  padding: 24rpx;
-  width: 100%;
-  height: 240rpx;
-  box-sizing: border-box;
-  font-size: 28rpx;
-  color: #374151;
-  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);
-}
-
-.character-count {
-  text-align: right;
-  font-size: 24rpx;
-  color: #9CA3AF;
-  margin-top: 8rpx;
-}
-
-/* è¾“å…¥æ¡†æ ·å¼ */
-.location-input {
-  background-color: #FFFFFF;
-  border-radius: 999rpx; /* èƒ¶å›Šå½¢çŠ¶ */
-  padding: 24rpx 32rpx;
-  font-size: 28rpx;
-  color: #374151;
-  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);
-}
-
-/* å•é€‰ç»„æ ·å¼ */
-.type-group {
-  display: flex;
-  flex-wrap: wrap;
-  gap: 24rpx;
-}
-
-.type-item {
-  display: flex;
-  align-items: center;
-  background-color: #FFFFFF;
-  border-radius: 999rpx; /* èƒ¶å›Šå½¢çŠ¶ */
-  padding: 16rpx 24rpx;
-  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);
-}
-
-.type-label {
-  font-size: 28rpx;
-  color: #374151;
-  margin-left: 8rpx;
-}
-
-/* åº•éƒ¨æ“ä½œåŒº */
-.action-container {
-  position: fixed;
-  bottom: 0;
-  left: 0;
-  right: 0;
-  padding: 24rpx 32rpx;
-  background-color: #FFFFFF;
-  box-shadow: 0 -4rpx 12rpx rgba(0, 0, 0, 0.05);
-  z-index: 100;
-  display: flex;
-  justify-content: space-between;
-  gap: 24rpx;
-}
-
-.cancel-button, .submit-button {
-  flex: 1;
-  padding: 20rpx 0;
-  font-size: 32rpx;
-  font-weight: 600;
-  border-radius: 999rpx; /* èƒ¶å›Šå½¢çŠ¶ */
-  display: flex;
-  align-items: center;
-  justify-content: center;
-}
-
-.cancel-button {
-  background-color: #F3F4F6;
-  color: #4B5563;
-}
-
-.submit-button {
-  background-color: #10B981;
-  color: #FFFFFF;
-}
-
-.submit-button[disabled] {
-  background-color: #D1D5DB;
-  color: #9CA3AF;
+/* pages/report-deed/report-deed.wxss */
+.container {
+  min-height: 100vh;
+  background-color: #F7F8FA;
+  padding-bottom: 120rpx; /* ä¸ºåº•éƒ¨æŒ‰é’®ç•™å‡ºç©ºé—´ */
+}
+
+/* å¤´éƒ¨æ ·å¼ */
+.header {
+  padding: 40rpx 40rpx 20rpx;
+  background-color: #FFFFFF;
+  text-align: center;
+  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);
+  margin-bottom: 24rpx;
+}
+
+.header-title {
+  font-size: 48rpx;
+  font-weight: 700;
+  color: #1F2937;
+  margin-bottom: 12rpx;
+  display: block;
+}
+
+.header-subtitle {
+  font-size: 28rpx;
+  color: #6B7280;
+  display: block;
+}
+
+/* è¡¨å•å®¹å™¨ */
+.form-container {
+  padding: 32rpx;
+}
+
+/* è¡¨å•ç»„ */
+.form-group {
+  margin-bottom: 32rpx;
+}
+
+.form-label {
+  font-size: 28rpx;
+  font-weight: 600;
+  color: #1F2937;
+  margin-bottom: 16rpx;
+}
+
+/* é€‰æ‹©å™¨æ ·å¼ */
+.picker {
+  background-color: #FFFFFF;
+  border-radius: 999rpx; /* èƒ¶å›Šå½¢çŠ¶ */
+  padding: 24rpx 32rpx;
+  display: flex;
+  justify-content: space-between;
+  align-items: center;
+  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);
+}
+
+.picker-value {
+  color: #374151;
+  font-size: 28rpx;
+}
+
+.picker-arrow {
+  color: #9CA3AF;
+  font-size: 24rpx;
+}
+
+/* æ–‡æœ¬åŸŸæ ·å¼ */
+.content-textarea {
+  background-color: #FFFFFF;
+  border-radius: 24rpx;
+  padding: 24rpx;
+  width: 100%;
+  height: 240rpx;
+  box-sizing: border-box;
+  font-size: 28rpx;
+  color: #374151;
+  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);
+}
+
+.character-count {
+  text-align: right;
+  font-size: 24rpx;
+  color: #9CA3AF;
+  margin-top: 8rpx;
+}
+
+/* è¾“å…¥æ¡†æ ·å¼ */
+.location-input {
+  background-color: #FFFFFF;
+  border-radius: 999rpx; /* èƒ¶å›Šå½¢çŠ¶ */
+  padding: 24rpx 32rpx;
+  font-size: 28rpx;
+  color: #374151;
+  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);
+}
+
+/* å•é€‰ç»„æ ·å¼ */
+.type-group {
+  display: flex;
+  flex-wrap: wrap;
+  gap: 24rpx;
+}
+
+.type-item {
+  display: flex;
+  align-items: center;
+  background-color: #FFFFFF;
+  border-radius: 999rpx; /* èƒ¶å›Šå½¢çŠ¶ */
+  padding: 16rpx 24rpx;
+  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);
+}
+
+.type-label {
+  font-size: 28rpx;
+  color: #374151;
+  margin-left: 8rpx;
+}
+
+/* åº•éƒ¨æ“ä½œåŒº */
+.action-container {
+  position: fixed;
+  bottom: 0;
+  left: 0;
+  right: 0;
+  padding: 24rpx 32rpx;
+  background-color: #FFFFFF;
+  box-shadow: 0 -4rpx 12rpx rgba(0, 0, 0, 0.05);
+  z-index: 100;
+  display: flex;
+  justify-content: space-between;
+  gap: 24rpx;
+}
+
+.cancel-button, .submit-button {
+  flex: 1;
+  padding: 20rpx 0;
+  font-size: 32rpx;
+  font-weight: 600;
+  border-radius: 999rpx; /* èƒ¶å›Šå½¢çŠ¶ */
+  display: flex;
+  align-items: center;
+  justify-content: center;
+}
+
+.cancel-button {
+  background-color: #F3F4F6;
+  color: #4B5563;
+}
+
+.submit-button {
+  background-color: #10B981;
+  color: #FFFFFF;
+}
+
+.submit-button[disabled] {
+  background-color: #D1D5DB;
+  color: #9CA3AF;
 } 
\ No newline at end of file
diff --git a/preview.html b/preview.html
new file mode 100644
index 0000000..abf9230
--- /dev/null
+++ b/preview.html
@@ -0,0 +1,329 @@
+<!DOCTYPE html>
+<html lang="zh-CN">
+<head>
+    <meta charset="UTF-8">
+    <meta name="viewport" content="width=device-width, initial-scale=1.0">
+    <title>ä¼¦æ•¦å¿…åƒæ¦œ - é¢„è§ˆ</title>
+    <style>
+        * {
+            margin: 0;
+            padding: 0;
+            box-sizing: border-box;
+        }
+        
+        body {
+            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', sans-serif;
+            background-color: #f8fafc;
+            color: #333;
+        }
+        
+        .phone-frame {
+            width: 375px;
+            height: 812px;
+            margin: 20px auto;
+            background: white;
+            border-radius: 40px;
+            box-shadow: 0 0 60px rgba(0,0,0,0.3);
+            overflow: hidden;
+            position: relative;
+        }
+        
+        .status-bar {
+            height: 44px;
+            background: white;
+            display: flex;
+            align-items: center;
+            justify-content: space-between;
+            padding: 0 20px;
+            font-size: 14px;
+        }
+        
+        .navbar {
+            height: 44px;
+            background: white;
+            border-bottom: 1px solid #e5e5e5;
+            display: flex;
+            align-items: center;
+            justify-content: center;
+            font-size: 18px;
+            font-weight: 500;
+        }
+        
+        .content {
+            height: calc(100% - 88px);
+            overflow-y: auto;
+            padding: 20px;
+        }
+        
+        .search-bar {
+            background: #f5f5f5;
+            border-radius: 20px;
+            padding: 10px 20px;
+            margin-bottom: 20px;
+            display: flex;
+            align-items: center;
+            gap: 10px;
+        }
+        
+        .search-icon {
+            width: 20px;
+            height: 20px;
+            opacity: 0.5;
+        }
+        
+        .search-input {
+            flex: 1;
+            border: none;
+            background: none;
+            outline: none;
+            font-size: 16px;
+        }
+        
+        .ranking-item {
+            display: flex;
+            align-items: center;
+            padding: 15px 0;
+            border-bottom: 1px solid #f0f0f0;
+        }
+        
+        .rank-number {
+            width: 30px;
+            font-size: 20px;
+            font-weight: bold;
+            color: #ff6b6b;
+        }
+        
+        .avatar {
+            width: 50px;
+            height: 50px;
+            border-radius: 50%;
+            margin: 0 15px;
+            display: flex;
+            align-items: center;
+            justify-content: center;
+            flex-shrink: 0;
+        }
+        
+        .info {
+            flex: 1;
+        }
+        
+        .name {
+            font-size: 16px;
+            font-weight: 500;
+            margin-bottom: 5px;
+        }
+        
+        .votes {
+            font-size: 14px;
+            color: #666;
+        }
+        
+        .vote-btn {
+            background: #ff6b6b;
+            color: white;
+            border: none;
+            padding: 8px 20px;
+            border-radius: 20px;
+            font-size: 14px;
+            cursor: pointer;
+        }
+        
+        .tab-bar {
+            position: absolute;
+            bottom: 0;
+            left: 0;
+            right: 0;
+            height: 50px;
+            background: white;
+            border-top: 1px solid #e5e5e5;
+            display: flex;
+            justify-content: space-around;
+            align-items: center;
+        }
+        
+        .tab-item {
+            text-align: center;
+            font-size: 12px;
+            color: #666;
+        }
+        
+        .tab-item.active {
+            color: #ff6b6b;
+        }
+        
+        .floating-btn {
+            position: absolute;
+            bottom: 70px;
+            right: 20px;
+            width: 56px;
+            height: 56px;
+            background: #ff6b6b;
+            border-radius: 50%;
+            display: flex;
+            align-items: center;
+            justify-content: center;
+            color: white;
+            font-size: 24px;
+            box-shadow: 0 4px 12px rgba(255, 107, 107, 0.4);
+            cursor: pointer;
+        }
+    </style>
+</head>
+<body>
+    <div class="phone-frame">
+        <div class="status-bar">
+            <span>9:41</span>
+            <span>100%ğŸ”‹</span>
+        </div>
+        
+        <div class="navbar">ä¼¦æ•¦å¿…åƒæ¦œ</div>
+        
+        <div class="content">
+            <div class="search-bar">
+                <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
+                    <circle cx="11" cy="11" r="8"></circle>
+                    <path d="m21 21-4.35-4.35"></path>
+                </svg>
+                <input type="text" class="search-input" placeholder="æœç´¢é¤å…åç§°">
+            </div>
+            
+            <div class="ranking-list">
+                <div class="ranking-item">
+                    <div class="rank-number">1</div>
+                    <div class="avatar" style="background: #ff6b6b;">
+                        <span style="color: white; font-size: 20px; font-weight: bold;">é¼</span>
+                    </div>
+                    <div class="info">
+                        <div class="name">é¼æ³°ä¸°</div>
+                        <div class="votes">128 ç¥¨</div>
+                    </div>
+                    <button class="vote-btn">æŠ•ç¥¨</button>
+                </div>
+                
+                <div class="ranking-item">
+                    <div class="rank-number">2</div>
+                    <div class="avatar" style="background: #4ecdc4;">
+                        <span style="color: white; font-size: 20px; font-weight: bold;">æ¹˜</span>
+                    </div>
+                    <div class="info">
+                        <div class="name">æ¹˜æ»¡æ¥¼</div>
+                        <div class="votes">115 ç¥¨</div>
+                    </div>
+                    <button class="vote-btn">æŠ•ç¥¨</button>
+                </div>
+                
+                <div class="ranking-item">
+                    <div class="rank-number">3</div>
+                    <div class="avatar" style="background: #45b7d1;">
+                        <span style="color: white; font-size: 20px; font-weight: bold;">å’Œ</span>
+                    </div>
+                    <div class="info">
+                        <div class="name">å’Œç‰›çƒ§è‚‰</div>
+                        <div class="votes">98 ç¥¨</div>
+                    </div>
+                    <button class="vote-btn">æŠ•ç¥¨</button>
+                </div>
+                
+                <div class="ranking-item">
+                    <div class="rank-number">4</div>
+                    <div class="avatar" style="background: #f7b731;">
+                        <span style="color: white; font-size: 20px; font-weight: bold;">å·</span>
+                    </div>
+                    <div class="info">
+                        <div class="name">å·å‘³è§‚</div>
+                        <div class="votes">87 ç¥¨</div>
+                    </div>
+                    <button class="vote-btn">æŠ•ç¥¨</button>
+                </div>
+                
+                <div class="ranking-item">
+                    <div class="rank-number">5</div>
+                    <div class="avatar" style="background: #786fa6;">
+                        <span style="color: white; font-size: 20px; font-weight: bold;">å‘³</span>
+                    </div>
+                    <div class="info">
+                        <div class="name">å‘³åƒæ‹‰é¢</div>
+                        <div class="votes">76 ç¥¨</div>
+                    </div>
+                    <button class="vote-btn">æŠ•ç¥¨</button>
+                </div>
+                
+                <div class="ranking-item">
+                    <div class="rank-number">6</div>
+                    <div class="avatar" style="background: #63cdda;">
+                        <span style="color: white; font-size: 20px; font-weight: bold;">ç²¤</span>
+                    </div>
+                    <div class="info">
+                        <div class="name">ç²¤æµ·è½©</div>
+                        <div class="votes">65 ç¥¨</div>
+                    </div>
+                    <button class="vote-btn">æŠ•ç¥¨</button>
+                </div>
+            </div>
+        </div>
+        
+        <div class="floating-btn">+</div>
+        
+        <div class="tab-bar">
+            <div class="tab-item active">é¦–é¡µ</div>
+            <div class="tab-item">æˆ‘çš„æå</div>
+            <div class="tab-item">å–„è¡Œå¢™</div>
+            <div class="tab-item">æˆ‘çš„</div>
+        </div>
+    </div>
+    
+    <script>
+        // æŠ•ç¥¨äº¤äº’
+        document.querySelectorAll('.vote-btn').forEach(btn => {
+            btn.addEventListener('click', function() {
+                const votesEl = this.parentElement.querySelector('.votes');
+                const currentVotes = parseInt(votesEl.textContent);
+                votesEl.textContent = (currentVotes + 1) + ' ç¥¨';
+                this.textContent = 'å·²æŠ•ç¥¨';
+                this.style.background = '#95e1d3';
+                this.style.cursor = 'not-allowed';
+                this.disabled = true;
+            });
+        });
+        
+        // æ·»åŠ æŒ‰é’®
+        document.querySelector('.floating-btn').addEventListener('click', function() {
+            alert('ç‚¹å‡»äº†æ·»åŠ æŒ‰é’®ï¼åœ¨å®é™…å°ç¨‹åºä¸­ä¼šè·³è½¬åˆ°æåé¡µé¢');
+        });
+        
+        // é¤å…é¡¹ç‚¹å‡»
+        document.querySelectorAll('.ranking-item').forEach(item => {
+            item.style.cursor = 'pointer';
+            item.addEventListener('click', function(e) {
+                if (e.target.classList.contains('vote-btn')) return;
+                const name = this.querySelector('.name').textContent;
+                alert(`æŸ¥çœ‹ ${name} çš„è¯¦æƒ…é¡µé¢`);
+            });
+        });
+        
+        // æœç´¢åŠŸèƒ½
+        document.querySelector('.search-input').addEventListener('input', function(e) {
+            const searchTerm = e.target.value.toLowerCase();
+            document.querySelectorAll('.ranking-item').forEach(item => {
+                const name = item.querySelector('.name').textContent.toLowerCase();
+                if (name.includes(searchTerm)) {
+                    item.style.display = 'flex';
+                } else {
+                    item.style.display = 'none';
+                }
+            });
+        });
+        
+        // åº•éƒ¨æ ‡ç­¾æ 
+        document.querySelectorAll('.tab-item').forEach(tab => {
+            tab.style.cursor = 'pointer';
+            tab.addEventListener('click', function() {
+                document.querySelectorAll('.tab-item').forEach(t => t.classList.remove('active'));
+                this.classList.add('active');
+                alert(`åˆ‡æ¢åˆ° ${this.textContent} é¡µé¢`);
+            });
+        });
+    </script>
+</body>
+</html>
\ No newline at end of file
diff --git a/quick-start-uniapp.md b/quick-start-uniapp.md
new file mode 100644
index 0000000..a3223de
--- /dev/null
+++ b/quick-start-uniapp.md
@@ -0,0 +1,278 @@
+# å¿«é€Ÿå¼€å‘æ–¹æ¡ˆ - uni-app + uView UI
+
+## 1. å¿«é€Ÿåˆå§‹åŒ–é¡¹ç›®ï¼ˆ5åˆ†é’Ÿï¼‰
+
+```bash
+# ä½¿ç”¨ HBuilderXï¼ˆæ¨èï¼‰æˆ–å‘½ä»¤è¡Œ
+npm install -g @vue/cli
+vue create -p dcloudio/uni-preset-vue london-food-rank
+
+# å®‰è£… uView UI
+npm install uview-ui
+```
+
+## 2. ä¸»è¦é¡µé¢ä»£ç ç¤ºä¾‹
+
+### é¦–é¡µ - æ’è¡Œæ¦œï¼ˆpages/index/index.vueï¼‰
+```vue
+<template>
+  <view class="container">
+    <!-- æœç´¢æ  -->
+    <u-search 
+      v-model="keyword" 
+      placeholder="æœç´¢é¤å…åç§°"
+      @search="handleSearch"
+    ></u-search>
+    
+    <!-- ç»Ÿè®¡å¡ç‰‡ -->
+    <view class="stats-card">
+      <u-row>
+        <u-col span="4">
+          <view class="stat-item">
+            <text class="stat-num">{{ stats.total }}</text>
+            <text class="stat-label">æ€»é¤å…</text>
+          </view>
+        </u-col>
+        <u-col span="4">
+          <view class="stat-item">
+            <text class="stat-num">{{ stats.votes }}</text>
+            <text class="stat-label">æ€»ç¥¨æ•°</text>
+          </view>
+        </u-col>
+        <u-col span="4">
+          <view class="stat-item">
+            <text class="stat-num">{{ stats.users }}</text>
+            <text class="stat-label">å‚ä¸äººæ•°</text>
+          </view>
+        </u-col>
+      </u-row>
+    </view>
+    
+    <!-- æ’è¡Œæ¦œåˆ—è¡¨ -->
+    <u-list @scrolltolower="loadMore">
+      <u-list-item v-for="(item, index) in list" :key="item._id">
+        <u-cell-group>
+          <u-cell @click="goDetail(item)">
+            <view slot="title" class="restaurant-item">
+              <text class="rank">{{ index + 1 }}</text>
+              <u-avatar :src="item.avatar" size="40"></u-avatar>
+              <view class="info">
+                <text class="name">{{ item.name }}</text>
+                <text class="votes">{{ item.votes }} ç¥¨</text>
+              </view>
+              <u-button 
+                type="primary" 
+                size="mini"
+                @click.stop="handleVote(item)"
+              >
+                æŠ•ç¥¨
+              </u-button>
+            </view>
+          </u-cell>
+        </u-cell-group>
+      </u-list-item>
+    </u-list>
+    
+    <!-- æ‚¬æµ®æŒ‰é’® -->
+    <u-fixed bottom="100" right="30">
+      <u-button 
+        type="primary" 
+        shape="circle"
+        icon="plus"
+        @click="goCreate"
+      ></u-button>
+    </u-fixed>
+  </view>
+</template>
+
+<script>
+export default {
+  data() {
+    return {
+      keyword: '',
+      list: [],
+      stats: {
+        total: 0,
+        votes: 0,
+        users: 0
+      }
+    }
+  },
+  
+  onLoad() {
+    this.loadData()
+  },
+  
+  methods: {
+    // åŠ è½½æ•°æ®
+    async loadData() {
+      const db = wx.cloud.database()
+      const res = await db.collection('entries')
+        .orderBy('votes', 'desc')
+        .get()
+      
+      this.list = res.data
+    },
+    
+    // æŠ•ç¥¨
+    async handleVote(item) {
+      // æ£€æŸ¥ç™»å½•
+      if (!this.checkLogin()) return
+      
+      // è°ƒç”¨äº‘å‡½æ•°
+      wx.cloud.callFunction({
+        name: 'voteManage',
+        data: {
+          action: 'vote',
+          entryId: item._id
+        }
+      }).then(res => {
+        if (res.result.success) {
+          item.votes++
+          this.$u.toast('æŠ•ç¥¨æˆåŠŸ')
+        } else {
+          this.$u.toast(res.result.message)
+        }
+      })
+    },
+    
+    // è·³è½¬è¯¦æƒ…
+    goDetail(item) {
+      uni.navigateTo({
+        url: `/pages/detail/detail?id=${item._id}`
+      })
+    },
+    
+    // åˆ›å»ºæå
+    goCreate() {
+      if (!this.checkLogin()) return
+      uni.navigateTo({
+        url: '/pages/create/create'
+      })
+    },
+    
+    // æ£€æŸ¥ç™»å½•
+    checkLogin() {
+      const userInfo = uni.getStorageSync('userInfo')
+      if (!userInfo) {
+        this.$u.toast('è¯·å…ˆç™»å½•')
+        return false
+      }
+      return true
+    }
+  }
+}
+</script>
+
+<style lang="scss">
+.container {
+  padding: 20rpx;
+}
+
+.stats-card {
+  background: #fff;
+  border-radius: 20rpx;
+  padding: 30rpx;
+  margin: 20rpx 0;
+  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
+  
+  .stat-item {
+    text-align: center;
+    
+    .stat-num {
+      display: block;
+      font-size: 48rpx;
+      font-weight: bold;
+      color: #ff6b6b;
+    }
+    
+    .stat-label {
+      display: block;
+      font-size: 24rpx;
+      color: #666;
+      margin-top: 10rpx;
+    }
+  }
+}
+
+.restaurant-item {
+  display: flex;
+  align-items: center;
+  padding: 20rpx 0;
+  
+  .rank {
+    font-size: 36rpx;
+    font-weight: bold;
+    color: #ff6b6b;
+    margin-right: 20rpx;
+    min-width: 60rpx;
+  }
+  
+  .info {
+    flex: 1;
+    margin-left: 20rpx;
+    
+    .name {
+      display: block;
+      font-size: 32rpx;
+      font-weight: 500;
+    }
+    
+    .votes {
+      display: block;
+      font-size: 24rpx;
+      color: #666;
+      margin-top: 8rpx;
+    }
+  }
+}
+</style>
+```
+
+## 3. å…³é”®ä¼˜åŠ¿
+
+### å¼€å‘æ•ˆç‡æå‡ç‚¹ï¼š
+1. **ç»„ä»¶å¼€ç®±å³ç”¨**ï¼šæœç´¢æ¡†ã€åˆ—è¡¨ã€æŒ‰é’®ã€å¤´åƒç­‰ç›´æ¥ä½¿ç”¨
+2. **æ ·å¼ç»Ÿä¸€**ï¼šuView æä¾›ç»Ÿä¸€çš„è®¾è®¡è§„èŒƒ
+3. **äº¤äº’ç®€å•**ï¼šToastã€Loadingã€Modal ç­‰ä¸€è¡Œä»£ç æå®š
+4. **å“åº”å¼æ•°æ®**ï¼šVue çš„åŒå‘ç»‘å®šè®©æ•°æ®å¤„ç†æå…¶ç®€å•
+
+### æ—¶é—´å¯¹æ¯”ï¼š
+- åŸç”Ÿå¼€å‘ä¸€ä¸ªé¡µé¢ï¼š2-3å°æ—¶
+- uni-app + uViewï¼š30åˆ†é’Ÿ
+
+## 4. å¿«é€Ÿéƒ¨ç½²
+
+```bash
+# ç¼–è¯‘åˆ°å¾®ä¿¡å°ç¨‹åº
+npm run dev:mp-weixin
+
+# ç”¨ HBuilderX æ‰“å¼€ dist/dev/mp-weixin
+# æˆ–ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·æ‰“å¼€
+```
+
+## 5. äº‘å‡½æ•°å¯¹æ¥ï¼ˆä¿æŒä¸å˜ï¼‰
+
+uni-app å®Œç¾æ”¯æŒå¾®ä¿¡äº‘å¼€å‘ï¼ŒåŸæœ‰çš„äº‘å‡½æ•°æ— éœ€ä¿®æ”¹ï¼š
+
+```javascript
+// åˆå§‹åŒ–äº‘å¼€å‘
+wx.cloud.init({
+  env: 'cloud1-2g2sby6z920b76cb'
+})
+
+// è°ƒç”¨äº‘å‡½æ•°
+wx.cloud.callFunction({
+  name: 'userManage',
+  data: { action: 'login' }
+})
+```
+
+## é¢„è®¡å¼€å‘æ—¶é—´
+
+- é¡µé¢æ­å»ºï¼š1å¤©
+- åŠŸèƒ½å¯¹æ¥ï¼š1å¤©  
+- æµ‹è¯•ä¼˜åŒ–ï¼š0.5å¤©
+- **æ€»è®¡ï¼š2.5å¤©å®Œæˆæ•´ä¸ªåº”ç”¨**
+
+æ¯”åŸç”Ÿå¼€å‘èŠ‚çœ 60% ä»¥ä¸Šçš„æ—¶é—´ï¼
\ No newline at end of file
-- 
2.49.0

