# Comments Collection Index Configuration

## 新增索引要求

为了支持按点赞数排序评论，需要在 `comments` 集合中添加以下索引：

### 1. 点赞数排序索引
```javascript
// 复合索引：支持按点赞数降序 + 创建时间降序排序
{
  "nominationId": 1,    // 按提名ID查询
  "parentId": 1,        // 区分顶级评论和回复
  "status": 1,          // 只查询正常状态的评论
  "likes": -1,          // 按点赞数降序
  "createTime": -1      // 相同点赞数按时间降序
}
```

### 2. 数据库控制台设置步骤
1. 进入腾讯云数据库控制台
2. 选择对应的云开发环境
3. 进入 `comments` 集合
4. 点击"索引管理"
5. 创建复合索引，字段顺序如上

### 3. 备用索引（如果复合索引过于复杂）
```javascript
// 简单索引：只按点赞数排序
{
  "likes": -1
}
```

## 注意事项

- 索引创建可能需要一些时间，特别是如果集合中已有大量数据
- 复合索引可以同时支持多种查询模式，推荐使用
- 如果查询性能不佳，可以考虑增加更多索引
